diff --git a/node_modules/@editablejs/plugin-table/dist/chunk-JBL3S7LE.mjs b/node_modules/@editablejs/plugin-table/dist/chunk-JBL3S7LE.mjs
new file mode 100644
index 0000000..5362420
--- /dev/null
+++ b/node_modules/@editablejs/plugin-table/dist/chunk-JBL3S7LE.mjs
@@ -0,0 +1,107 @@
+// src/cell/options.ts
+var defaultTableMinColWidth = 35;
+var TABLE_CELL_OPTIONS = /* @__PURE__ */ new WeakMap();
+var getOptions = (editor) => {
+  const options = TABLE_CELL_OPTIONS.get(editor) ?? {};
+  if (!options.minColWidth)
+    options.minColWidth = defaultTableMinColWidth;
+  return options;
+};
+var setOptions = (editor, { minColWidth }) => {
+  TABLE_CELL_OPTIONS.set(editor, { minColWidth });
+};
+
+// src/row/options.ts
+var defaultTableMinRowHeight = 35;
+var TABLE_ROW_OPTIONS = /* @__PURE__ */ new WeakMap();
+var getOptions2 = (editor) => {
+  const options = TABLE_ROW_OPTIONS.get(editor) ?? {};
+  if (!options.minRowHeight)
+    options.minRowHeight = defaultTableMinRowHeight;
+  return options;
+};
+var setOptions2 = (editor, { minRowHeight }) => {
+  TABLE_ROW_OPTIONS.set(editor, { minRowHeight });
+};
+
+// src/table/options.ts
+import * as React from "react";
+var TABLE_OPTIONS_WEAKMAP = /* @__PURE__ */ new WeakMap();
+var getOptions3 = (editor) => {
+  const options = TABLE_OPTIONS_WEAKMAP.get(editor) ?? {};
+  return {
+    ...options,
+    ...getOptions(editor),
+    ...getOptions2(editor)
+  };
+};
+var setOptions3 = (editor, options) => {
+  setOptions(editor, options);
+  setOptions2(editor, options);
+  TABLE_OPTIONS_WEAKMAP.set(editor, options);
+};
+var useTableOptions = (editor) => {
+  return React.useRef(getOptions3(editor)).current;
+};
+
+// src/table/utils.ts
+import { Editable } from "@editablejs/editor";
+var calculateAverageColumnWidthInContainer = (editor, options) => {
+  const { minWidth = 10, cols, getWidth } = options;
+  const container = Editable.toDOMNode(editor, editor);
+  const rect = container.getBoundingClientRect();
+  const width = getWidth ? getWidth(rect.width) : 0;
+  const colWidth = Math.max(minWidth, Math.floor(width / cols));
+  const tableColsWdith = [];
+  let colsWidth = 0;
+  for (let c = 0; c < cols; c++) {
+    const cws = colsWidth + colWidth;
+    if (c === cols - 1 && cws < width) {
+      const cw = width - colsWidth;
+      colsWidth += cw;
+      tableColsWdith.push(cw);
+    } else {
+      colsWidth = cws;
+      tableColsWdith.push(colWidth);
+    }
+  }
+  return tableColsWdith;
+};
+var adaptiveExpandColumnWidthInContainer = (editor, colsWidth, minWidth = 5) => {
+  const container = Editable.toDOMNode(editor, editor);
+  const containerRect = container.getBoundingClientRect();
+  const { width: containerWidth } = containerRect;
+  const widths = colsWidth.concat();
+  let gridWidth = widths.reduce((a, b) => a + b, 0);
+  while (gridWidth > containerWidth) {
+    let minCount = 0;
+    for (let i = 0; i < widths.length; i++) {
+      const w = widths[i];
+      if (w > minWidth) {
+        widths[i] = w - 1;
+        gridWidth--;
+        if (gridWidth <= containerWidth)
+          break;
+      } else {
+        minCount++;
+      }
+    }
+    if (minCount === widths.length)
+      break;
+  }
+  return widths;
+};
+
+export {
+  defaultTableMinColWidth,
+  setOptions,
+  defaultTableMinRowHeight,
+  getOptions2 as getOptions,
+  setOptions2,
+  getOptions3 as getOptions2,
+  setOptions3,
+  useTableOptions,
+  calculateAverageColumnWidthInContainer,
+  adaptiveExpandColumnWidthInContainer
+};
+//# sourceMappingURL=chunk-JBL3S7LE.mjs.map
\ No newline at end of file
diff --git a/node_modules/@editablejs/plugin-table/dist/chunk-JBL3S7LE.mjs.map b/node_modules/@editablejs/plugin-table/dist/chunk-JBL3S7LE.mjs.map
new file mode 100644
index 0000000..50c8867
--- /dev/null
+++ b/node_modules/@editablejs/plugin-table/dist/chunk-JBL3S7LE.mjs.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../src/cell/options.ts","../src/row/options.ts","../src/table/options.ts","../src/table/utils.ts"],"sourcesContent":["import { Editor } from '@editablejs/models'\n\nexport const defaultTableMinColWidth = 35\n\nexport interface TableCellOptions {\n  minColWidth?: number,\n  getWidth?: (width: number) => number\n}\n\nconst TABLE_CELL_OPTIONS = new WeakMap<Editor, TableCellOptions>()\n\nexport const getOptions = (editor: Editor): Required<TableCellOptions> => {\n  const options = TABLE_CELL_OPTIONS.get(editor) ?? {}\n\n  if (!options.minColWidth) options.minColWidth = defaultTableMinColWidth\n\n  return options as Required<TableCellOptions>\n}\n\nexport const setOptions = (editor: Editor, { minColWidth }: TableCellOptions) => {\n  TABLE_CELL_OPTIONS.set(editor, { minColWidth })\n}\n","import { Editor } from '@editablejs/models'\n\nexport interface TableRowOptions {\n  minRowHeight?: number\n}\n\nexport const defaultTableMinRowHeight = 35\n\nconst TABLE_ROW_OPTIONS = new WeakMap<Editor, TableRowOptions>()\n\nexport const getOptions = (editor: Editor): Required<TableRowOptions> => {\n  const options = TABLE_ROW_OPTIONS.get(editor) ?? {}\n\n  if (!options.minRowHeight) options.minRowHeight = defaultTableMinRowHeight\n\n  return options as Required<TableRowOptions>\n}\n\nexport const setOptions = (editor: Editor, { minRowHeight }: TableRowOptions) => {\n  TABLE_ROW_OPTIONS.set(editor, { minRowHeight })\n}\n","import { Editor } from '@editablejs/models'\nimport * as React from 'react'\nimport { TableCellOptions } from '../cell'\nimport { setOptions as setCellOptions, getOptions as getCellOptions } from '../cell/options'\nimport { TableRowOptions } from '../row'\nimport { setOptions as setRowOptions, getOptions as getRowOptions } from '../row/options'\nimport { TableLocale } from '../locale'\n\nexport const TABLE_OPTIONS_WEAKMAP = new WeakMap<Editor, TableOptions>()\n\nexport interface TableOptions extends TableCellOptions, TableRowOptions {\n  locale?: Record<string, TableLocale>\n  shortcuts?: boolean\n}\n\nexport const getOptions = (editor: Editor): TableOptions => {\n  const options = TABLE_OPTIONS_WEAKMAP.get(editor) ?? {}\n  return {\n    ...options,\n    ...getCellOptions(editor),\n    ...getRowOptions(editor),\n  }\n}\n\nexport const setOptions = (editor: Editor, options: TableOptions) => {\n  setCellOptions(editor, options)\n  setRowOptions(editor, options)\n  TABLE_OPTIONS_WEAKMAP.set(editor, options)\n}\n\nexport const useTableOptions = (editor: Editor) => {\n  return React.useRef(getOptions(editor)).current\n}\n","import { Editable } from '@editablejs/editor'\nimport { Editor } from '@editablejs/models'\n\nexport interface CalculateAverageColumnWidthInContainerOptions {\n  cols: number\n  minWidth?: number\n  getWidth?: (width: number) => number\n}\n\nexport const calculateAverageColumnWidthInContainer = (\n  editor: Editor,\n  options: CalculateAverageColumnWidthInContainerOptions,\n): number[] => {\n  const { minWidth = 10, cols, getWidth } = options\n  const container = Editable.toDOMNode(editor, editor)\n  const rect = container.getBoundingClientRect()\n  const width = getWidth ? getWidth(rect.width) : 0\n  const colWidth = Math.max(minWidth, Math.floor(width / cols))\n\n  const tableColsWdith = []\n  let colsWidth = 0\n  for (let c = 0; c < cols; c++) {\n    const cws = colsWidth + colWidth\n    if (c === cols - 1 && cws < width) {\n      const cw = width - colsWidth\n      colsWidth += cw\n      tableColsWdith.push(cw)\n    } else {\n      colsWidth = cws\n      tableColsWdith.push(colWidth)\n    }\n  }\n  return tableColsWdith\n}\n\nexport const adaptiveExpandColumnWidthInContainer = (\n  editor: Editor,\n  colsWidth: number[],\n  minWidth = 5,\n): number[] => {\n  const container = Editable.toDOMNode(editor, editor)\n  const containerRect = container.getBoundingClientRect()\n  const { width: containerWidth } = containerRect\n  const widths = colsWidth.concat()\n  let gridWidth = widths.reduce((a, b) => a + b, 0)\n  while (gridWidth > containerWidth) {\n    let minCount = 0\n    for (let i = 0; i < widths.length; i++) {\n      const w = widths[i]\n      if (w > minWidth) {\n        widths[i] = w - 1\n        gridWidth--\n        if (gridWidth <= containerWidth) break\n      } else {\n        minCount++\n      }\n    }\n    if (minCount === widths.length) break\n  }\n  return widths\n}\n"],"mappings":";AAEO,IAAM,0BAA0B;AAOvC,IAAM,qBAAqB,oBAAI,QAAkC;AAE1D,IAAM,aAAa,CAAC,WAA+C;AACxE,QAAM,UAAU,mBAAmB,IAAI,MAAM,KAAK,CAAC;AAEnD,MAAI,CAAC,QAAQ;AAAa,YAAQ,cAAc;AAEhD,SAAO;AACT;AAEO,IAAM,aAAa,CAAC,QAAgB,EAAE,YAAY,MAAwB;AAC/E,qBAAmB,IAAI,QAAQ,EAAE,YAAY,CAAC;AAChD;;;ACfO,IAAM,2BAA2B;AAExC,IAAM,oBAAoB,oBAAI,QAAiC;AAExD,IAAMA,cAAa,CAAC,WAA8C;AACvE,QAAM,UAAU,kBAAkB,IAAI,MAAM,KAAK,CAAC;AAElD,MAAI,CAAC,QAAQ;AAAc,YAAQ,eAAe;AAElD,SAAO;AACT;AAEO,IAAMC,cAAa,CAAC,QAAgB,EAAE,aAAa,MAAuB;AAC/E,oBAAkB,IAAI,QAAQ,EAAE,aAAa,CAAC;AAChD;;;ACnBA,YAAY,WAAW;AAOhB,IAAM,wBAAwB,oBAAI,QAA8B;AAOhE,IAAMC,cAAa,CAAC,WAAiC;AAC1D,QAAM,UAAU,sBAAsB,IAAI,MAAM,KAAK,CAAC;AACtD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,GAAG,WAAe,MAAM;AAAA,IACxB,GAAGA,YAAc,MAAM;AAAA,EACzB;AACF;AAEO,IAAMC,cAAa,CAAC,QAAgB,YAA0B;AACnE,aAAe,QAAQ,OAAO;AAC9B,EAAAA,YAAc,QAAQ,OAAO;AAC7B,wBAAsB,IAAI,QAAQ,OAAO;AAC3C;AAEO,IAAM,kBAAkB,CAAC,WAAmB;AACjD,SAAa,aAAOD,YAAW,MAAM,CAAC,EAAE;AAC1C;;;AChCA,SAAS,gBAAgB;AASlB,IAAM,yCAAyC,CACpD,QACA,YACa;AACb,QAAM,EAAE,WAAW,IAAI,MAAM,SAAS,IAAI;AAC1C,QAAM,YAAY,SAAS,UAAU,QAAQ,MAAM;AACnD,QAAM,OAAO,UAAU,sBAAsB;AAC7C,QAAM,QAAQ,WAAW,SAAS,KAAK,KAAK,IAAI;AAChD,QAAM,WAAW,KAAK,IAAI,UAAU,KAAK,MAAM,QAAQ,IAAI,CAAC;AAE5D,QAAM,iBAAiB,CAAC;AACxB,MAAI,YAAY;AAChB,WAAS,IAAI,GAAG,IAAI,MAAM,KAAK;AAC7B,UAAM,MAAM,YAAY;AACxB,QAAI,MAAM,OAAO,KAAK,MAAM,OAAO;AACjC,YAAM,KAAK,QAAQ;AACnB,mBAAa;AACb,qBAAe,KAAK,EAAE;AAAA,IACxB,OAAO;AACL,kBAAY;AACZ,qBAAe,KAAK,QAAQ;AAAA,IAC9B;AAAA,EACF;AACA,SAAO;AACT;AAEO,IAAM,uCAAuC,CAClD,QACA,WACA,WAAW,MACE;AACb,QAAM,YAAY,SAAS,UAAU,QAAQ,MAAM;AACnD,QAAM,gBAAgB,UAAU,sBAAsB;AACtD,QAAM,EAAE,OAAO,eAAe,IAAI;AAClC,QAAM,SAAS,UAAU,OAAO;AAChC,MAAI,YAAY,OAAO,OAAO,CAAC,GAAG,MAAM,IAAI,GAAG,CAAC;AAChD,SAAO,YAAY,gBAAgB;AACjC,QAAI,WAAW;AACf,aAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,YAAM,IAAI,OAAO;AACjB,UAAI,IAAI,UAAU;AAChB,eAAO,KAAK,IAAI;AAChB;AACA,YAAI,aAAa;AAAgB;AAAA,MACnC,OAAO;AACL;AAAA,MACF;AAAA,IACF;AACA,QAAI,aAAa,OAAO;AAAQ;AAAA,EAClC;AACA,SAAO;AACT;","names":["getOptions","setOptions","getOptions","setOptions"]}
\ No newline at end of file
diff --git a/node_modules/@editablejs/plugin-table/dist/deserializer/html.js.map b/node_modules/@editablejs/plugin-table/dist/deserializer/html.js.map
index 8406bc9..e773f4d 100644
--- a/node_modules/@editablejs/plugin-table/dist/deserializer/html.js.map
+++ b/node_modules/@editablejs/plugin-table/dist/deserializer/html.js.map
@@ -1 +1 @@
-{"version":3,"sources":["../../src/deserializer/html.ts","../../src/table/deserializer/html.ts","../../src/cell/options.ts","../../src/table/constants.ts","../../src/table/options.ts","../../src/row/options.ts","../../src/table/utils.ts","../../src/row/deserializer/html.ts","../../src/row/constants.ts","../../src/cell/deserializer/html.ts","../../src/cell/constants.ts"],"sourcesContent":["export * from '../table/deserializer/html'\nexport * from '../row/deserializer/html'\nexport * from '../cell/deserializer/html'\n","import {\n  HTMLDeserializerOptions,\n  HTMLDeserializerWithTransform,\n} from '@editablejs/deserializer/html'\nimport { Editor, isDOMHTMLElement } from '@editablejs/models'\nimport { defaultTableMinColWidth } from '../../cell/options'\nimport { TableRow } from '../../row'\nimport { TABLE_KEY } from '../constants'\nimport { Table } from '../interfaces/table'\nimport { getOptions } from '../options'\nimport { calculateAverageColumnWidthInContainer } from '../utils'\n\nexport interface TableHTMLDeserializerOptions extends HTMLDeserializerOptions {\n  editor: Editor\n}\n\nexport const withTableHTMLDeserializerTransform: HTMLDeserializerWithTransform<\n  TableHTMLDeserializerOptions\n> = (next, serializer, { editor }) => {\n  return (node, options = {}) => {\n    const { text } = options\n    if (isDOMHTMLElement(node) && node.nodeName === 'TABLE') {\n      const children: TableRow[] = []\n      for (const child of node.childNodes) {\n        children.push(...(serializer.transform(child, { text, matchNewline: true }) as TableRow[]))\n      }\n      const { minColWidth = defaultTableMinColWidth } = getOptions(editor)\n      const colsWidth = Array.from(node.querySelectorAll('col')).map(c => {\n        const w = c.width || c.style.width\n        return Math.min(parseInt(w === '' ? '0' : w, 10), minColWidth)\n      })\n      const colCount = children[0].children.length\n      if (colsWidth.length === 0) {\n        colsWidth.push(\n          ...calculateAverageColumnWidthInContainer(editor, {\n            cols: colCount,\n            minWidth: minColWidth,\n            getWidth: width => width - 1,\n          }),\n        )\n      } else if (colsWidth.length < colCount) {\n        // TODO\n      } else if (colsWidth.length > colCount) {\n        // TODO\n      }\n\n      const table: Table = {\n        type: TABLE_KEY,\n        colsWidth,\n        children,\n      }\n      return [table]\n    }\n    return next(node, options)\n  }\n}\n","import { Editor } from '@editablejs/models'\n\nexport const defaultTableMinColWidth = 35\n\nexport interface TableCellOptions {\n  minColWidth?: number\n}\n\nconst TABLE_CELL_OPTIONS = new WeakMap<Editor, TableCellOptions>()\n\nexport const getOptions = (editor: Editor): Required<TableCellOptions> => {\n  const options = TABLE_CELL_OPTIONS.get(editor) ?? {}\n\n  if (!options.minColWidth) options.minColWidth = defaultTableMinColWidth\n\n  return options as Required<TableCellOptions>\n}\n\nexport const setOptions = (editor: Editor, { minColWidth }: TableCellOptions) => {\n  TABLE_CELL_OPTIONS.set(editor, { minColWidth })\n}\n","export const TABLE_KEY = 'table'\n","import { Editor } from '@editablejs/models'\nimport * as React from 'react'\nimport { TableCellOptions } from '../cell'\nimport { setOptions as setCellOptions, getOptions as getCellOptions } from '../cell/options'\nimport { TableRowOptions } from '../row'\nimport { setOptions as setRowOptions, getOptions as getRowOptions } from '../row/options'\nimport { TableLocale } from '../locale'\n\nexport const TABLE_OPTIONS_WEAKMAP = new WeakMap<Editor, TableOptions>()\n\nexport interface TableOptions extends TableCellOptions, TableRowOptions {\n  locale?: Record<string, TableLocale>\n  shortcuts?: boolean\n}\n\nexport const getOptions = (editor: Editor): TableOptions => {\n  const options = TABLE_OPTIONS_WEAKMAP.get(editor) ?? {}\n  return {\n    ...options,\n    ...getCellOptions(editor),\n    ...getRowOptions(editor),\n  }\n}\n\nexport const setOptions = (editor: Editor, options: TableOptions) => {\n  setCellOptions(editor, options)\n  setRowOptions(editor, options)\n  TABLE_OPTIONS_WEAKMAP.set(editor, options)\n}\n\nexport const useTableOptions = (editor: Editor) => {\n  return React.useRef(getOptions(editor)).current\n}\n","import { Editor } from '@editablejs/models'\n\nexport interface TableRowOptions {\n  minRowHeight?: number\n}\n\nexport const defaultTableMinRowHeight = 35\n\nconst TABLE_ROW_OPTIONS = new WeakMap<Editor, TableRowOptions>()\n\nexport const getOptions = (editor: Editor): Required<TableRowOptions> => {\n  const options = TABLE_ROW_OPTIONS.get(editor) ?? {}\n\n  if (!options.minRowHeight) options.minRowHeight = defaultTableMinRowHeight\n\n  return options as Required<TableRowOptions>\n}\n\nexport const setOptions = (editor: Editor, { minRowHeight }: TableRowOptions) => {\n  TABLE_ROW_OPTIONS.set(editor, { minRowHeight })\n}\n","import { Editable } from '@editablejs/editor'\nimport { Editor } from '@editablejs/models'\n\nexport interface CalculateAverageColumnWidthInContainerOptions {\n  cols: number\n  minWidth?: number\n  getWidth?: (width: number) => number\n}\n\nexport const calculateAverageColumnWidthInContainer = (\n  editor: Editor,\n  options: CalculateAverageColumnWidthInContainerOptions,\n): number[] => {\n  const { minWidth = 10, cols, getWidth } = options\n  const container = Editable.toDOMNode(editor, editor)\n  const rect = container.getBoundingClientRect()\n  const width = getWidth ? getWidth(rect.width) : 0\n  const colWidth = Math.max(minWidth, Math.floor(width / cols))\n\n  const tableColsWdith = []\n  let colsWidth = 0\n  for (let c = 0; c < cols; c++) {\n    const cws = colsWidth + colWidth\n    if (c === cols - 1 && cws < width) {\n      const cw = width - colsWidth\n      colsWidth += cw\n      tableColsWdith.push(cw)\n    } else {\n      colsWidth = cws\n      tableColsWdith.push(colWidth)\n    }\n  }\n  return tableColsWdith\n}\n\nexport const adaptiveExpandColumnWidthInContainer = (\n  editor: Editor,\n  colsWidth: number[],\n  minWidth = 5,\n): number[] => {\n  const container = Editable.toDOMNode(editor, editor)\n  const containerRect = container.getBoundingClientRect()\n  const { width: containerWidth } = containerRect\n  const widths = colsWidth.concat()\n  let gridWidth = widths.reduce((a, b) => a + b, 0)\n  while (gridWidth > containerWidth) {\n    let minCount = 0\n    for (let i = 0; i < widths.length; i++) {\n      const w = widths[i]\n      if (w > minWidth) {\n        widths[i] = w - 1\n        gridWidth--\n        if (gridWidth <= containerWidth) break\n      } else {\n        minCount++\n      }\n    }\n    if (minCount === widths.length) break\n  }\n  return widths\n}\n","import {\n  HTMLDeserializerOptions,\n  HTMLDeserializerWithTransform,\n} from '@editablejs/deserializer/html'\nimport { Editor, isDOMHTMLElement } from '@editablejs/models'\nimport { TableCell } from '../../cell'\nimport { TABLE_ROW_KEY } from '../constants'\nimport { getOptions } from '../options'\nimport { TableRow } from '../interfaces/table-row'\n\nexport interface TableRowHTMLDeserializerOptions extends HTMLDeserializerOptions {\n  editor: Editor\n}\n\nexport const withTableRowHTMLDeserializerTransform: HTMLDeserializerWithTransform<\n  TableRowHTMLDeserializerOptions\n> = (next, serializer, { editor }) => {\n  return (node, options = {}) => {\n    const { text } = options\n    if (isDOMHTMLElement(node) && ['TR', 'TH'].includes(node.tagName)) {\n      const options = getOptions(editor)\n      const h = (node as HTMLElement).style.height\n      const height = parseInt(!h ? '0' : h, 10)\n\n      const children: TableCell[] = []\n      for (const child of node.childNodes) {\n        children.push(...(serializer.transform(child, { text, matchNewline: true }) as any))\n      }\n\n      const row: TableRow = {\n        type: TABLE_ROW_KEY,\n        height: Math.max(height, options.minRowHeight),\n        children,\n      }\n      return [row]\n    }\n    return next(node, options)\n  }\n}\n","export const TABLE_ROW_KEY = 'table-row'\n","import { HTMLDeserializerWithTransform } from '@editablejs/deserializer/html'\nimport { Descendant, isDOMHTMLElement } from '@editablejs/models'\nimport { TABLE_CELL_KEY } from '../constants'\nimport { TableCell } from '../interfaces/table-cell'\n\nexport const withTableCellHTMLDeserializerTransform: HTMLDeserializerWithTransform = (\n  next,\n  serializer,\n) => {\n  return (node, options = {}) => {\n    const { text } = options\n    if (isDOMHTMLElement(node) && node.nodeName === 'TD') {\n      const children: Descendant[] = []\n      for (const child of node.childNodes) {\n        const content = serializer.transform(child, {\n          text,\n          matchNewline: true,\n        })\n        children.push(...content)\n      }\n      if (children.length === 0) {\n        children.push({ children: [{ text: '' }] })\n      }\n      const { colSpan, rowSpan } = node as HTMLTableCellElement\n      const cell: TableCell = {\n        type: TABLE_CELL_KEY,\n        children,\n        colspan: colSpan,\n        rowspan: rowSpan,\n      }\n      return [cell]\n    }\n    return next(node, options)\n  }\n}\n","export const TABLE_CELL_KEY = 'table-cell'\n"],"mappings":"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","names":["getOptions","getOptions","getOptions","import_models","options","getOptions","import_models"]}
\ No newline at end of file
+{"version":3,"sources":["../../src/deserializer/html.ts","../../src/table/deserializer/html.ts","../../src/cell/options.ts","../../src/table/constants.ts","../../src/table/options.ts","../../src/row/options.ts","../../src/table/utils.ts","../../src/row/deserializer/html.ts","../../src/row/constants.ts","../../src/cell/deserializer/html.ts","../../src/cell/constants.ts"],"sourcesContent":["export * from '../table/deserializer/html'\nexport * from '../row/deserializer/html'\nexport * from '../cell/deserializer/html'\n","import {\n  HTMLDeserializerOptions,\n  HTMLDeserializerWithTransform,\n} from '@editablejs/deserializer/html'\nimport { Editor, isDOMHTMLElement } from '@editablejs/models'\nimport { defaultTableMinColWidth } from '../../cell/options'\nimport { TableRow } from '../../row'\nimport { TABLE_KEY } from '../constants'\nimport { Table } from '../interfaces/table'\nimport { getOptions } from '../options'\nimport { calculateAverageColumnWidthInContainer } from '../utils'\n\nexport interface TableHTMLDeserializerOptions extends HTMLDeserializerOptions {\n  editor: Editor\n}\n\nexport const withTableHTMLDeserializerTransform: HTMLDeserializerWithTransform<\n  TableHTMLDeserializerOptions\n> = (next, serializer, { editor }) => {\n  return (node, options = {}) => {\n    const { text } = options\n    if (isDOMHTMLElement(node) && node.nodeName === 'TABLE') {\n      const children: TableRow[] = []\n      for (const child of node.childNodes) {\n        children.push(...(serializer.transform(child, { text, matchNewline: true }) as TableRow[]))\n      }\n      const { minColWidth = defaultTableMinColWidth } = getOptions(editor)\n      const colsWidth = Array.from(node.querySelectorAll('col')).map(c => {\n        const w = c.width || c.style.width\n        return Math.min(parseInt(w === '' ? '0' : w, 10), minColWidth)\n      })\n      const colCount = children[0].children.length\n      if (colsWidth.length === 0) {\n        colsWidth.push(\n          ...calculateAverageColumnWidthInContainer(editor, {\n            cols: colCount,\n            minWidth: minColWidth,\n            getWidth: width => width - 1,\n          }),\n        )\n      } else if (colsWidth.length < colCount) {\n        // TODO\n      } else if (colsWidth.length > colCount) {\n        // TODO\n      }\n\n      const table: Table = {\n        type: TABLE_KEY,\n        colsWidth,\n        children,\n      }\n      return [table]\n    }\n    return next(node, options)\n  }\n}\n","import { Editor } from '@editablejs/models'\n\nexport const defaultTableMinColWidth = 35\n\nexport interface TableCellOptions {\n  minColWidth?: number,\n  getWidth?: (width: number) => number\n}\n\nconst TABLE_CELL_OPTIONS = new WeakMap<Editor, TableCellOptions>()\n\nexport const getOptions = (editor: Editor): Required<TableCellOptions> => {\n  const options = TABLE_CELL_OPTIONS.get(editor) ?? {}\n\n  if (!options.minColWidth) options.minColWidth = defaultTableMinColWidth\n\n  return options as Required<TableCellOptions>\n}\n\nexport const setOptions = (editor: Editor, { minColWidth }: TableCellOptions) => {\n  TABLE_CELL_OPTIONS.set(editor, { minColWidth })\n}\n","export const TABLE_KEY = 'table'\n","import { Editor } from '@editablejs/models'\nimport * as React from 'react'\nimport { TableCellOptions } from '../cell'\nimport { setOptions as setCellOptions, getOptions as getCellOptions } from '../cell/options'\nimport { TableRowOptions } from '../row'\nimport { setOptions as setRowOptions, getOptions as getRowOptions } from '../row/options'\nimport { TableLocale } from '../locale'\n\nexport const TABLE_OPTIONS_WEAKMAP = new WeakMap<Editor, TableOptions>()\n\nexport interface TableOptions extends TableCellOptions, TableRowOptions {\n  locale?: Record<string, TableLocale>\n  shortcuts?: boolean\n}\n\nexport const getOptions = (editor: Editor): TableOptions => {\n  const options = TABLE_OPTIONS_WEAKMAP.get(editor) ?? {}\n  return {\n    ...options,\n    ...getCellOptions(editor),\n    ...getRowOptions(editor),\n  }\n}\n\nexport const setOptions = (editor: Editor, options: TableOptions) => {\n  setCellOptions(editor, options)\n  setRowOptions(editor, options)\n  TABLE_OPTIONS_WEAKMAP.set(editor, options)\n}\n\nexport const useTableOptions = (editor: Editor) => {\n  return React.useRef(getOptions(editor)).current\n}\n","import { Editor } from '@editablejs/models'\n\nexport interface TableRowOptions {\n  minRowHeight?: number\n}\n\nexport const defaultTableMinRowHeight = 35\n\nconst TABLE_ROW_OPTIONS = new WeakMap<Editor, TableRowOptions>()\n\nexport const getOptions = (editor: Editor): Required<TableRowOptions> => {\n  const options = TABLE_ROW_OPTIONS.get(editor) ?? {}\n\n  if (!options.minRowHeight) options.minRowHeight = defaultTableMinRowHeight\n\n  return options as Required<TableRowOptions>\n}\n\nexport const setOptions = (editor: Editor, { minRowHeight }: TableRowOptions) => {\n  TABLE_ROW_OPTIONS.set(editor, { minRowHeight })\n}\n","import { Editable } from '@editablejs/editor'\nimport { Editor } from '@editablejs/models'\n\nexport interface CalculateAverageColumnWidthInContainerOptions {\n  cols: number\n  minWidth?: number\n  getWidth?: (width: number) => number\n}\n\nexport const calculateAverageColumnWidthInContainer = (\n  editor: Editor,\n  options: CalculateAverageColumnWidthInContainerOptions,\n): number[] => {\n  const { minWidth = 10, cols, getWidth } = options\n  const container = Editable.toDOMNode(editor, editor)\n  const rect = container.getBoundingClientRect()\n  const width = getWidth ? getWidth(rect.width) : 0\n  const colWidth = Math.max(minWidth, Math.floor(width / cols))\n\n  const tableColsWdith = []\n  let colsWidth = 0\n  for (let c = 0; c < cols; c++) {\n    const cws = colsWidth + colWidth\n    if (c === cols - 1 && cws < width) {\n      const cw = width - colsWidth\n      colsWidth += cw\n      tableColsWdith.push(cw)\n    } else {\n      colsWidth = cws\n      tableColsWdith.push(colWidth)\n    }\n  }\n  return tableColsWdith\n}\n\nexport const adaptiveExpandColumnWidthInContainer = (\n  editor: Editor,\n  colsWidth: number[],\n  minWidth = 5,\n): number[] => {\n  const container = Editable.toDOMNode(editor, editor)\n  const containerRect = container.getBoundingClientRect()\n  const { width: containerWidth } = containerRect\n  const widths = colsWidth.concat()\n  let gridWidth = widths.reduce((a, b) => a + b, 0)\n  while (gridWidth > containerWidth) {\n    let minCount = 0\n    for (let i = 0; i < widths.length; i++) {\n      const w = widths[i]\n      if (w > minWidth) {\n        widths[i] = w - 1\n        gridWidth--\n        if (gridWidth <= containerWidth) break\n      } else {\n        minCount++\n      }\n    }\n    if (minCount === widths.length) break\n  }\n  return widths\n}\n","import {\n  HTMLDeserializerOptions,\n  HTMLDeserializerWithTransform,\n} from '@editablejs/deserializer/html'\nimport { Editor, isDOMHTMLElement } from '@editablejs/models'\nimport { TableCell } from '../../cell'\nimport { TABLE_ROW_KEY } from '../constants'\nimport { getOptions } from '../options'\nimport { TableRow } from '../interfaces/table-row'\n\nexport interface TableRowHTMLDeserializerOptions extends HTMLDeserializerOptions {\n  editor: Editor\n}\n\nexport const withTableRowHTMLDeserializerTransform: HTMLDeserializerWithTransform<\n  TableRowHTMLDeserializerOptions\n> = (next, serializer, { editor }) => {\n  return (node, options = {}) => {\n    const { text } = options\n    if (isDOMHTMLElement(node) && ['TR', 'TH'].includes(node.tagName)) {\n      const options = getOptions(editor)\n      const h = (node as HTMLElement).style.height\n      const height = parseInt(!h ? '0' : h, 10)\n\n      const children: TableCell[] = []\n      for (const child of node.childNodes) {\n        children.push(...(serializer.transform(child, { text, matchNewline: true }) as any))\n      }\n\n      const row: TableRow = {\n        type: TABLE_ROW_KEY,\n        height: Math.max(height, options.minRowHeight),\n        children,\n      }\n      return [row]\n    }\n    return next(node, options)\n  }\n}\n","export const TABLE_ROW_KEY = 'table-row'\n","import { HTMLDeserializerWithTransform } from '@editablejs/deserializer/html'\nimport { Descendant, isDOMHTMLElement } from '@editablejs/models'\nimport { TABLE_CELL_KEY } from '../constants'\nimport { TableCell } from '../interfaces/table-cell'\n\nexport const withTableCellHTMLDeserializerTransform: HTMLDeserializerWithTransform = (\n  next,\n  serializer,\n) => {\n  return (node, options = {}) => {\n    const { text } = options\n    if (isDOMHTMLElement(node) && node.nodeName === 'TD') {\n      const children: Descendant[] = []\n      for (const child of node.childNodes) {\n        const content = serializer.transform(child, {\n          text,\n          matchNewline: true,\n        })\n        children.push(...content)\n      }\n      if (children.length === 0) {\n        children.push({ children: [{ text: '' }] })\n      }\n      const { colSpan, rowSpan } = node as HTMLTableCellElement\n      const cell: TableCell = {\n        type: TABLE_CELL_KEY,\n        children,\n        colspan: colSpan,\n        rowspan: rowSpan,\n      }\n      return [cell]\n    }\n    return next(node, options)\n  }\n}\n","export const TABLE_CELL_KEY = 'table-cell'\n"],"mappings":"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","names":["getOptions","getOptions","getOptions","import_models","options","getOptions","import_models"]}
\ No newline at end of file
diff --git a/node_modules/@editablejs/plugin-table/dist/deserializer/html.mjs b/node_modules/@editablejs/plugin-table/dist/deserializer/html.mjs
index bced9dc..0b25fb4 100644
--- a/node_modules/@editablejs/plugin-table/dist/deserializer/html.mjs
+++ b/node_modules/@editablejs/plugin-table/dist/deserializer/html.mjs
@@ -3,7 +3,7 @@ import {
   defaultTableMinColWidth,
   getOptions,
   getOptions2
-} from "../chunk-DZEM4J5M.mjs";
+} from "../chunk-JBL3S7LE.mjs";
 import {
   TABLE_CELL_KEY,
   TABLE_ROW_KEY
diff --git a/node_modules/@editablejs/plugin-table/dist/index.d.ts b/node_modules/@editablejs/plugin-table/dist/index.d.ts
index 30a91ad..32bbcfd 100644
--- a/node_modules/@editablejs/plugin-table/dist/index.d.ts
+++ b/node_modules/@editablejs/plugin-table/dist/index.d.ts
@@ -13,6 +13,7 @@ interface TableLocale extends Locale {
 
 interface TableCellOptions {
     minColWidth?: number;
+    getWidth?: (width: number) => number;
 }
 
 declare const TABLE_CELL_KEY = "table-cell";
diff --git a/node_modules/@editablejs/plugin-table/dist/index.js b/node_modules/@editablejs/plugin-table/dist/index.js
index 2d372c4..63eef5b 100644
--- a/node_modules/@editablejs/plugin-table/dist/index.js
+++ b/node_modules/@editablejs/plugin-table/dist/index.js
@@ -95,12 +95,6 @@ var TableStyles = _styled.div.withConfig({
 }) => [{
   "position": "relative"
 }, import_styled_components.css`
-      --table-padding-top: 14px;
-      --table-border-color: #d6d6d6;
-      --table-split-bg: ${"#4096ff"};
-      --table-item-bg: #f2f3f5;
-      --table-item-hover-bg: #e2e4e6;
-      --table-item-wh: 8px;
       padding: var(--table-padding-top) 0 10px;
       > table {
         ${{
@@ -728,13 +722,18 @@ var TableEditor = {
   getOptions: getOptions3,
   create: (editor, options = {}) => {
     const { rows = 3, cols = 3 } = options;
-    const { minRowHeight = defaultTableMinRowHeight, minColWidth = defaultTableMinRowHeight } = getOptions3(editor);
+    const { minRowHeight = defaultTableMinRowHeight, minColWidth = defaultTableMinRowHeight, getWidth } = getOptions3(editor);
     const rowHeight = minRowHeight;
     const tableRows = [];
     const tableColsWdith = calculateAverageColumnWidthInContainer(editor, {
       cols,
       minWidth: minColWidth,
-      getWidth: (width) => width - 1
+      getWidth: (width) => {
+        if (getWidth) {
+          return getWidth(width);
+        }
+        return width - 1;
+      }
     });
     for (let r = 0; r < rows; r++) {
       tableRows.push(
diff --git a/node_modules/@editablejs/plugin-table/dist/index.js.map b/node_modules/@editablejs/plugin-table/dist/index.js.map
index 257d1d3..fde6359 100644
--- a/node_modules/@editablejs/plugin-table/dist/index.js.map
+++ b/node_modules/@editablejs/plugin-table/dist/index.js.map
@@ -1 +1 @@
-{"version":3,"sources":["../src/index.tsx","../src/table/interfaces/table.ts","../src/table/constants.ts","../src/table/plugin/with-table.tsx","../src/cell/interfaces/table-cell.ts","../src/cell/constants.ts","../src/cell/options.ts","../src/components/styles.tsx","../src/cell/plugin/table-cell-editor.ts","../src/cell/plugin/with-table-cell.tsx","../src/locale/zh_CN.ts","../src/locale/en_US.ts","../src/locale/index.ts","../src/table/options.ts","../src/row/options.ts","../src/row/interfaces/table-row.ts","../src/row/constants.ts","../src/row/plugin/with-table-row.tsx","../src/context.ts","../src/row/plugin/table-row-editor.ts","../src/row/store.ts","../src/table/plugin/table-editor.ts","../src/table/utils.ts","../src/components/table.tsx","../src/components/dragging.tsx","../src/hooks/use-drag.ts","../src/components/header.tsx","../src/components/action.tsx","../src/components/selection.tsx","../src/table/plugin/with-shortcuts.ts"],"sourcesContent":["export type { TableLocale } from './locale'\nexport * from './table'\n","import { Grid, Element } from '@editablejs/models'\nimport { TABLE_KEY } from '../constants'\nimport { TableRow } from '../../row'\n\nexport interface Table extends Grid {\n  type: typeof TABLE_KEY\n  children: TableRow[]\n}\n\nexport const Table = {\n  isTable: (value: any): value is Table => {\n    return Element.isElement(value) && value.type === TABLE_KEY\n  },\n}\n","export const TABLE_KEY = 'table'\n","import { Editable, RenderElementProps, Locale } from '@editablejs/editor'\nimport { Transforms, Node, Grid } from '@editablejs/models'\nimport { withTableCell } from '../../cell'\nimport locale from '../../locale'\nimport { setOptions, TableOptions } from '../options'\nimport { withTableRow } from '../../row'\nimport { TableEditor } from './table-editor'\nimport { Table } from '../interfaces/table'\nimport { TableComponent } from '../../components/table'\nimport { withShortcuts } from './with-shortcuts'\n\nexport const withTable = <T extends Editable>(editor: T, options: TableOptions = {}) => {\n  let newEditor = editor as T & TableEditor\n\n  setOptions(newEditor, options)\n\n  const { locale: localeOptions = {} } = options\n  Locale.setLocale(newEditor, locale, localeOptions)\n\n  newEditor = withTableCell(newEditor)\n  newEditor = withTableRow(newEditor)\n\n  const { isGrid } = editor\n\n  newEditor.isGrid = (node: Node): node is Table => {\n    return TableEditor.isTable(newEditor, node) || isGrid(node)\n  }\n\n  newEditor.insertTable = options => {\n    const table = Table.isTable(options) ? options : TableEditor.create(newEditor, options)\n    Transforms.insertNodes(newEditor, table)\n    Grid.focus(newEditor, {\n      point: [0, 0],\n    })\n  }\n\n  const { renderElement } = newEditor\n\n  newEditor.renderElement = props => {\n    if (TableEditor.isTable(newEditor, props.element)) {\n      return <TableComponent editor={newEditor} {...(props as RenderElementProps<Table>)} />\n    }\n    return renderElement(props)\n  }\n\n  const { shortcuts } = options\n  if (shortcuts !== false) {\n    withShortcuts(newEditor)\n  }\n  return newEditor\n}\n","import { GridCell, Element } from '@editablejs/models'\nimport { TABLE_CELL_KEY } from '../constants'\n\nexport interface TableCell extends GridCell {\n  type: typeof TABLE_CELL_KEY\n}\n\nexport const TableCell = {\n  create: (cell: Partial<Omit<TableCell, 'type'>> = {}): TableCell => {\n    return GridCell.create<TableCell>({\n      ...cell,\n      type: TABLE_CELL_KEY,\n    })\n  },\n\n  isTableCell: (value: any): value is TableCell => {\n    return Element.isElement(value) && value.type === TABLE_CELL_KEY\n  },\n}\n","export const TABLE_CELL_KEY = 'table-cell'\n","import { Editor } from '@editablejs/models'\n\nexport const defaultTableMinColWidth = 35\n\nexport interface TableCellOptions {\n  minColWidth?: number\n}\n\nconst TABLE_CELL_OPTIONS = new WeakMap<Editor, TableCellOptions>()\n\nexport const getOptions = (editor: Editor): Required<TableCellOptions> => {\n  const options = TABLE_CELL_OPTIONS.get(editor) ?? {}\n\n  if (!options.minColWidth) options.minColWidth = defaultTableMinColWidth\n\n  return options as Required<TableCellOptions>\n}\n\nexport const setOptions = (editor: Editor, { minColWidth }: TableCellOptions) => {\n  TABLE_CELL_OPTIONS.set(editor, { minColWidth })\n}\n","import { css as _css } from \"styled-components\";\nimport _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport { Icon } from '@editablejs/ui';\nexport const TableStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-0\"\n})(({\n  isHover,\n  isSelected,\n  isDragging\n}) => [{\n  \"position\": \"relative\"\n}, _css`\n      --table-padding-top: 14px;\n      --table-border-color: #d6d6d6;\n      --table-split-bg: ${\"#4096ff\"};\n      --table-item-bg: #f2f3f5;\n      --table-item-hover-bg: #e2e4e6;\n      --table-item-wh: 8px;\n      padding: var(--table-padding-top) 0 10px;\n      > table {\n        ${{\n  \"width\": \"100%\",\n  \"tableLayout\": \"fixed\",\n  \"borderCollapse\": \"collapse\",\n  \"whiteSpace\": \"pre-wrap\"\n}}\n\n        tr,\n        td {\n          ${{\n  \"margin\": \"0px\",\n  \"padding\": \"0px\"\n}};\n        }\n      }\n    `, isDragging && {\n  \"cursor\": \"default\"\n}, (isHover || isSelected) && _css`\n        ${ColsHeaderStyles} {\n          display: flex;\n        }\n      `, (isHover || isSelected) && _css`\n        ${AllHeaderStyles},${RowsHeaderStyles} {\n          display: flex;\n        }\n      `]);\nexport const CellStyles = _styled.td.withConfig({\n  componentId: \"sc-1yra71v-1\"\n})(() => [_css`\n    border: 1px solid var(--table-border-color);\n    vertical-align: top;\n  `]);\nexport const CellInnerStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-2\"\n})(() => [_css`\n    padding: 6px;\n  `]);\nexport const RowStyles = _styled.tr.withConfig({\n  componentId: \"sc-1yra71v-3\"\n})(() => []);\nexport const SelectionStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-4\"\n})([\"background-color:rgba(0,106,254,0.12);position:absolute;background-color:rgba(0,106,254,0.12);pointer-events:none;cursor:default;\"]);\nexport const ColsHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-5\"\n})(() => [_css`\n    position: absolute;\n    left: 0;\n    top: calc(var(--table-item-wh) - 2px);\n    display: none;\n    border-left: none;\n  `]);\nexport const HeaderDragStyles = _styled(Icon).withConfig({\n  componentId: \"sc-1yra71v-6\"\n})([\"position:absolute;font-size:8px;color:#fff;display:none;\"]);\nexport const ColsHeaderItemStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-7\"\n})(({\n  isHover,\n  isFull,\n  allFull\n}) => [_css`\n      height: var(--table-item-wh);\n      background: var(--table-item-bg);\n      cursor: pointer;\n      border-bottom: 1px solid var(--table-border-color);\n      position: absolute;\n\n      &:hover {\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      }\n    `, isHover && _css`\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      `, isFull && _css`\n        background: var(--table-split-bg);\n        z-index: 3;\n\n        &:hover {\n          background: var(--table-split-bg);\n        }\n      `, isFull && !allFull && _css`\n        cursor: move;\n      `, isFull && !allFull && `${HeaderDragStyles} {\n      display: flex;\n      left: calc(50% - 8px);\n      transform: rotate(90deg);\n    }`]);\nexport const RowsHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-8\"\n})(() => [_css`\n    display: none;\n    position: absolute;\n    top: var(--table-padding-top);\n    left: calc(0px - var(--table-item-wh));\n  `]);\nexport const RowsHeaderItemStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-9\"\n})(({\n  isHover,\n  isFull,\n  allFull\n}) => [_css`\n      width: var(--table-item-wh);\n      background: var(--table-item-bg);\n      cursor: pointer;\n      border-right: 1px solid var(--table-border-color);\n      position: absolute;\n\n      &:hover {\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      }\n    `, isHover && _css`\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      `, isFull && _css`\n        background: var(--table-split-bg);\n        z-index: 3;\n\n        &:hover {\n          background: var(--table-split-bg);\n        }\n      `, isFull && !allFull && _css`\n        cursor: move;\n      `, isFull && !allFull && `${HeaderDragStyles} {\n      display: flex;\n      top: calc(50% - 4px);\n    }`]);\nexport const AllHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-10\"\n})(({\n  allFull\n}) => [_css`\n    position: absolute;\n    top: calc(var(--table-item-wh) - 2px);\n    left: calc(0px - var(--table-item-wh));\n    width: var(--table-item-wh);\n    height: var(--table-item-wh);\n    cursor: pointer;\n    border-right: 1px solid var(--table-border-color);\n    border-bottom: 1px solid var(--table-border-color);\n    background: var(--table-item-bg);\n    border-top-left-radius: 2px;\n    display: none;\n    &:hover {\n      background: var(--table-item-hover-bg);\n    }\n  `, allFull && _css`\n      background-color: var(--table-split-bg);\n      border-color: var(--table-split-bg);\n      border: none;\n\n      &:hover {\n        background-color: var(--table-split-bg);\n      }\n    `]);\nexport const ColsInsertStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-11\"\n})(({\n  isActive\n}) => [_css`\n    position: absolute;\n    top: calc(0px - var(--table-item-wh) + 2px);\n    line-height: 0;\n    cursor: pointer;\n    z-index: ${isActive ? 3 : 'unset'};\n    &:hover {\n      z-index: 3;\n\n      ${ColsInsertPlusStyles},${ColsInsertLineStyles} {\n        display: flex;\n      }\n    }\n  `, isActive && {\n  \"pointerEvents\": \"none\"\n}]);\nexport const ColsInsertPlusStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-12\"\n})(() => [_css`\n    color: var(--table-split-bg);\n    display: none;\n    font-size: 18px;\n    position: absolute;\n    top: -13px;\n    left: -7.5px;\n    align-items: flex-end;\n    justify-content: center;\n  `]);\nexport const ColsInsertLineStyles = _styled(ColsInsertPlusStyles).withConfig({\n  componentId: \"sc-1yra71v-13\"\n})([\"top:3px;left:0.5px;width:2px;background-color:var(--table-split-bg);\", \"\"], ({\n  isActive\n}) => isActive ? 'display: flex; z-index: 3; pointer-events: none;' : '');\nexport const ColsInsertIconStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-14\"\n})(() => [_css`\n    display: flex;\n    width: 6px;\n    height: 6px;\n    position: absolute;\n    top: 0;\n    left: -1.5px;\n    justify-content: center;\n  `]);\nexport const RowsInsertStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-15\"\n})(({\n  isActive\n}) => [_css`\n    position: absolute;\n    left: calc(0px - var(--table-item-wh) + 2px);\n    line-height: 0;\n    cursor: pointer;\n    z-index: ${isActive ? 3 : 'unset'};\n\n    &:hover {\n      z-index: 3;\n\n      ${RowsInsertPlusStyles},${RowsInsertLineStyles} {\n        display: flex;\n      }\n    }\n  `]);\nexport const RowsInsertIconStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-16\"\n})(() => [_css`\n    display: flex;\n    width: 6px;\n    height: 6px;\n    position: absolute;\n    top: 0;\n    left: 0;\n    justify-content: flex-start;\n  `]);\nexport const RowsInsertPlusStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-17\"\n})(() => [_css`\n    color: var(--table-split-bg);\n    display: none;\n    font-size: 18px;\n    position: absolute;\n    top: -7.5px;\n    left: -13px;\n    align-items: flex-end;\n    justify-content: flex-start;\n  `]);\nexport const RowsInsertLineStyles = _styled(ColsInsertPlusStyles).withConfig({\n  componentId: \"sc-1yra71v-18\"\n})([\"top:0.5px;left:3px;height:2px;background-color:var(--table-split-bg);\", \"\"], ({\n  isActive\n}) => isActive ? 'display: flex; z-index: 3; pointer-events: none;' : '');\nexport const ColsSplitStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-19\"\n})(({\n  isHover\n}) => [_css`\n    position: absolute;\n    top: 0;\n    height: var(--table-item-wh) + 2px;\n    padding: 0 1px;\n    z-index: 1;\n  `, isHover && {\n  \"zIndex\": \"3\",\n  \"cursor\": \"col-resize\"\n}]);\nexport const ColsSplitLineStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-20\"\n})(({\n  isHover\n}) => [_css`\n    background-color: transparent;\n    width: 1px;\n    height: 100%;\n  `, isHover && _css`\n      background-color: var(--table-split-bg);\n    `]);\nexport const RowsSplitStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-21\"\n})(({\n  isHover\n}) => [_css`\n    position: absolute;\n    left: 0;\n    width: calc(var(--table-item-bg) + 2px);\n    padding: 1px 0;\n    z-index: 1;\n  `, isHover && {\n  \"zIndex\": \"3\",\n  \"cursor\": \"row-resize\"\n}]);\nexport const RowsSplitLineStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-22\"\n})(({\n  isHover\n}) => [_css`\n    background-color: transparent;\n    width: 100%;\n    height: 1px;\n  `, isHover && _css`\n      background-color: var(--table-split-bg);\n    `]);","import { Editable } from '@editablejs/editor'\nimport { Editor, DOMNode, isDOMElement } from '@editablejs/models'\nimport { TABLE_CELL_KEY } from '../constants'\nimport { TableCell } from '../interfaces/table-cell'\n\nexport interface TableCellEditor extends Editor {}\n\nexport const TableCellEditor = {\n  isTableCell: (editor: Editor, value: any): value is TableCell => {\n    return TableCell.isTableCell(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_CELL_KEY] ?? []\n    return elements.some(e => TableCellEditor.isTableCell(editor, e[0]))\n  },\n\n  create: (editor: Editor, cell: Partial<Omit<TableCell, 'type'>> = {}): TableCell => {\n    return TableCell.create(cell)\n  },\n\n  closest: (editor: Editor, node: DOMNode): TableCell | null => {\n    const el = isDOMElement(node) ? node : node.parentElement\n    if (!el) return null\n    const tdEl = el.closest('td')\n    if (!tdEl) return null\n    const slateNode = Editable.toEditorNode(editor, tdEl)\n    if (TableCellEditor.isTableCell(editor, slateNode)) return slateNode\n    return null\n  },\n}\n","import { Editable } from '@editablejs/editor'\nimport { GridCell, Node } from '@editablejs/models'\nimport { setOptions, TableCellOptions } from '../options'\nimport { CellInnerStyles, CellStyles } from '../../components/styles'\nimport { TableCellEditor } from './table-cell-editor'\n\nexport const withTableCell = <T extends Editable>(editor: T, options: TableCellOptions = {}) => {\n  const newEditor = editor as T & TableCellEditor\n  const { renderElement, isGridCell } = editor\n\n  setOptions(editor, options)\n\n  newEditor.isGridCell = (node: Node): node is GridCell => {\n    return TableCellEditor.isTableCell(newEditor, node) || isGridCell(node)\n  }\n\n  newEditor.renderElement = props => {\n    const { element, attributes, children } = props\n    if (TableCellEditor.isTableCell(newEditor, element)) {\n      const { style, ...rest } = attributes\n      return (\n        <CellStyles\n          rowSpan={element.rowspan ?? 1}\n          colSpan={element.colspan ?? 1}\n          style={{ ...style, display: element.span ? 'none' : '' }}\n          {...rest}\n        >\n          <CellInnerStyles>{children}</CellInnerStyles>\n        </CellStyles>\n      )\n    }\n    return renderElement(props)\n  }\n\n  return newEditor\n}\n","import { TableLocale } from './types'\n\nconst locale: TableLocale = {\n  locale: 'zh-CN',\n  table: {\n    mergeCells: '',\n    splitCells: '',\n    moveRows: '{count}',\n    moveCols: '{count}',\n  },\n}\n\nexport default locale\n","import { TableLocale } from './types'\n\nconst locale: TableLocale = {\n  locale: 'en-US',\n  table: {\n    mergeCells: 'Merge cells',\n    splitCells: 'Split cells',\n    moveRows: 'Moving {count} rows',\n    moveCols: 'Moving {count} columns',\n  },\n}\n\nexport default locale\n","import zhCN from './zh_CN'\nimport enUS from './en_US'\nimport { TableLocale } from './types'\n\nconst locales: Record<string, TableLocale> = {\n  'en-US': enUS,\n  'zh-CN': zhCN,\n}\n\nexport type { TableLocale }\n\nexport default locales\n","import { Editor } from '@editablejs/models'\nimport * as React from 'react'\nimport { TableCellOptions } from '../cell'\nimport { setOptions as setCellOptions, getOptions as getCellOptions } from '../cell/options'\nimport { TableRowOptions } from '../row'\nimport { setOptions as setRowOptions, getOptions as getRowOptions } from '../row/options'\nimport { TableLocale } from '../locale'\n\nexport const TABLE_OPTIONS_WEAKMAP = new WeakMap<Editor, TableOptions>()\n\nexport interface TableOptions extends TableCellOptions, TableRowOptions {\n  locale?: Record<string, TableLocale>\n  shortcuts?: boolean\n}\n\nexport const getOptions = (editor: Editor): TableOptions => {\n  const options = TABLE_OPTIONS_WEAKMAP.get(editor) ?? {}\n  return {\n    ...options,\n    ...getCellOptions(editor),\n    ...getRowOptions(editor),\n  }\n}\n\nexport const setOptions = (editor: Editor, options: TableOptions) => {\n  setCellOptions(editor, options)\n  setRowOptions(editor, options)\n  TABLE_OPTIONS_WEAKMAP.set(editor, options)\n}\n\nexport const useTableOptions = (editor: Editor) => {\n  return React.useRef(getOptions(editor)).current\n}\n","import { Editor } from '@editablejs/models'\n\nexport interface TableRowOptions {\n  minRowHeight?: number\n}\n\nexport const defaultTableMinRowHeight = 35\n\nconst TABLE_ROW_OPTIONS = new WeakMap<Editor, TableRowOptions>()\n\nexport const getOptions = (editor: Editor): Required<TableRowOptions> => {\n  const options = TABLE_ROW_OPTIONS.get(editor) ?? {}\n\n  if (!options.minRowHeight) options.minRowHeight = defaultTableMinRowHeight\n\n  return options as Required<TableRowOptions>\n}\n\nexport const setOptions = (editor: Editor, { minRowHeight }: TableRowOptions) => {\n  TABLE_ROW_OPTIONS.set(editor, { minRowHeight })\n}\n","import { Element } from '@editablejs/models'\nimport { TableCell } from '../../cell'\nimport { TABLE_ROW_KEY } from '../constants'\n\nexport interface TableRow extends Element {\n  type: typeof TABLE_ROW_KEY\n  children: TableCell[]\n  height?: number\n}\n\nexport const TableRow = {\n  create: (\n    row: Partial<Omit<TableRow, 'type' | 'children'>> = {},\n    cells: Partial<Omit<TableCell, 'type' | 'children'>>[],\n  ): TableRow => {\n    const { height, ...rest } = row\n    return {\n      type: TABLE_ROW_KEY,\n      children: cells.map(cell => TableCell.create(cell)),\n      height,\n      ...rest,\n    }\n  },\n\n  isTableRow: (value: any): value is TableRow => {\n    return Element.isElement(value) && value.type === TABLE_ROW_KEY\n  },\n}\n","export const TABLE_ROW_KEY = 'table-row'\n","import { Editable, RenderElementProps, useIsomorphicLayoutEffect } from '@editablejs/editor'\nimport { Transforms, GridRow, Editor, Node } from '@editablejs/models'\nimport { useTableSize } from '../../context'\nimport { RowStyles } from '../../components/styles'\nimport { TableRow } from '../interfaces/table-row'\nimport { getOptions, setOptions, TableRowOptions } from '../options'\nimport { TableRowEditor } from './table-row-editor'\nimport { RowStore } from '../store'\n\ninterface TableRowProps extends React.AnchorHTMLAttributes<HTMLTableRowElement> {\n  editor: Editor\n  element: TableRow\n}\n\nconst Row: React.FC<TableRowProps & RenderElementProps<TableRow, HTMLTableRowElement>> = ({\n  editor,\n  element,\n  attributes,\n  children,\n}) => {\n  const { style, ref, ...rest } = attributes\n  // \n  const { width } = useTableSize()\n  // \n  useIsomorphicLayoutEffect(() => {\n    let maxHeight = getOptions(editor).minRowHeight\n    const rect = ref.current.getBoundingClientRect()\n    maxHeight = Math.max(maxHeight, rect.height)\n    if (maxHeight !== RowStore.getContentHeight(element)) {\n      RowStore.setContentHeight(element, maxHeight)\n    }\n  }, [editor, ref, width, element])\n\n  return (\n    <RowStyles ref={ref} style={{ height: element.height, ...style }} {...rest}>\n      {children}\n    </RowStyles>\n  )\n}\n\nexport const withTableRow = <T extends Editable>(editor: T, options: TableRowOptions = {}) => {\n  const newEditor = editor as T & TableRowEditor\n  const { renderElement, isGridRow } = editor\n\n  setOptions(editor, options)\n\n  newEditor.isGridRow = (node: Node): node is GridRow => {\n    return TableRowEditor.isTableRow(newEditor, node) || isGridRow(node)\n  }\n\n  newEditor.renderElement = props => {\n    const { element, attributes, children } = props\n    if (TableRowEditor.isTableRow(newEditor, element)) {\n      return (\n        <Row editor={editor} element={element} attributes={attributes}>\n          {children}\n        </Row>\n      )\n    }\n    return renderElement(props)\n  }\n\n  return newEditor\n}\n","import { GridSelected, GridSelection } from '@editablejs/models'\nimport * as React from 'react'\nimport { StoreApi, useStore } from 'zustand'\n\nexport interface TableContextInterface {\n  height: number\n  width: number\n  rows: number\n  cols: number\n  selection: GridSelection | null\n  selected: GridSelected\n}\n\nconst TableContext = React.createContext<StoreApi<TableContextInterface>>({} as any)\n\nexport { TableContext }\n\nexport const useTableStore = () => {\n  const context = React.useContext(TableContext)\n  if (!context) throw new Error('TableContext not found')\n  return useStore(context)\n}\n\nexport const useTableSize = () => {\n  const context = React.useContext(TableContext)\n  return useStore(context, state => ({ height: state.height, width: state.width }))\n}\n","import { Editor } from '@editablejs/models'\nimport { TableCell, TableCellEditor } from '../../cell'\nimport { TABLE_ROW_KEY } from '../constants'\nimport { TableRow } from '../interfaces/table-row'\n\nexport interface TableRowEditor extends Editor {}\n\nexport const TableRowEditor = {\n  isTableRow: (editor: Editor, value: any): value is TableRow => {\n    return TableRow.isTableRow(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_ROW_KEY] ?? []\n    return elements.some(e => TableRowEditor.isTableRow(editor, e[0]))\n  },\n\n  create: (\n    editor: Editor,\n    row: Partial<Omit<TableRow, 'type' | 'children'>> = {},\n    cells: Partial<Omit<TableCell, 'type' | 'children'>>[],\n  ): TableRow => {\n    return TableRow.create(row, cells)\n  },\n}\n","import { useIsomorphicLayoutEffect } from '@editablejs/editor'\nimport { GridRow } from '@editablejs/models'\nimport { useCallback, useEffect, useState } from 'react'\nimport create, { StoreApi, UseBoundStore } from 'zustand'\n\nconst ROW_STORE_WEAK_MAP = new WeakMap<GridRow, UseBoundStore<StoreApi<TableRowStore>>>()\n\nexport interface TableRowStore {\n  contentHeight: number\n}\n\nexport const getRowStore = (element: GridRow) => {\n  let store = ROW_STORE_WEAK_MAP.get(element)\n  if (!store) {\n    store = create<TableRowStore>(() => ({\n      contentHeight: element.height ?? 0,\n    }))\n    ROW_STORE_WEAK_MAP.set(element, store)\n  }\n  return store\n}\n\nexport const useRowStore = (element: GridRow) => {\n  const store = getRowStore(element)\n  useEffect(() => {\n    return () => {\n      ROW_STORE_WEAK_MAP.get(element)?.destroy()\n      ROW_STORE_WEAK_MAP.delete(element)\n    }\n  }, [element])\n  return store\n}\n\nexport const useRowContentHeight = (element: GridRow) => {\n  const store = useRowStore(element)\n  const state = store.getState()\n  return [\n    state.contentHeight,\n    (height: number) => {\n      store.setState({ contentHeight: height })\n    },\n  ] as const\n}\n\nexport const useTableRowContentHeights = (rows: GridRow[]) => {\n  const refresh = useCallback(() => {\n    return rows.map(row => {\n      const store = getRowStore(row)\n      return store.getState().contentHeight || row.height || 0\n    })\n  }, [rows])\n\n  const [heights, setHeights] = useState<number[]>(refresh)\n  useIsomorphicLayoutEffect(() => {\n    setHeights(refresh())\n  }, [refresh])\n\n  return heights\n}\n\nexport const RowStore = {\n  getStore: getRowStore,\n  getContentHeight: (element: GridRow) => {\n    const store = getRowStore(element)\n    return store.getState().contentHeight\n  },\n  setContentHeight: (element: GridRow, height: number) => {\n    const store = getRowStore(element)\n    store.setState({ contentHeight: height })\n  },\n}\n","import { Grid, Editor, Node } from '@editablejs/models'\nimport { TableOptions } from '../options'\nimport { TableCellEditor, TableCell } from '../../cell'\nimport { TableRow, TableRowEditor } from '../../row'\nimport { TABLE_KEY } from '../constants'\nimport { Table } from '../interfaces/table'\nimport { getOptions } from '../options'\nimport { defaultTableMinRowHeight } from '../../row/options'\nimport { calculateAverageColumnWidthInContainer } from '../utils'\n\nexport interface CreateTableOptions {\n  rows?: number\n  cols?: number\n}\nexport interface TableEditor extends Editor {\n  insertTable: (options?: CreateTableOptions | Table) => void\n}\n\nexport const TableEditor = {\n  isTableEditor: (editor: Editor): editor is TableEditor => {\n    return !!(editor as TableEditor).insertTable\n  },\n\n  isTable: (editor: Editor, value: Node): value is Table => {\n    return Table.isTable(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_KEY] ?? []\n    return elements.some(e => TableEditor.isTable(editor, e[0]))\n  },\n\n  getOptions,\n\n  create: (editor: Editor, options: CreateTableOptions = {}): Table => {\n    const { rows = 3, cols = 3 } = options\n    const { minRowHeight = defaultTableMinRowHeight, minColWidth = defaultTableMinRowHeight } =\n      getOptions(editor)\n    const rowHeight = minRowHeight\n    const tableRows: TableRow[] = []\n    const tableColsWdith = calculateAverageColumnWidthInContainer(editor, {\n      cols,\n      minWidth: minColWidth,\n      getWidth: width => width - 1,\n    })\n    for (let r = 0; r < rows; r++) {\n      tableRows.push(\n        TableRowEditor.create(\n          editor,\n          { height: rowHeight },\n          tableColsWdith.map(() => TableCellEditor.create(editor)),\n        ),\n      )\n    }\n    return Grid.create<Table, TableRow, TableCell>(\n      {\n        type: TABLE_KEY,\n        colsWidth: tableColsWdith,\n      },\n      ...tableRows,\n    )\n  },\n\n  insert: (editor: Editor, options?: CreateTableOptions | Table) => {\n    if (TableEditor.isTableEditor(editor)) editor.insertTable(options)\n  },\n}\n","import { Editable } from '@editablejs/editor'\nimport { Editor } from '@editablejs/models'\n\nexport interface CalculateAverageColumnWidthInContainerOptions {\n  cols: number\n  minWidth?: number\n  getWidth?: (width: number) => number\n}\n\nexport const calculateAverageColumnWidthInContainer = (\n  editor: Editor,\n  options: CalculateAverageColumnWidthInContainerOptions,\n): number[] => {\n  const { minWidth = 10, cols, getWidth } = options\n  const container = Editable.toDOMNode(editor, editor)\n  const rect = container.getBoundingClientRect()\n  const width = getWidth ? getWidth(rect.width) : 0\n  const colWidth = Math.max(minWidth, Math.floor(width / cols))\n\n  const tableColsWdith = []\n  let colsWidth = 0\n  for (let c = 0; c < cols; c++) {\n    const cws = colsWidth + colWidth\n    if (c === cols - 1 && cws < width) {\n      const cw = width - colsWidth\n      colsWidth += cw\n      tableColsWdith.push(cw)\n    } else {\n      colsWidth = cws\n      tableColsWdith.push(colWidth)\n    }\n  }\n  return tableColsWdith\n}\n\nexport const adaptiveExpandColumnWidthInContainer = (\n  editor: Editor,\n  colsWidth: number[],\n  minWidth = 5,\n): number[] => {\n  const container = Editable.toDOMNode(editor, editor)\n  const containerRect = container.getBoundingClientRect()\n  const { width: containerWidth } = containerRect\n  const widths = colsWidth.concat()\n  let gridWidth = widths.reduce((a, b) => a + b, 0)\n  while (gridWidth > containerWidth) {\n    let minCount = 0\n    for (let i = 0; i < widths.length; i++) {\n      const w = widths[i]\n      if (w > minWidth) {\n        widths[i] = w - 1\n        gridWidth--\n        if (gridWidth <= containerWidth) break\n      } else {\n        minCount++\n      }\n    }\n    if (minCount === widths.length) break\n  }\n  return widths\n}\n","import {\n  RenderElementProps,\n  useCancellablePromises,\n  cancellablePromise,\n  Editable,\n  useIsomorphicLayoutEffect,\n  useNodeFocused,\n  useNodeSelected,\n  useGridSelection,\n  useGridSelected,\n  useReadOnly,\n} from '@editablejs/editor'\nimport {\n  Grid,\n  Editor,\n  Range,\n  Transforms,\n  isDOMNode,\n  GridCell,\n  isDOMHTMLElement,\n} from '@editablejs/models'\nimport { useComposedRefs } from '@editablejs/ui'\nimport * as React from 'react'\nimport { createStore } from 'zustand'\nimport { TableCellEditor } from '../cell'\nimport { TableContext } from '../context'\nimport { Dragging } from './dragging'\nimport { TableColHeader, TableRowHeader } from './header'\nimport { TableDrag, useTableDragging } from '../hooks/use-drag'\nimport { TableRow, TableRowEditor } from '../row'\nimport { TableSelection as TableSelectionElement } from './selection'\nimport { AllHeaderStyles, TableStyles } from './styles'\nimport { Table } from '../table/interfaces/table'\nimport { TableEditor } from '../table/plugin/table-editor'\nimport { useTableRowContentHeights } from '../row/store'\n\ninterface TableProps extends RenderElementProps<Table> {\n  editor: TableEditor\n}\n\nconst TableComponent: React.FC<TableProps> = ({ editor, element, attributes, children }) => {\n  const nodeSelected = useNodeSelected()\n\n  const nodeFocused = useNodeFocused()\n\n  const selection = useGridSelection()\n\n  const selected = useGridSelected()\n\n  const tableRef = React.useRef<HTMLTableElement>(null)\n\n  const dragging = useTableDragging()\n\n  /**\n   * \n   */\n  useIsomorphicLayoutEffect(() => {\n    const { selection } = editor\n    if (selection && nodeSelected && !nodeFocused) {\n      let { anchor, focus } = selection\n      const isBackward = Range.isBackward(selection)\n      const [startRow] = Editor.nodes<TableRow>(editor, {\n        at: anchor.path,\n        match: n => TableRowEditor.isTableRow(editor, n),\n      })\n      if (startRow) {\n        const [row, path] = startRow\n        const { children: cells } = row\n        const table = Grid.above(editor, path)\n        if (table) {\n          if (isBackward) {\n            const sel = Grid.edges(editor, table, {\n              start: [0, 0],\n              end: [path[path.length - 1], cells.length - 1],\n            })\n            anchor = Editor.start(editor, path.slice(0, -1).concat(sel.end))\n          } else {\n            const sel = Grid.edges(editor, table, {\n              start: [path[path.length - 1], 0],\n              end: [table[0].children.length - 1, cells.length - 1],\n            })\n            anchor = Editor.start(editor, path.slice(0, -1).concat(sel.start))\n          }\n        }\n      }\n      const [endRow] = Editor.nodes<TableRow>(editor, {\n        at: focus.path,\n        match: n => TableRowEditor.isTableRow(editor, n),\n      })\n      if (endRow) {\n        const [row, path] = endRow\n        const { children: cells } = row\n        const table = Grid.above(editor, path)\n        if (table) {\n          if (isBackward) {\n            const sel = Grid.edges(editor, table, {\n              start: [table[0].children.length - 1, cells.length - 1],\n              end: [path[path.length - 1], 0],\n            })\n            focus = Editor.start(editor, path.slice(0, -1).concat(sel.start))\n          } else {\n            const sel = Grid.edges(editor, table, {\n              start: [0, 0],\n              end: [path[path.length - 1], cells.length - 1],\n            })\n            focus = Editor.start(editor, path.slice(0, -1).concat(sel.end))\n          }\n        }\n      }\n      const range = { anchor, focus }\n      if (!Range.equals(selection, range)) Transforms.select(editor, range)\n    }\n  }, [nodeSelected, nodeFocused, editor, editor.selection])\n\n  const { colsWidth = [] } = element\n\n  const renderColgroup = () => {\n    const colgroup = []\n    for (let i = 0; i < colsWidth.length; i++) {\n      colgroup.push(<col width={colsWidth[i]} key={i} />)\n    }\n    return colgroup.length > 0 ? <colgroup>{colgroup}</colgroup> : null\n  }\n  // table width\n  const tableWidth = React.useMemo(() => {\n    let width = 0\n    for (let i = 0; i < colsWidth.length; i++) {\n      width += colsWidth[i]\n    }\n    return width\n  }, [colsWidth])\n  const rowContentHeights = useTableRowContentHeights(element.children)\n\n  // table height\n  const tableHeight = React.useMemo(() => {\n    const { children } = element\n    let height = 0\n    for (let i = 0; i < children.length; i++) {\n      const row = children[i]\n      height += (rowContentHeights[i] || row.height) ?? 0\n    }\n    return height\n  }, [element, rowContentHeights])\n\n  const [isHover, setHover] = React.useState(false)\n\n  const store = React.useMemo(\n    () =>\n      createStore(() => ({\n        selection,\n        selected,\n        width: tableWidth,\n        height: tableHeight,\n        rows: element.children.length,\n        cols: element.colsWidth?.length ?? 0,\n      })),\n    [\n      element.children.length,\n      element.colsWidth?.length,\n      selected,\n      selection,\n      tableHeight,\n      tableWidth,\n    ],\n  )\n\n  const renderAllHeader = () => {\n    const handleMouseDown = (e: React.MouseEvent) => {\n      e.preventDefault()\n      Grid.select(editor, Editable.findPath(editor, element))\n    }\n    return <AllHeaderStyles onMouseDown={handleMouseDown} allFull={selected.allFull} />\n  }\n\n  const cancellablePromisesApi = useCancellablePromises()\n\n  const handleMouseOver = React.useCallback(() => {\n    cancellablePromisesApi.clearPendingPromises()\n    if (~~selected.count) return\n    const wait = cancellablePromise(cancellablePromisesApi.delay(200))\n    cancellablePromisesApi.appendPendingPromise(wait)\n    wait.promise\n      .then(() => {\n        setHover(true)\n      })\n      .catch(err => {})\n  }, [selected, cancellablePromisesApi])\n\n  const handleMouseLeave = React.useCallback(() => {\n    cancellablePromisesApi.clearPendingPromises()\n    setHover(false)\n  }, [cancellablePromisesApi])\n\n  const getMoveColToIndex = React.useCallback(\n    (col: number, offsetX: number) => {\n      const cells = Grid.cells(editor, Editable.findPath(editor, element), {\n        startCol: col,\n        endCol: col,\n      })\n      let minCol = col\n      let maxCol = col\n      for (const [cell] of cells) {\n        const isSpan = GridCell.isSpan(cell)\n        if (isSpan) {\n          minCol = Math.min(minCol, cell.span[1])\n        } else {\n          maxCol = Math.max(maxCol, col + cell.colspan - 1)\n        }\n      }\n      const leftWidth = colsWidth[minCol] / 2\n      const rightWidth = colsWidth[maxCol] / 2\n      if (col === minCol && offsetX < leftWidth) {\n        return minCol\n      }\n      if (col === maxCol && offsetX > rightWidth) {\n        return maxCol + 1\n      }\n      return -1\n    },\n    [colsWidth, element, editor],\n  )\n\n  const getMoveRowToIndex = React.useCallback(\n    (row: number, offsetY: number) => {\n      const cells = Grid.cells(editor, Editable.findPath(editor, element), {\n        startRow: row,\n        endRow: row,\n      })\n      let minRow = row\n      let maxRow = row\n      for (const [cell] of cells) {\n        const isSpan = GridCell.isSpan(cell)\n        if (isSpan) {\n          minRow = Math.min(minRow, cell.span[0])\n        } else {\n          maxRow = Math.max(maxRow, row + cell.rowspan - 1)\n        }\n      }\n      const rows = element.children\n      const topHeight = (rows[minRow].height ?? 0) / 2\n      const bottomHeight = (rows[maxRow].height ?? 0) / 2\n\n      if (row === minRow && offsetY < topHeight) {\n        return minRow\n      }\n      if (row === maxRow && offsetY > bottomHeight) {\n        return maxRow + 1\n      }\n      return -1\n    },\n    [element, editor],\n  )\n\n  const handleMouseMove = React.useCallback(\n    (event: MouseEvent) => {\n      const tableEl = tableRef.current\n      const { target, offsetX, offsetY } = event\n      const { type, point } = TableDrag.getDrag()\n      if (\n        (type === 'col' && Math.abs(point.x - offsetX) < 3) ||\n        (type === 'row' && Math.abs(point.y - offsetY) < 3)\n      )\n        return\n\n      TableDrag.setPoint({ x: event.clientX, y: event.clientY })\n      if (!tableEl || !isDOMNode(target) || !tableEl.contains(target)) {\n        TableDrag.setTo(-1)\n        return\n      }\n\n      const cell = TableCellEditor.closest(editor, target)\n      let col = -1\n      let row = -1\n      if (!cell) {\n        if (isDOMHTMLElement(target)) {\n          const attrName = `data-table-${type}`\n          const header = target.closest(`[${attrName}]`)\n          if (header) {\n            const index = parseInt(header.getAttribute(attrName) || '-1')\n            col = type === 'col' ? index : -1\n            row = type === 'row' ? index : -1\n          }\n        }\n      } else {\n        const path = Editable.findPath(editor, cell)\n\n        col = path[path.length - 1]\n        row = path[path.length - 2]\n      }\n      if (col === -1 && row === -1) {\n        TableDrag.setTo(-1)\n        return\n      }\n      const to = type === 'row' ? getMoveRowToIndex(row, offsetY) : getMoveColToIndex(col, offsetX)\n      TableDrag.setTo(to)\n    },\n    [editor, getMoveRowToIndex, getMoveColToIndex],\n  )\n\n  React.useEffect(() => {\n    if (dragging) {\n      window.addEventListener('mousemove', handleMouseMove)\n    }\n\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove)\n    }\n  }, [dragging, handleMouseMove])\n\n  const composedRefs = useComposedRefs(attributes.ref, tableRef)\n\n  const [readOnly] = useReadOnly()\n\n  return (\n    <TableContext.Provider value={store}>\n      <TableStyles\n        isDragging={dragging}\n        isHover={isHover}\n        isSelected={!!~~selected.count}\n        {...attributes}\n        onMouseOver={handleMouseOver}\n        onMouseLeave={handleMouseLeave}\n        ref={composedRefs}\n      >\n        {!readOnly && <TableColHeader editor={editor} table={element} />}\n        {!readOnly && (\n          <TableRowHeader editor={editor} table={element} rowContentHeights={rowContentHeights} />\n        )}\n        {!readOnly && renderAllHeader()}\n        <table style={{ width: !tableWidth ? '' : tableWidth }}>\n          {renderColgroup()}\n          <tbody>{children}</tbody>\n        </table>\n        <TableSelectionElement editor={editor} table={element} />\n      </TableStyles>\n      <Dragging />\n    </TableContext.Provider>\n  )\n}\n\nexport { TableComponent }\n","import _styled2styled_components from 'styled-components';\n            const _styled2 = typeof _styled2styled_components.default === 'undefined' ? _styled2styled_components : _styled2styled_components.default;;\nimport _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport { Editable, useEditableStatic, useLocaleFormat } from '@editablejs/editor';\nimport { TableDrag, useTableDragCount, useTableDragPoint } from '../hooks/use-drag';\nexport const Dragging = () => {\n  const editor = useEditableStatic();\n  const point = useTableDragPoint();\n  const count = useTableDragCount();\n  const {\n    format\n  } = useLocaleFormat('table');\n  if (!point) return null;\n  const [x, y] = Editable.toRelativePosition(editor, point.x, point.y);\n  return <_StyledDiv style={{\n    transform: `translate(${x}px, ${y}px)`\n  }}>\n      <_StyledDiv2>\n        {format(TableDrag.getDragType() === 'col' ? 'moveCols' : 'moveRows', {\n        count\n      })}\n      </_StyledDiv2>\n    </_StyledDiv>;\n};\n\nvar _StyledDiv = _styled(\"div\").withConfig({\n  componentId: \"sc-9ij67v-0\"\n})({\n  \"pointerEvents\": \"none\",\n  \"position\": \"absolute\",\n  \"left\": \"0px\",\n  \"top\": \"0px\",\n  \"zIndex\": \"10\",\n  \"--tw-bg-opacity\": \"1\",\n  \"backgroundColor\": \"rgb(59 130 246 / var(--tw-bg-opacity))\",\n  \"paddingTop\": \"0.5rem\",\n  \"paddingBottom\": \"0.5rem\",\n  \"paddingLeft\": \"1rem\",\n  \"paddingRight\": \"1rem\",\n  \"--tw-text-opacity\": \"1\",\n  \"color\": \"rgb(255 255 255 / var(--tw-text-opacity))\",\n  \"opacity\": \"0.8\"\n});\n\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  componentId: \"sc-9ij67v-1\"\n})({\n  \"textAlign\": \"center\",\n  \"fontSize\": \"12px\"\n});","import * as React from 'react'\nimport create, { useStore } from 'zustand'\n\nexport interface TableDragStore {\n  drag: {\n    /**\n     *   \n     */\n    type: 'row' | 'col'\n    /**\n     * \n     */\n    from: number[]\n    /**\n     * \n     */\n    to: number\n    /**\n     * \n     */\n    point: Record<'x' | 'y', number>\n  } | null\n}\n\n/**\n * \n */\nconst store = create<TableDragStore>(() => ({\n  drag: null,\n}))\n\n/**\n * \n * @returns\n */\nexport const useTableDragging = () => {\n  const drag = useStore(store, state => state.drag !== null)\n\n  return React.useMemo(() => drag, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragTo = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.to ?? -1, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragPoint = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.point ?? null, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragCount = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.from.length ?? 0, [drag])\n}\n\n/**\n * \n */\nexport const TableDrag = {\n  /**\n   * \n   * @returns\n   */\n  isDragging: () => {\n    const { drag } = store.getState()\n    return drag !== null\n  },\n  /**\n   * \n   * @returns\n   */\n  getDrag: () => {\n    const { drag } = store.getState()\n    if (!drag) throw new Error('not drag')\n    return drag\n  },\n  /**\n   * \n   * @returns\n   */\n  getDragType: () => {\n    const { drag } = store.getState()\n    if (!drag) return null\n    return drag.type\n  },\n  /**\n   * \n   * @param type\n   * @param from\n   */\n  setFrom: (type: 'row' | 'col', from: number[], point: Record<'x' | 'y', number>) => {\n    store.setState({ drag: { type, from, point, to: -1 } })\n  },\n  /**\n   * \n   * @param to\n   * @returns\n   */\n  setTo: (to: number) => {\n    const { drag } = store.getState()\n    if (!drag) return\n    store.setState(() => {\n      const max = Math.max(...drag.from)\n      return {\n        drag: { ...drag, to: ~drag.from.concat(max + 1).indexOf(to) ? -1 : to },\n      }\n    })\n  },\n  /**\n   * \n   * @param point\n   * @returns\n   */\n  setPoint: (point: Record<'x' | 'y', number>) => {\n    const { drag } = store.getState()\n    if (!drag) return\n    store.setState({ drag: { ...drag, point } })\n  },\n  /**\n   * \n   */\n  clear: () => {\n    store.setState({ drag: null })\n  },\n}\n","import { Editable } from '@editablejs/editor'\nimport * as React from 'react'\nimport { InsertAction, SplitAction } from './action'\nimport { useTableStore } from '../context'\nimport { Editor, Grid } from '@editablejs/models'\nimport {\n  ColsHeaderItemStyles,\n  ColsHeaderStyles,\n  HeaderDragStyles,\n  RowsHeaderItemStyles,\n  RowsHeaderStyles,\n} from './styles'\nimport { TableDrag } from '../hooks/use-drag'\nimport { useTableRowContentHeights } from '../row/store'\nexport interface TableHeaderProps {\n  editor: Editor\n  table: Grid\n}\n\nconst TableRowHeaderDefault: React.FC<\n  TableHeaderProps & {\n    rowContentHeights: number[]\n  }\n> = ({ editor, table, rowContentHeights }) => {\n  const { width, selected, cols } = useTableStore()\n\n  const selectRow = React.useCallback(\n    (row: number) => {\n      Grid.select(editor, Editable.findPath(editor, table), {\n        start: [row, 0],\n        end: [row, cols - 1],\n      })\n    },\n    [editor, table, cols],\n  )\n\n  const handleWindowMouseUp = React.useCallback(() => {\n    if (TableDrag.isDragging()) {\n      const dragging = TableDrag.getDrag()\n\n      TableDrag.clear()\n      const { type, to, from } = dragging\n      if (to > -1 && type === 'row') {\n        const move = Math.min(...from)\n        const isBackward = to < move\n        Grid.moveRow(editor, {\n          move,\n          count: from.length,\n          to: isBackward ? to : to - 1,\n        })\n      }\n    }\n    window.removeEventListener('mouseup', handleWindowMouseUp)\n  }, [editor])\n\n  const handleMouseDown = React.useCallback(\n    (e: React.MouseEvent, row: number) => {\n      e.preventDefault()\n\n      if (selected.rowFull && !selected.allFull && ~selected.rows.indexOf(row)) {\n        // start drag\n        TableDrag.setFrom('row', [...selected.rows], {\n          x: e.clientX,\n          y: e.clientY,\n        })\n        window.addEventListener('mouseup', handleWindowMouseUp)\n      }\n    },\n    [selected.rowFull, selected.allFull, selected.rows, handleWindowMouseUp],\n  )\n\n  const handleMouseUp = React.useCallback(\n    (e: React.MouseEvent, row: number) => {\n      e.preventDefault()\n      selectRow(row)\n    },\n    [selectRow],\n  )\n\n  const headers = React.useMemo(() => {\n    const headers = []\n    headers.push(\n      <InsertAction\n        editor={editor}\n        table={table}\n        index={0}\n        width={width}\n        top={0}\n        key=\"insert--1\"\n      />,\n    )\n    let height = 0\n    const { children } = table\n    for (let i = 0; i < children.length; i++) {\n      const row = children[i]\n      const rowHeight = rowContentHeights[i] || row.height\n      const currentHeight = height\n      const h = rowHeight ?? 0\n      height += h\n      const hover = ~selected.rows.indexOf(i)\n      headers.push(\n        <RowsHeaderItemStyles\n          onMouseDown={e => handleMouseDown(e, i)}\n          onMouseUp={e => handleMouseUp(e, i)}\n          allFull={selected.allFull}\n          isHover={!!hover}\n          isFull={!!hover && selected.rowFull}\n          style={{ height: h + 1, top: currentHeight }}\n          key={i}\n          data-table-row={i}\n        >\n          <HeaderDragStyles name=\"drag\" />\n        </RowsHeaderItemStyles>,\n        <InsertAction\n          editor={editor}\n          table={table}\n          width={width}\n          index={i + 1}\n          top={height}\n          key={`insert-${i}`}\n        />,\n        <SplitAction\n          editor={editor}\n          table={table}\n          index={i}\n          width={width}\n          top={height}\n          key={`split-${i}`}\n        />,\n      )\n    }\n    return headers\n  }, [\n    editor,\n    handleMouseDown,\n    handleMouseUp,\n    selected.allFull,\n    selected.rowFull,\n    selected.rows,\n    table,\n    width,\n    rowContentHeights,\n  ])\n\n  return <RowsHeaderStyles>{headers}</RowsHeaderStyles>\n}\n\nconst TableRowHeader = TableRowHeaderDefault\n\nconst TableColHeaderDefault: React.FC<TableHeaderProps> = ({ editor, table }) => {\n  const { height, selected, rows } = useTableStore()\n\n  const selectColumn = React.useCallback(\n    (col: number) => {\n      Grid.select(editor, Editable.findPath(editor, table), {\n        start: [0, col],\n        end: [rows - 1, col],\n      })\n    },\n    [editor, table, rows],\n  )\n\n  const handleWindowMouseUp = React.useCallback(() => {\n    if (TableDrag.isDragging()) {\n      const dragging = TableDrag.getDrag()\n\n      TableDrag.clear()\n      const { type, to, from } = dragging\n      if (to > -1 && type === 'col') {\n        const move = Math.min(...from)\n        const isBackward = to < move\n        Grid.moveCol(editor, {\n          move,\n          count: from.length,\n          to: isBackward ? to : to - 1,\n        })\n      }\n    }\n    window.removeEventListener('mouseup', handleWindowMouseUp)\n  }, [editor])\n\n  const handleMouseDown = React.useCallback(\n    (e: React.MouseEvent, col: number) => {\n      e.preventDefault()\n      if (selected.colFull && !selected.allFull && ~selected.cols.indexOf(col)) {\n        // start drag\n        TableDrag.setFrom('col', [...selected.cols], {\n          x: e.clientX,\n          y: e.clientY,\n        })\n        window.addEventListener('mouseup', handleWindowMouseUp)\n      }\n    },\n    [handleWindowMouseUp, selected.allFull, selected.colFull, selected.cols],\n  )\n\n  const handleMouseUp = React.useCallback(\n    (e: React.MouseEvent, col: number) => {\n      e.preventDefault()\n      selectColumn(col)\n    },\n    [selectColumn],\n  )\n\n  const { colsWidth = [] } = table\n\n  const headers = React.useMemo(() => {\n    const headers = []\n    let width = 0\n    headers.push(\n      <InsertAction\n        editor={editor}\n        table={table}\n        index={0}\n        height={height}\n        left={0}\n        key=\"insert--1\"\n      />,\n    )\n    for (let i = 0; i < colsWidth.length; i++) {\n      const cw = colsWidth[i]\n      const currentWidth = width\n      width += cw\n      const hover = ~selected.cols.indexOf(i)\n      headers.push(\n        <ColsHeaderItemStyles\n          onMouseDown={e => handleMouseDown(e, i)}\n          onMouseUp={e => handleMouseUp(e, i)}\n          isHover={!!hover}\n          allFull={selected.allFull}\n          isFull={!!hover && selected.colFull}\n          style={{ width: cw + 1, left: currentWidth }}\n          key={i}\n          data-table-col={i}\n        >\n          <HeaderDragStyles name=\"drag\" />\n        </ColsHeaderItemStyles>,\n        <InsertAction\n          editor={editor}\n          table={table}\n          index={i + 1}\n          left={width}\n          height={height}\n          key={`insert-${i}`}\n        />,\n        <SplitAction\n          editor={editor}\n          table={table}\n          index={i}\n          height={height}\n          left={width}\n          key={`split-${i}`}\n        />,\n      )\n    }\n    return headers\n  }, [\n    colsWidth,\n    editor,\n    handleMouseDown,\n    handleMouseUp,\n    height,\n    selected.allFull,\n    selected.colFull,\n    selected.cols,\n    table,\n  ])\n\n  return <ColsHeaderStyles>{headers}</ColsHeaderStyles>\n}\n\nconst TableColHeader = React.memo(TableColHeaderDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  const { colsWidth, children } = table\n  const { colsWidth: nextColsWidth, children: nextChildren } = nextTable\n  return (\n    editor === nextEditor &&\n    children.length === nextChildren.length &&\n    colsWidth?.length === nextColsWidth?.length &&\n    !!colsWidth?.every((item, index) => item === nextColsWidth?.[index])\n  )\n})\n\nexport { TableColHeader, TableRowHeader }\n","import { cancellablePromise, Editable, useCancellablePromises, Slot } from '@editablejs/editor'\nimport { Transforms, Grid, Editor } from '@editablejs/models'\nimport * as React from 'react'\nimport { Icon } from '@editablejs/ui'\nimport {\n  ColsInsertIconStyles,\n  ColsInsertLineStyles,\n  ColsInsertPlusStyles,\n  ColsInsertStyles,\n  ColsSplitLineStyles,\n  ColsSplitStyles,\n  RowsInsertIconStyles,\n  RowsInsertLineStyles,\n  RowsInsertPlusStyles,\n  RowsInsertStyles,\n  RowsSplitLineStyles,\n  RowsSplitStyles,\n} from './styles'\nimport { TableDrag, useTableDragging, useTableDragTo } from '../hooks/use-drag'\nimport { TABLE_CELL_KEY } from '../cell/constants'\nimport { TableRow } from '../row'\nimport { TABLE_ROW_KEY } from '../row/constants'\nimport { useTableOptions } from '../table/options'\nimport { defaultTableMinColWidth } from '../cell/options'\nimport { defaultTableMinRowHeight } from '../row/options'\nimport { adaptiveExpandColumnWidthInContainer } from '../table/utils'\nimport { RowStore } from '../row/store'\n\nconst TYPE_COL = 'col'\nconst TYPE_ROW = 'row'\n\nexport interface TableActionProps {\n  editor: Editor\n  table: Grid\n  index: number\n  left?: number\n  top?: number\n  height?: number\n  width?: number\n}\n\n// insert action\nconst InsertActionDefault: React.FC<TableActionProps> = ({\n  editor,\n  table,\n  left,\n  top,\n  height,\n  width,\n  index,\n}) => {\n  if (left !== undefined) {\n    left -= 1\n  }\n  if (top !== undefined) {\n    top -= 1\n  }\n\n  if (height !== undefined) {\n    height += 11\n  }\n  if (width !== undefined) {\n    width += 11\n  }\n\n  const type = left !== undefined ? TYPE_COL : TYPE_ROW\n\n  const { minColWidth = defaultTableMinColWidth, minRowHeight = defaultTableMinRowHeight } =\n    useTableOptions(editor)\n\n  const draggingTo = useTableDragTo()\n\n  const handleMouseDown = (event: React.MouseEvent) => {\n    event.preventDefault()\n    if (type === TYPE_COL) {\n      let colWidth = minColWidth\n      const { colsWidth } = table\n      if (colsWidth) {\n        if (index >= colsWidth.length) colWidth = colsWidth[colsWidth.length - 1]\n        else {\n          colWidth = colsWidth[index]\n        }\n      }\n      const path = Editable.findPath(editor, table)\n      Grid.insertCol(editor, path, index, { type: TABLE_CELL_KEY }, colWidth, minColWidth)\n      const newGrid = Grid.above(editor, path)\n      if (newGrid && newGrid[0].colsWidth) {\n        const newColsWidth = adaptiveExpandColumnWidthInContainer(editor, newGrid[0].colsWidth)\n        Transforms.setNodes<Grid>(editor, { colsWidth: newColsWidth }, { at: path })\n      }\n    } else if (type === TYPE_ROW) {\n      Grid.insertRow(\n        editor,\n        Editable.findPath(editor, table),\n        index,\n        { type: TABLE_ROW_KEY },\n        { type: TABLE_CELL_KEY },\n        minRowHeight,\n      )\n    }\n  }\n\n  const draggingActive = React.useMemo(() => {\n    return draggingTo > -1 && draggingTo === index && TableDrag.getDrag().type === type\n  }, [draggingTo, index, type])\n\n  const InsertStyles = type === TYPE_COL ? ColsInsertStyles : RowsInsertStyles\n  const InsertIconStyles = type === TYPE_COL ? ColsInsertIconStyles : RowsInsertIconStyles\n  const InsertLineStyles = type === TYPE_COL ? ColsInsertLineStyles : RowsInsertLineStyles\n  const InsertPlusStyles = type === TYPE_COL ? ColsInsertPlusStyles : RowsInsertPlusStyles\n  return (\n    <InsertStyles isActive={draggingActive} style={{ left, top }} onMouseDown={handleMouseDown}>\n      <InsertIconStyles>\n        <svg width=\"3\" height=\"3\" viewBox=\"0 0 3 3\" fill=\"none\">\n          <circle cx=\"1.5\" cy=\"1.5\" r=\"1.5\" fill=\"#BBBFC4\"></circle>\n        </svg>\n      </InsertIconStyles>\n      {!draggingActive && (\n        <InsertPlusStyles>\n          <Icon name=\"plusCircle\" />\n        </InsertPlusStyles>\n      )}\n      <InsertLineStyles isActive={draggingActive} style={{ height, width }}></InsertLineStyles>\n    </InsertStyles>\n  )\n}\n\nexport const InsertAction = React.memo(InsertActionDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  return (\n    editor === nextEditor &&\n    table === nextTable &&\n    prev.index === next.index &&\n    prev.left === next.left &&\n    prev.top === next.top &&\n    prev.height === next.height &&\n    prev.width === next.width\n  )\n})\n\ninterface TableDragSplitOptions {\n  type: typeof TYPE_COL | typeof TYPE_ROW\n  x: number\n  y: number\n  start: number\n  end: number\n}\n// split action\nconst SplitActionDefault: React.FC<TableActionProps> = ({\n  editor,\n  table,\n  left,\n  top,\n  height,\n  width,\n  index,\n}) => {\n  if (height !== undefined) {\n    height += 8\n  }\n  if (width !== undefined) {\n    width += 8\n  }\n  // /31\n  if (left !== undefined) {\n    left -= 1\n  }\n  if (top !== undefined) {\n    top -= 1\n  }\n  const type = left !== undefined ? TYPE_COL : TYPE_ROW\n\n  const dragRef = React.useRef<TableDragSplitOptions | null>(null)\n  const { minColWidth = defaultTableMinColWidth, minRowHeight = defaultTableMinRowHeight } =\n    useTableOptions(editor)\n  const [isHover, setHover] = React.useState(false)\n  const isDrag = React.useRef(false)\n\n  const handleDragSplitMove = React.useCallback(\n    (e: MouseEvent) => {\n      if (!dragRef.current) return\n      const { type, x, y, start } = dragRef.current\n      const path = Editable.findPath(editor, table)\n      if (type === TYPE_COL) {\n        const { colsWidth } = table\n        if (!colsWidth) return\n        const cX = e.clientX\n        const val = cX - x\n        const newColsWidth = colsWidth.concat()\n        let width = newColsWidth[start] + val\n        width = Math.max(width, minColWidth)\n        if (start < newColsWidth.length - 1) {\n          width = Math.min(newColsWidth[start] + newColsWidth[start + 1] - minColWidth, width)\n          let nextW = newColsWidth[start + 1] - val\n          nextW = Math.max(nextW, minColWidth)\n          nextW = Math.min(newColsWidth[start] + newColsWidth[start + 1] - minColWidth, nextW)\n          newColsWidth[start + 1] = nextW\n        }\n        newColsWidth[start] = width\n        Transforms.setNodes<Grid>(editor, { colsWidth: newColsWidth }, { at: path })\n      } else if (type === TYPE_ROW) {\n        const row = table.children[start]\n        const { height, children: cells } = row\n        if (height) {\n          const ch = RowStore.getContentHeight(row)\n          const cY = e.clientY\n          const val = cY - y\n          let h = Math.max(height, ch!) + val\n          h = Math.max(h, minRowHeight)\n          let contentHeight = 0\n          for (let i = 0; i < cells.length; i++) {\n            const child = Editable.toDOMNode(editor, cells[i]).firstElementChild\n            if (!child) continue\n            const rect = child.getBoundingClientRect()\n            contentHeight = Math.max(contentHeight, rect.height + 2, minRowHeight)\n          }\n          if (h < contentHeight) {\n            h = contentHeight\n          }\n          RowStore.setContentHeight(row, contentHeight)\n          Transforms.setNodes<TableRow>(editor, { height: h }, { at: path.concat(start) })\n        }\n      }\n    },\n    [editor, minColWidth, minRowHeight, table],\n  )\n\n  const cancellablePromisesApi = useCancellablePromises()\n\n  const handleDragSplitUp = React.useCallback(() => {\n    dragRef.current = null\n    isDrag.current = false\n    setHover(false)\n    cancellablePromisesApi.clearPendingPromises()\n    window.removeEventListener('mousemove', handleDragSplitMove)\n    window.removeEventListener('mouseup', handleDragSplitUp)\n  }, [cancellablePromisesApi, dragRef, handleDragSplitMove])\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault()\n    dragRef.current = {\n      type,\n      x: e.clientX,\n      y: e.clientY,\n      start: index,\n      end: index,\n    }\n    isDrag.current = true\n    setHover(true)\n    window.addEventListener('mousemove', handleDragSplitMove)\n    window.addEventListener('mouseup', handleDragSplitUp)\n  }\n\n  const draging = useTableDragging()\n\n  React.useEffect(() => {\n    if (draging) Slot.update(editor, { active: false })\n  }, [draging, editor])\n  const handleMouseOver = React.useCallback(() => {\n    if (draging) return\n    cancellablePromisesApi.clearPendingPromises()\n    const wait = cancellablePromise(cancellablePromisesApi.delay(200))\n    cancellablePromisesApi.appendPendingPromise(wait)\n    wait.promise\n      .then(() => {\n        setHover(true)\n      })\n      .catch(err => {})\n  }, [cancellablePromisesApi, draging])\n\n  const handleMouseLeave = React.useCallback(() => {\n    if (isDrag.current) return\n    cancellablePromisesApi.clearPendingPromises()\n    setHover(false)\n  }, [cancellablePromisesApi])\n\n  const SplitStyles = type === TYPE_COL ? ColsSplitStyles : RowsSplitStyles\n  const SplitLineStyles = type === TYPE_COL ? ColsSplitLineStyles : RowsSplitLineStyles\n  if (draging) return null\n  return (\n    <SplitStyles\n      isHover={isHover && !draging}\n      style={{ left, top, height, width }}\n      onMouseDown={handleMouseDown}\n      onMouseOver={handleMouseOver}\n      onMouseLeave={handleMouseLeave}\n    >\n      <SplitLineStyles isHover={isHover && !draging} />\n    </SplitStyles>\n  )\n}\n\nexport const SplitAction = React.memo(SplitActionDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  return (\n    editor === nextEditor &&\n    table === nextTable &&\n    prev.index === next.index &&\n    prev.left === next.left &&\n    prev.top === next.top &&\n    prev.height === next.height &&\n    prev.width === next.width\n  )\n})\n","import {\n  Editable,\n  useGridSelectionRect,\n  useEditableStatic,\n  useIsomorphicLayoutEffect,\n  SelectionDrawing,\n} from '@editablejs/editor'\nimport { Editor, Grid } from '@editablejs/models'\nimport * as React from 'react'\nimport { SelectionStyles } from './styles'\n\nexport interface TableSelectionProps {\n  editor: Editor\n  table: Grid\n}\n\nconst TableSelection: React.FC<TableSelectionProps> = () => {\n  const editor = useEditableStatic()\n  const rect = useGridSelectionRect()\n\n  useIsomorphicLayoutEffect(() => {\n    if (rect) {\n      SelectionDrawing.setEnabled(editor, false)\n    } else {\n      SelectionDrawing.setEnabled(editor, true)\n    }\n\n    return () => {\n      SelectionDrawing.setEnabled(editor, true)\n    }\n  }, [editor, rect])\n\n  if (!rect) return null\n  const { top, left, width, height } = rect\n  return <SelectionStyles style={{ left, top, width, height }} />\n}\n\nexport { TableSelection }\n","import { Editable, Hotkey } from '@editablejs/editor'\nimport { Editor, Element, Range, Point, Transforms } from '@editablejs/models'\nimport { TableCellEditor } from '../../cell'\nimport { TableEditor } from './table-editor'\n\nconst findMatchedRange = (editor: Editor, at: Point) => {\n  const block = Editor.above(editor, {\n    at,\n    match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n  })\n  const path = block ? block[1] : []\n\n  const start = Editor.start(editor, path)\n  const range = { anchor: at, focus: start }\n  const beforeText = Editor.string(editor, range)\n  const reg = /^\\|([^\\|]+\\|)+$/\n  const match = beforeText.match(reg)\n  if (match) {\n    const columns = beforeText.slice(1, -1).split('|')\n\n    for (let i = 0; i < columns.length; i++) {\n      if (columns[i] === '') {\n        return\n      }\n    }\n    const start = Editor.start(editor, path)\n    const end = Editor.end(editor, path)\n    return {\n      columns,\n      range: {\n        anchor: {\n          path: start.path,\n          offset: start.offset + beforeText.length,\n        },\n        focus: end,\n      },\n      start,\n      end,\n    }\n  }\n}\nexport const withShortcuts = (editor: Editable) => {\n  const { onKeydown } = editor\n\n  editor.onKeydown = event => {\n    const { selection } = editor\n    if (\n      selection &&\n      Range.isCollapsed(selection) &&\n      !Editable.isComposing(editor) &&\n      Hotkey.match('enter', event) &&\n      !TableEditor.isActive(editor)\n    ) {\n      const anchor = Range.start(selection)\n      const match = findMatchedRange(editor, anchor)\n      if (match) {\n        event.preventDefault()\n        const { range, start, columns } = match\n        Transforms.delete(editor, {\n          at: {\n            anchor: start,\n            focus: range.anchor,\n          },\n        })\n        const cols = columns.map(column =>\n          TableCellEditor.create(editor, {\n            children: [{ text: column }],\n          }),\n        )\n        const table = TableEditor.create(editor, {\n          cols: cols.length,\n          rows: 2,\n        })\n        table.children[0].children = cols\n        TableEditor.insert(editor, table)\n        return\n      }\n    }\n    onKeydown(event)\n  }\n}\n"],"mappings":"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","names":["import_editor","import_models","import_models","import_styled_components","_styledstyled_components","_css","import_models","locale","getOptions","setOptions","getOptions","setOptions","import_models","import_editor","React","import_models","import_editor","import_zustand","store","create","store","import_jsx_runtime","getOptions","setOptions","import_models","import_editor","getOptions","import_editor","import_models","import_ui","React","import_zustand","import_styled_components","import_editor","React","import_zustand","create","import_jsx_runtime","_styled2styled_components","_styled","_styledstyled_components","_styled","import_editor","React","import_editor","import_models","React","import_ui","import_jsx_runtime","type","width","height","import_models","import_jsx_runtime","headers","import_editor","import_jsx_runtime","import_jsx_runtime","selection","children","store","import_editor","import_models","start","import_jsx_runtime","setOptions","options"]}
\ No newline at end of file
+{"version":3,"sources":["../src/index.tsx","../src/table/interfaces/table.ts","../src/table/constants.ts","../src/table/plugin/with-table.tsx","../src/cell/interfaces/table-cell.ts","../src/cell/constants.ts","../src/cell/options.ts","../src/components/styles.tsx","../src/cell/plugin/table-cell-editor.ts","../src/cell/plugin/with-table-cell.tsx","../src/locale/zh_CN.ts","../src/locale/en_US.ts","../src/locale/index.ts","../src/table/options.ts","../src/row/options.ts","../src/row/interfaces/table-row.ts","../src/row/constants.ts","../src/row/plugin/with-table-row.tsx","../src/context.ts","../src/row/plugin/table-row-editor.ts","../src/row/store.ts","../src/table/plugin/table-editor.ts","../src/table/utils.ts","../src/components/table.tsx","../src/components/dragging.tsx","../src/hooks/use-drag.ts","../src/components/header.tsx","../src/components/action.tsx","../src/components/selection.tsx","../src/table/plugin/with-shortcuts.ts"],"sourcesContent":["export type { TableLocale } from './locale'\nexport * from './table'\n","import { Grid, Element } from '@editablejs/models'\nimport { TABLE_KEY } from '../constants'\nimport { TableRow } from '../../row'\n\nexport interface Table extends Grid {\n  type: typeof TABLE_KEY\n  children: TableRow[]\n}\n\nexport const Table = {\n  isTable: (value: any): value is Table => {\n    return Element.isElement(value) && value.type === TABLE_KEY\n  },\n}\n","export const TABLE_KEY = 'table'\n","import { Editable, RenderElementProps, Locale } from '@editablejs/editor'\nimport { Transforms, Node, Grid } from '@editablejs/models'\nimport { withTableCell } from '../../cell'\nimport locale from '../../locale'\nimport { setOptions, TableOptions } from '../options'\nimport { withTableRow } from '../../row'\nimport { TableEditor } from './table-editor'\nimport { Table } from '../interfaces/table'\nimport { TableComponent } from '../../components/table'\nimport { withShortcuts } from './with-shortcuts'\n\nexport const withTable = <T extends Editable>(editor: T, options: TableOptions = {}) => {\n  let newEditor = editor as T & TableEditor\n\n  setOptions(newEditor, options)\n\n  const { locale: localeOptions = {} } = options\n  Locale.setLocale(newEditor, locale, localeOptions)\n\n  newEditor = withTableCell(newEditor)\n  newEditor = withTableRow(newEditor)\n\n  const { isGrid } = editor\n\n  newEditor.isGrid = (node: Node): node is Table => {\n    return TableEditor.isTable(newEditor, node) || isGrid(node)\n  }\n\n  newEditor.insertTable = options => {\n    const table = Table.isTable(options) ? options : TableEditor.create(newEditor, options)\n    Transforms.insertNodes(newEditor, table)\n    Grid.focus(newEditor, {\n      point: [0, 0],\n    })\n  }\n\n  const { renderElement } = newEditor\n\n  newEditor.renderElement = props => {\n    if (TableEditor.isTable(newEditor, props.element)) {\n      return <TableComponent editor={newEditor} {...(props as RenderElementProps<Table>)} />\n    }\n    return renderElement(props)\n  }\n\n  const { shortcuts } = options\n  if (shortcuts !== false) {\n    withShortcuts(newEditor)\n  }\n  return newEditor\n}\n","import { GridCell, Element } from '@editablejs/models'\nimport { TABLE_CELL_KEY } from '../constants'\n\nexport interface TableCell extends GridCell {\n  type: typeof TABLE_CELL_KEY\n}\n\nexport const TableCell = {\n  create: (cell: Partial<Omit<TableCell, 'type'>> = {}): TableCell => {\n    return GridCell.create<TableCell>({\n      ...cell,\n      type: TABLE_CELL_KEY,\n    })\n  },\n\n  isTableCell: (value: any): value is TableCell => {\n    return Element.isElement(value) && value.type === TABLE_CELL_KEY\n  },\n}\n","export const TABLE_CELL_KEY = 'table-cell'\n","import { Editor } from '@editablejs/models'\n\nexport const defaultTableMinColWidth = 35\n\nexport interface TableCellOptions {\n  minColWidth?: number,\n  getWidth?: (width: number) => number\n}\n\nconst TABLE_CELL_OPTIONS = new WeakMap<Editor, TableCellOptions>()\n\nexport const getOptions = (editor: Editor): Required<TableCellOptions> => {\n  const options = TABLE_CELL_OPTIONS.get(editor) ?? {}\n\n  if (!options.minColWidth) options.minColWidth = defaultTableMinColWidth\n\n  return options as Required<TableCellOptions>\n}\n\nexport const setOptions = (editor: Editor, { minColWidth }: TableCellOptions) => {\n  TABLE_CELL_OPTIONS.set(editor, { minColWidth })\n}\n","import { css as _css } from \"styled-components\";\nimport _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport { Icon } from '@editablejs/ui';\nexport const TableStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-0\"\n})(({\n  isHover,\n  isSelected,\n  isDragging\n}) => [{\n  \"position\": \"relative\"\n}, _css`\n      padding: var(--table-padding-top) 0 10px;\n      > table {\n        ${{\n  \"width\": \"100%\",\n  \"tableLayout\": \"fixed\",\n  \"borderCollapse\": \"collapse\",\n  \"whiteSpace\": \"pre-wrap\"\n}}\n\n        tr,\n        td {\n          ${{\n  \"margin\": \"0px\",\n  \"padding\": \"0px\"\n}};\n        }\n      }\n    `, isDragging && {\n  \"cursor\": \"default\"\n}, (isHover || isSelected) && _css`\n        ${ColsHeaderStyles} {\n          display: flex;\n        }\n      `, (isHover || isSelected) && _css`\n        ${AllHeaderStyles},${RowsHeaderStyles} {\n          display: flex;\n        }\n      `]);\nexport const CellStyles = _styled.td.withConfig({\n  componentId: \"sc-1yra71v-1\"\n})(() => [_css`\n    border: 1px solid var(--table-border-color);\n    vertical-align: top;\n  `]);\nexport const CellInnerStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-2\"\n})(() => [_css`\n    padding: 6px;\n  `]);\nexport const RowStyles = _styled.tr.withConfig({\n  componentId: \"sc-1yra71v-3\"\n})(() => []);\nexport const SelectionStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-4\"\n})([\"background-color:rgba(0,106,254,0.12);position:absolute;background-color:rgba(0,106,254,0.12);pointer-events:none;cursor:default;\"]);\nexport const ColsHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-5\"\n})(() => [_css`\n    position: absolute;\n    left: 0;\n    top: calc(var(--table-item-wh) - 2px);\n    display: none;\n    border-left: none;\n  `]);\nexport const HeaderDragStyles = _styled(Icon).withConfig({\n  componentId: \"sc-1yra71v-6\"\n})([\"position:absolute;font-size:8px;color:#fff;display:none;\"]);\nexport const ColsHeaderItemStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-7\"\n})(({\n  isHover,\n  isFull,\n  allFull\n}) => [_css`\n      height: var(--table-item-wh);\n      background: var(--table-item-bg);\n      cursor: pointer;\n      border-bottom: 1px solid var(--table-border-color);\n      position: absolute;\n\n      &:hover {\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      }\n    `, isHover && _css`\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      `, isFull && _css`\n        background: var(--table-split-bg);\n        z-index: 3;\n\n        &:hover {\n          background: var(--table-split-bg);\n        }\n      `, isFull && !allFull && _css`\n        cursor: move;\n      `, isFull && !allFull && `${HeaderDragStyles} {\n      display: flex;\n      left: calc(50% - 8px);\n      transform: rotate(90deg);\n    }`]);\nexport const RowsHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-8\"\n})(() => [_css`\n    display: none;\n    position: absolute;\n    top: var(--table-padding-top);\n    left: calc(0px - var(--table-item-wh));\n  `]);\nexport const RowsHeaderItemStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-9\"\n})(({\n  isHover,\n  isFull,\n  allFull\n}) => [_css`\n      width: var(--table-item-wh);\n      background: var(--table-item-bg);\n      cursor: pointer;\n      border-right: 1px solid var(--table-border-color);\n      position: absolute;\n\n      &:hover {\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      }\n    `, isHover && _css`\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      `, isFull && _css`\n        background: var(--table-split-bg);\n        z-index: 3;\n\n        &:hover {\n          background: var(--table-split-bg);\n        }\n      `, isFull && !allFull && _css`\n        cursor: move;\n      `, isFull && !allFull && `${HeaderDragStyles} {\n      display: flex;\n      top: calc(50% - 4px);\n    }`]);\nexport const AllHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-10\"\n})(({\n  allFull\n}) => [_css`\n    position: absolute;\n    top: calc(var(--table-item-wh) - 2px);\n    left: calc(0px - var(--table-item-wh));\n    width: var(--table-item-wh);\n    height: var(--table-item-wh);\n    cursor: pointer;\n    border-right: 1px solid var(--table-border-color);\n    border-bottom: 1px solid var(--table-border-color);\n    background: var(--table-item-bg);\n    border-top-left-radius: 2px;\n    display: none;\n    &:hover {\n      background: var(--table-item-hover-bg);\n    }\n  `, allFull && _css`\n      background-color: var(--table-split-bg);\n      border-color: var(--table-split-bg);\n      border: none;\n\n      &:hover {\n        background-color: var(--table-split-bg);\n      }\n    `]);\nexport const ColsInsertStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-11\"\n})(({\n  isActive\n}) => [_css`\n    position: absolute;\n    top: calc(0px - var(--table-item-wh) + 2px);\n    line-height: 0;\n    cursor: pointer;\n    z-index: ${isActive ? 3 : 'unset'};\n    &:hover {\n      z-index: 3;\n\n      ${ColsInsertPlusStyles},${ColsInsertLineStyles} {\n        display: flex;\n      }\n    }\n  `, isActive && {\n  \"pointerEvents\": \"none\"\n}]);\nexport const ColsInsertPlusStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-12\"\n})(() => [_css`\n    color: var(--table-split-bg);\n    display: none;\n    font-size: 18px;\n    position: absolute;\n    top: -13px;\n    left: -7.5px;\n    align-items: flex-end;\n    justify-content: center;\n  `]);\nexport const ColsInsertLineStyles = _styled(ColsInsertPlusStyles).withConfig({\n  componentId: \"sc-1yra71v-13\"\n})([\"top:3px;left:0.5px;width:2px;background-color:var(--table-split-bg);\", \"\"], ({\n  isActive\n}) => isActive ? 'display: flex; z-index: 3; pointer-events: none;' : '');\nexport const ColsInsertIconStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-14\"\n})(() => [_css`\n    display: flex;\n    width: 6px;\n    height: 6px;\n    position: absolute;\n    top: 0;\n    left: -1.5px;\n    justify-content: center;\n  `]);\nexport const RowsInsertStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-15\"\n})(({\n  isActive\n}) => [_css`\n    position: absolute;\n    left: calc(0px - var(--table-item-wh) + 2px);\n    line-height: 0;\n    cursor: pointer;\n    z-index: ${isActive ? 3 : 'unset'};\n\n    &:hover {\n      z-index: 3;\n\n      ${RowsInsertPlusStyles},${RowsInsertLineStyles} {\n        display: flex;\n      }\n    }\n  `]);\nexport const RowsInsertIconStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-16\"\n})(() => [_css`\n    display: flex;\n    width: 6px;\n    height: 6px;\n    position: absolute;\n    top: 0;\n    left: 0;\n    justify-content: flex-start;\n  `]);\nexport const RowsInsertPlusStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-17\"\n})(() => [_css`\n    color: var(--table-split-bg);\n    display: none;\n    font-size: 18px;\n    position: absolute;\n    top: -7.5px;\n    left: -13px;\n    align-items: flex-end;\n    justify-content: flex-start;\n  `]);\nexport const RowsInsertLineStyles = _styled(ColsInsertPlusStyles).withConfig({\n  componentId: \"sc-1yra71v-18\"\n})([\"top:0.5px;left:3px;height:2px;background-color:var(--table-split-bg);\", \"\"], ({\n  isActive\n}) => isActive ? 'display: flex; z-index: 3; pointer-events: none;' : '');\nexport const ColsSplitStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-19\"\n})(({\n  isHover\n}) => [_css`\n    position: absolute;\n    top: 0;\n    height: var(--table-item-wh) + 2px;\n    padding: 0 1px;\n    z-index: 1;\n  `, isHover && {\n  \"zIndex\": \"3\",\n  \"cursor\": \"col-resize\"\n}]);\nexport const ColsSplitLineStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-20\"\n})(({\n  isHover\n}) => [_css`\n    background-color: transparent;\n    width: 1px;\n    height: 100%;\n  `, isHover && _css`\n      background-color: var(--table-split-bg);\n    `]);\nexport const RowsSplitStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-21\"\n})(({\n  isHover\n}) => [_css`\n    position: absolute;\n    left: 0;\n    width: calc(var(--table-item-bg) + 2px);\n    padding: 1px 0;\n    z-index: 1;\n  `, isHover && {\n  \"zIndex\": \"3\",\n  \"cursor\": \"row-resize\"\n}]);\nexport const RowsSplitLineStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-22\"\n})(({\n  isHover\n}) => [_css`\n    background-color: transparent;\n    width: 100%;\n    height: 1px;\n  `, isHover && _css`\n      background-color: var(--table-split-bg);\n    `]);","import { Editable } from '@editablejs/editor'\nimport { Editor, DOMNode, isDOMElement } from '@editablejs/models'\nimport { TABLE_CELL_KEY } from '../constants'\nimport { TableCell } from '../interfaces/table-cell'\n\nexport interface TableCellEditor extends Editor {}\n\nexport const TableCellEditor = {\n  isTableCell: (editor: Editor, value: any): value is TableCell => {\n    return TableCell.isTableCell(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_CELL_KEY] ?? []\n    return elements.some(e => TableCellEditor.isTableCell(editor, e[0]))\n  },\n\n  create: (editor: Editor, cell: Partial<Omit<TableCell, 'type'>> = {}): TableCell => {\n    return TableCell.create(cell)\n  },\n\n  closest: (editor: Editor, node: DOMNode): TableCell | null => {\n    const el = isDOMElement(node) ? node : node.parentElement\n    if (!el) return null\n    const tdEl = el.closest('td')\n    if (!tdEl) return null\n    const slateNode = Editable.toEditorNode(editor, tdEl)\n    if (TableCellEditor.isTableCell(editor, slateNode)) return slateNode\n    return null\n  },\n}\n","import { Editable } from '@editablejs/editor'\nimport { GridCell, Node } from '@editablejs/models'\nimport { setOptions, TableCellOptions } from '../options'\nimport { CellInnerStyles, CellStyles } from '../../components/styles'\nimport { TableCellEditor } from './table-cell-editor'\n\nexport const withTableCell = <T extends Editable>(editor: T, options: TableCellOptions = {}) => {\n  const newEditor = editor as T & TableCellEditor\n  const { renderElement, isGridCell } = editor\n\n  setOptions(editor, options)\n\n  newEditor.isGridCell = (node: Node): node is GridCell => {\n    return TableCellEditor.isTableCell(newEditor, node) || isGridCell(node)\n  }\n\n  newEditor.renderElement = props => {\n    const { element, attributes, children } = props\n    if (TableCellEditor.isTableCell(newEditor, element)) {\n      const { style, ...rest } = attributes\n      return (\n        <CellStyles\n          rowSpan={element.rowspan ?? 1}\n          colSpan={element.colspan ?? 1}\n          style={{ ...style, display: element.span ? 'none' : '' }}\n          {...rest}\n        >\n          <CellInnerStyles>{children}</CellInnerStyles>\n        </CellStyles>\n      )\n    }\n    return renderElement(props)\n  }\n\n  return newEditor\n}\n","import { TableLocale } from './types'\n\nconst locale: TableLocale = {\n  locale: 'zh-CN',\n  table: {\n    mergeCells: '',\n    splitCells: '',\n    moveRows: '{count}',\n    moveCols: '{count}',\n  },\n}\n\nexport default locale\n","import { TableLocale } from './types'\n\nconst locale: TableLocale = {\n  locale: 'en-US',\n  table: {\n    mergeCells: 'Merge cells',\n    splitCells: 'Split cells',\n    moveRows: 'Moving {count} rows',\n    moveCols: 'Moving {count} columns',\n  },\n}\n\nexport default locale\n","import zhCN from './zh_CN'\nimport enUS from './en_US'\nimport { TableLocale } from './types'\n\nconst locales: Record<string, TableLocale> = {\n  'en-US': enUS,\n  'zh-CN': zhCN,\n}\n\nexport type { TableLocale }\n\nexport default locales\n","import { Editor } from '@editablejs/models'\nimport * as React from 'react'\nimport { TableCellOptions } from '../cell'\nimport { setOptions as setCellOptions, getOptions as getCellOptions } from '../cell/options'\nimport { TableRowOptions } from '../row'\nimport { setOptions as setRowOptions, getOptions as getRowOptions } from '../row/options'\nimport { TableLocale } from '../locale'\n\nexport const TABLE_OPTIONS_WEAKMAP = new WeakMap<Editor, TableOptions>()\n\nexport interface TableOptions extends TableCellOptions, TableRowOptions {\n  locale?: Record<string, TableLocale>\n  shortcuts?: boolean\n}\n\nexport const getOptions = (editor: Editor): TableOptions => {\n  const options = TABLE_OPTIONS_WEAKMAP.get(editor) ?? {}\n  return {\n    ...options,\n    ...getCellOptions(editor),\n    ...getRowOptions(editor),\n  }\n}\n\nexport const setOptions = (editor: Editor, options: TableOptions) => {\n  setCellOptions(editor, options)\n  setRowOptions(editor, options)\n  TABLE_OPTIONS_WEAKMAP.set(editor, options)\n}\n\nexport const useTableOptions = (editor: Editor) => {\n  return React.useRef(getOptions(editor)).current\n}\n","import { Editor } from '@editablejs/models'\n\nexport interface TableRowOptions {\n  minRowHeight?: number\n}\n\nexport const defaultTableMinRowHeight = 35\n\nconst TABLE_ROW_OPTIONS = new WeakMap<Editor, TableRowOptions>()\n\nexport const getOptions = (editor: Editor): Required<TableRowOptions> => {\n  const options = TABLE_ROW_OPTIONS.get(editor) ?? {}\n\n  if (!options.minRowHeight) options.minRowHeight = defaultTableMinRowHeight\n\n  return options as Required<TableRowOptions>\n}\n\nexport const setOptions = (editor: Editor, { minRowHeight }: TableRowOptions) => {\n  TABLE_ROW_OPTIONS.set(editor, { minRowHeight })\n}\n","import { Element } from '@editablejs/models'\nimport { TableCell } from '../../cell'\nimport { TABLE_ROW_KEY } from '../constants'\n\nexport interface TableRow extends Element {\n  type: typeof TABLE_ROW_KEY\n  children: TableCell[]\n  height?: number\n}\n\nexport const TableRow = {\n  create: (\n    row: Partial<Omit<TableRow, 'type' | 'children'>> = {},\n    cells: Partial<Omit<TableCell, 'type' | 'children'>>[],\n  ): TableRow => {\n    const { height, ...rest } = row\n    return {\n      type: TABLE_ROW_KEY,\n      children: cells.map(cell => TableCell.create(cell)),\n      height,\n      ...rest,\n    }\n  },\n\n  isTableRow: (value: any): value is TableRow => {\n    return Element.isElement(value) && value.type === TABLE_ROW_KEY\n  },\n}\n","export const TABLE_ROW_KEY = 'table-row'\n","import { Editable, RenderElementProps, useIsomorphicLayoutEffect } from '@editablejs/editor'\nimport { Transforms, GridRow, Editor, Node } from '@editablejs/models'\nimport { useTableSize } from '../../context'\nimport { RowStyles } from '../../components/styles'\nimport { TableRow } from '../interfaces/table-row'\nimport { getOptions, setOptions, TableRowOptions } from '../options'\nimport { TableRowEditor } from './table-row-editor'\nimport { RowStore } from '../store'\n\ninterface TableRowProps extends React.AnchorHTMLAttributes<HTMLTableRowElement> {\n  editor: Editor\n  element: TableRow\n}\n\nconst Row: React.FC<TableRowProps & RenderElementProps<TableRow, HTMLTableRowElement>> = ({\n  editor,\n  element,\n  attributes,\n  children,\n}) => {\n  const { style, ref, ...rest } = attributes\n  // \n  const { width } = useTableSize()\n  // \n  useIsomorphicLayoutEffect(() => {\n    let maxHeight = getOptions(editor).minRowHeight\n    const rect = ref.current.getBoundingClientRect()\n    maxHeight = Math.max(maxHeight, rect.height)\n    if (maxHeight !== RowStore.getContentHeight(element)) {\n      RowStore.setContentHeight(element, maxHeight)\n    }\n  }, [editor, ref, width, element])\n\n  return (\n    <RowStyles ref={ref} style={{ height: element.height, ...style }} {...rest}>\n      {children}\n    </RowStyles>\n  )\n}\n\nexport const withTableRow = <T extends Editable>(editor: T, options: TableRowOptions = {}) => {\n  const newEditor = editor as T & TableRowEditor\n  const { renderElement, isGridRow } = editor\n\n  setOptions(editor, options)\n\n  newEditor.isGridRow = (node: Node): node is GridRow => {\n    return TableRowEditor.isTableRow(newEditor, node) || isGridRow(node)\n  }\n\n  newEditor.renderElement = props => {\n    const { element, attributes, children } = props\n    if (TableRowEditor.isTableRow(newEditor, element)) {\n      return (\n        <Row editor={editor} element={element} attributes={attributes}>\n          {children}\n        </Row>\n      )\n    }\n    return renderElement(props)\n  }\n\n  return newEditor\n}\n","import { GridSelected, GridSelection } from '@editablejs/models'\nimport * as React from 'react'\nimport { StoreApi, useStore } from 'zustand'\n\nexport interface TableContextInterface {\n  height: number\n  width: number\n  rows: number\n  cols: number\n  selection: GridSelection | null\n  selected: GridSelected\n}\n\nconst TableContext = React.createContext<StoreApi<TableContextInterface>>({} as any)\n\nexport { TableContext }\n\nexport const useTableStore = () => {\n  const context = React.useContext(TableContext)\n  if (!context) throw new Error('TableContext not found')\n  return useStore(context)\n}\n\nexport const useTableSize = () => {\n  const context = React.useContext(TableContext)\n  return useStore(context, state => ({ height: state.height, width: state.width }))\n}\n","import { Editor } from '@editablejs/models'\nimport { TableCell, TableCellEditor } from '../../cell'\nimport { TABLE_ROW_KEY } from '../constants'\nimport { TableRow } from '../interfaces/table-row'\n\nexport interface TableRowEditor extends Editor {}\n\nexport const TableRowEditor = {\n  isTableRow: (editor: Editor, value: any): value is TableRow => {\n    return TableRow.isTableRow(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_ROW_KEY] ?? []\n    return elements.some(e => TableRowEditor.isTableRow(editor, e[0]))\n  },\n\n  create: (\n    editor: Editor,\n    row: Partial<Omit<TableRow, 'type' | 'children'>> = {},\n    cells: Partial<Omit<TableCell, 'type' | 'children'>>[],\n  ): TableRow => {\n    return TableRow.create(row, cells)\n  },\n}\n","import { useIsomorphicLayoutEffect } from '@editablejs/editor'\nimport { GridRow } from '@editablejs/models'\nimport { useCallback, useEffect, useState } from 'react'\nimport create, { StoreApi, UseBoundStore } from 'zustand'\n\nconst ROW_STORE_WEAK_MAP = new WeakMap<GridRow, UseBoundStore<StoreApi<TableRowStore>>>()\n\nexport interface TableRowStore {\n  contentHeight: number\n}\n\nexport const getRowStore = (element: GridRow) => {\n  let store = ROW_STORE_WEAK_MAP.get(element)\n  if (!store) {\n    store = create<TableRowStore>(() => ({\n      contentHeight: element.height ?? 0,\n    }))\n    ROW_STORE_WEAK_MAP.set(element, store)\n  }\n  return store\n}\n\nexport const useRowStore = (element: GridRow) => {\n  const store = getRowStore(element)\n  useEffect(() => {\n    return () => {\n      ROW_STORE_WEAK_MAP.get(element)?.destroy()\n      ROW_STORE_WEAK_MAP.delete(element)\n    }\n  }, [element])\n  return store\n}\n\nexport const useRowContentHeight = (element: GridRow) => {\n  const store = useRowStore(element)\n  const state = store.getState()\n  return [\n    state.contentHeight,\n    (height: number) => {\n      store.setState({ contentHeight: height })\n    },\n  ] as const\n}\n\nexport const useTableRowContentHeights = (rows: GridRow[]) => {\n  const refresh = useCallback(() => {\n    return rows.map(row => {\n      const store = getRowStore(row)\n      return store.getState().contentHeight || row.height || 0\n    })\n  }, [rows])\n\n  const [heights, setHeights] = useState<number[]>(refresh)\n  useIsomorphicLayoutEffect(() => {\n    setHeights(refresh())\n  }, [refresh])\n\n  return heights\n}\n\nexport const RowStore = {\n  getStore: getRowStore,\n  getContentHeight: (element: GridRow) => {\n    const store = getRowStore(element)\n    return store.getState().contentHeight\n  },\n  setContentHeight: (element: GridRow, height: number) => {\n    const store = getRowStore(element)\n    store.setState({ contentHeight: height })\n  },\n}\n","import { Grid, Editor, Node } from '@editablejs/models'\nimport { TableOptions } from '../options'\nimport { TableCellEditor, TableCell } from '../../cell'\nimport { TableRow, TableRowEditor } from '../../row'\nimport { TABLE_KEY } from '../constants'\nimport { Table } from '../interfaces/table'\nimport { getOptions } from '../options'\nimport { defaultTableMinRowHeight } from '../../row/options'\nimport { calculateAverageColumnWidthInContainer } from '../utils'\n\nexport interface CreateTableOptions {\n  rows?: number\n  cols?: number\n}\nexport interface TableEditor extends Editor {\n  insertTable: (options?: CreateTableOptions | Table) => void\n}\n\nexport const TableEditor = {\n  isTableEditor: (editor: Editor): editor is TableEditor => {\n    return !!(editor as TableEditor).insertTable\n  },\n\n  isTable: (editor: Editor, value: Node): value is Table => {\n    return Table.isTable(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_KEY] ?? []\n    return elements.some(e => TableEditor.isTable(editor, e[0]))\n  },\n\n  getOptions,\n\n  create: (editor: Editor, options: CreateTableOptions = {}): Table => {\n    const { rows = 3, cols = 3 } = options\n    const { minRowHeight = defaultTableMinRowHeight, minColWidth = defaultTableMinRowHeight, getWidth } =\n      getOptions(editor)\n    const rowHeight = minRowHeight\n    const tableRows: TableRow[] = []\n    const tableColsWdith = calculateAverageColumnWidthInContainer(editor, {\n      cols,\n      minWidth: minColWidth,\n      getWidth: width => {\n        if (getWidth) {\n          return getWidth(width)\n        }\n        return width - 1\n      },\n    })\n    for (let r = 0; r < rows; r++) {\n      tableRows.push(\n        TableRowEditor.create(\n          editor,\n          { height: rowHeight },\n          tableColsWdith.map(() => TableCellEditor.create(editor)),\n        ),\n      )\n    }\n    return Grid.create<Table, TableRow, TableCell>(\n      {\n        type: TABLE_KEY,\n        colsWidth: tableColsWdith,\n      },\n      ...tableRows,\n    )\n  },\n\n  insert: (editor: Editor, options?: CreateTableOptions | Table) => {\n    if (TableEditor.isTableEditor(editor)) editor.insertTable(options)\n  },\n}\n","import { Editable } from '@editablejs/editor'\nimport { Editor } from '@editablejs/models'\n\nexport interface CalculateAverageColumnWidthInContainerOptions {\n  cols: number\n  minWidth?: number\n  getWidth?: (width: number) => number\n}\n\nexport const calculateAverageColumnWidthInContainer = (\n  editor: Editor,\n  options: CalculateAverageColumnWidthInContainerOptions,\n): number[] => {\n  const { minWidth = 10, cols, getWidth } = options\n  const container = Editable.toDOMNode(editor, editor)\n  const rect = container.getBoundingClientRect()\n  const width = getWidth ? getWidth(rect.width) : 0\n  const colWidth = Math.max(minWidth, Math.floor(width / cols))\n\n  const tableColsWdith = []\n  let colsWidth = 0\n  for (let c = 0; c < cols; c++) {\n    const cws = colsWidth + colWidth\n    if (c === cols - 1 && cws < width) {\n      const cw = width - colsWidth\n      colsWidth += cw\n      tableColsWdith.push(cw)\n    } else {\n      colsWidth = cws\n      tableColsWdith.push(colWidth)\n    }\n  }\n  return tableColsWdith\n}\n\nexport const adaptiveExpandColumnWidthInContainer = (\n  editor: Editor,\n  colsWidth: number[],\n  minWidth = 5,\n): number[] => {\n  const container = Editable.toDOMNode(editor, editor)\n  const containerRect = container.getBoundingClientRect()\n  const { width: containerWidth } = containerRect\n  const widths = colsWidth.concat()\n  let gridWidth = widths.reduce((a, b) => a + b, 0)\n  while (gridWidth > containerWidth) {\n    let minCount = 0\n    for (let i = 0; i < widths.length; i++) {\n      const w = widths[i]\n      if (w > minWidth) {\n        widths[i] = w - 1\n        gridWidth--\n        if (gridWidth <= containerWidth) break\n      } else {\n        minCount++\n      }\n    }\n    if (minCount === widths.length) break\n  }\n  return widths\n}\n","import {\n  RenderElementProps,\n  useCancellablePromises,\n  cancellablePromise,\n  Editable,\n  useIsomorphicLayoutEffect,\n  useNodeFocused,\n  useNodeSelected,\n  useGridSelection,\n  useGridSelected,\n  useReadOnly,\n} from '@editablejs/editor'\nimport {\n  Grid,\n  Editor,\n  Range,\n  Transforms,\n  isDOMNode,\n  GridCell,\n  isDOMHTMLElement,\n} from '@editablejs/models'\nimport { useComposedRefs } from '@editablejs/ui'\nimport * as React from 'react'\nimport { createStore } from 'zustand'\nimport { TableCellEditor } from '../cell'\nimport { TableContext } from '../context'\nimport { Dragging } from './dragging'\nimport { TableColHeader, TableRowHeader } from './header'\nimport { TableDrag, useTableDragging } from '../hooks/use-drag'\nimport { TableRow, TableRowEditor } from '../row'\nimport { TableSelection as TableSelectionElement } from './selection'\nimport { AllHeaderStyles, TableStyles } from './styles'\nimport { Table } from '../table/interfaces/table'\nimport { TableEditor } from '../table/plugin/table-editor'\nimport { useTableRowContentHeights } from '../row/store'\n\ninterface TableProps extends RenderElementProps<Table> {\n  editor: TableEditor\n}\n\nconst TableComponent: React.FC<TableProps> = ({ editor, element, attributes, children }) => {\n  const nodeSelected = useNodeSelected()\n\n  const nodeFocused = useNodeFocused()\n\n  const selection = useGridSelection()\n\n  const selected = useGridSelected()\n\n  const tableRef = React.useRef<HTMLTableElement>(null)\n\n  const dragging = useTableDragging()\n\n  /**\n   * \n   */\n  useIsomorphicLayoutEffect(() => {\n    const { selection } = editor\n    if (selection && nodeSelected && !nodeFocused) {\n      let { anchor, focus } = selection\n      const isBackward = Range.isBackward(selection)\n      const [startRow] = Editor.nodes<TableRow>(editor, {\n        at: anchor.path,\n        match: n => TableRowEditor.isTableRow(editor, n),\n      })\n      if (startRow) {\n        const [row, path] = startRow\n        const { children: cells } = row\n        const table = Grid.above(editor, path)\n        if (table) {\n          if (isBackward) {\n            const sel = Grid.edges(editor, table, {\n              start: [0, 0],\n              end: [path[path.length - 1], cells.length - 1],\n            })\n            anchor = Editor.start(editor, path.slice(0, -1).concat(sel.end))\n          } else {\n            const sel = Grid.edges(editor, table, {\n              start: [path[path.length - 1], 0],\n              end: [table[0].children.length - 1, cells.length - 1],\n            })\n            anchor = Editor.start(editor, path.slice(0, -1).concat(sel.start))\n          }\n        }\n      }\n      const [endRow] = Editor.nodes<TableRow>(editor, {\n        at: focus.path,\n        match: n => TableRowEditor.isTableRow(editor, n),\n      })\n      if (endRow) {\n        const [row, path] = endRow\n        const { children: cells } = row\n        const table = Grid.above(editor, path)\n        if (table) {\n          if (isBackward) {\n            const sel = Grid.edges(editor, table, {\n              start: [table[0].children.length - 1, cells.length - 1],\n              end: [path[path.length - 1], 0],\n            })\n            focus = Editor.start(editor, path.slice(0, -1).concat(sel.start))\n          } else {\n            const sel = Grid.edges(editor, table, {\n              start: [0, 0],\n              end: [path[path.length - 1], cells.length - 1],\n            })\n            focus = Editor.start(editor, path.slice(0, -1).concat(sel.end))\n          }\n        }\n      }\n      const range = { anchor, focus }\n      if (!Range.equals(selection, range)) Transforms.select(editor, range)\n    }\n  }, [nodeSelected, nodeFocused, editor, editor.selection])\n\n  const { colsWidth = [] } = element\n\n  const renderColgroup = () => {\n    const colgroup = []\n    for (let i = 0; i < colsWidth.length; i++) {\n      colgroup.push(<col width={colsWidth[i]} key={i} />)\n    }\n    return colgroup.length > 0 ? <colgroup>{colgroup}</colgroup> : null\n  }\n  // table width\n  const tableWidth = React.useMemo(() => {\n    let width = 0\n    for (let i = 0; i < colsWidth.length; i++) {\n      width += colsWidth[i]\n    }\n    return width\n  }, [colsWidth])\n  const rowContentHeights = useTableRowContentHeights(element.children)\n\n  // table height\n  const tableHeight = React.useMemo(() => {\n    const { children } = element\n    let height = 0\n    for (let i = 0; i < children.length; i++) {\n      const row = children[i]\n      height += (rowContentHeights[i] || row.height) ?? 0\n    }\n    return height\n  }, [element, rowContentHeights])\n\n  const [isHover, setHover] = React.useState(false)\n\n  const store = React.useMemo(\n    () =>\n      createStore(() => ({\n        selection,\n        selected,\n        width: tableWidth,\n        height: tableHeight,\n        rows: element.children.length,\n        cols: element.colsWidth?.length ?? 0,\n      })),\n    [\n      element.children.length,\n      element.colsWidth?.length,\n      selected,\n      selection,\n      tableHeight,\n      tableWidth,\n    ],\n  )\n\n  const renderAllHeader = () => {\n    const handleMouseDown = (e: React.MouseEvent) => {\n      e.preventDefault()\n      Grid.select(editor, Editable.findPath(editor, element))\n    }\n    return <AllHeaderStyles onMouseDown={handleMouseDown} allFull={selected.allFull} />\n  }\n\n  const cancellablePromisesApi = useCancellablePromises()\n\n  const handleMouseOver = React.useCallback(() => {\n    cancellablePromisesApi.clearPendingPromises()\n    if (~~selected.count) return\n    const wait = cancellablePromise(cancellablePromisesApi.delay(200))\n    cancellablePromisesApi.appendPendingPromise(wait)\n    wait.promise\n      .then(() => {\n        setHover(true)\n      })\n      .catch(err => {})\n  }, [selected, cancellablePromisesApi])\n\n  const handleMouseLeave = React.useCallback(() => {\n    cancellablePromisesApi.clearPendingPromises()\n    setHover(false)\n  }, [cancellablePromisesApi])\n\n  const getMoveColToIndex = React.useCallback(\n    (col: number, offsetX: number) => {\n      const cells = Grid.cells(editor, Editable.findPath(editor, element), {\n        startCol: col,\n        endCol: col,\n      })\n      let minCol = col\n      let maxCol = col\n      for (const [cell] of cells) {\n        const isSpan = GridCell.isSpan(cell)\n        if (isSpan) {\n          minCol = Math.min(minCol, cell.span[1])\n        } else {\n          maxCol = Math.max(maxCol, col + cell.colspan - 1)\n        }\n      }\n      const leftWidth = colsWidth[minCol] / 2\n      const rightWidth = colsWidth[maxCol] / 2\n      if (col === minCol && offsetX < leftWidth) {\n        return minCol\n      }\n      if (col === maxCol && offsetX > rightWidth) {\n        return maxCol + 1\n      }\n      return -1\n    },\n    [colsWidth, element, editor],\n  )\n\n  const getMoveRowToIndex = React.useCallback(\n    (row: number, offsetY: number) => {\n      const cells = Grid.cells(editor, Editable.findPath(editor, element), {\n        startRow: row,\n        endRow: row,\n      })\n      let minRow = row\n      let maxRow = row\n      for (const [cell] of cells) {\n        const isSpan = GridCell.isSpan(cell)\n        if (isSpan) {\n          minRow = Math.min(minRow, cell.span[0])\n        } else {\n          maxRow = Math.max(maxRow, row + cell.rowspan - 1)\n        }\n      }\n      const rows = element.children\n      const topHeight = (rows[minRow].height ?? 0) / 2\n      const bottomHeight = (rows[maxRow].height ?? 0) / 2\n\n      if (row === minRow && offsetY < topHeight) {\n        return minRow\n      }\n      if (row === maxRow && offsetY > bottomHeight) {\n        return maxRow + 1\n      }\n      return -1\n    },\n    [element, editor],\n  )\n\n  const handleMouseMove = React.useCallback(\n    (event: MouseEvent) => {\n      const tableEl = tableRef.current\n      const { target, offsetX, offsetY } = event\n      const { type, point } = TableDrag.getDrag()\n      if (\n        (type === 'col' && Math.abs(point.x - offsetX) < 3) ||\n        (type === 'row' && Math.abs(point.y - offsetY) < 3)\n      )\n        return\n\n      TableDrag.setPoint({ x: event.clientX, y: event.clientY })\n      if (!tableEl || !isDOMNode(target) || !tableEl.contains(target)) {\n        TableDrag.setTo(-1)\n        return\n      }\n\n      const cell = TableCellEditor.closest(editor, target)\n      let col = -1\n      let row = -1\n      if (!cell) {\n        if (isDOMHTMLElement(target)) {\n          const attrName = `data-table-${type}`\n          const header = target.closest(`[${attrName}]`)\n          if (header) {\n            const index = parseInt(header.getAttribute(attrName) || '-1')\n            col = type === 'col' ? index : -1\n            row = type === 'row' ? index : -1\n          }\n        }\n      } else {\n        const path = Editable.findPath(editor, cell)\n\n        col = path[path.length - 1]\n        row = path[path.length - 2]\n      }\n      if (col === -1 && row === -1) {\n        TableDrag.setTo(-1)\n        return\n      }\n      const to = type === 'row' ? getMoveRowToIndex(row, offsetY) : getMoveColToIndex(col, offsetX)\n      TableDrag.setTo(to)\n    },\n    [editor, getMoveRowToIndex, getMoveColToIndex],\n  )\n\n  React.useEffect(() => {\n    if (dragging) {\n      window.addEventListener('mousemove', handleMouseMove)\n    }\n\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove)\n    }\n  }, [dragging, handleMouseMove])\n\n  const composedRefs = useComposedRefs(attributes.ref, tableRef)\n\n  const [readOnly] = useReadOnly()\n\n  return (\n    <TableContext.Provider value={store}>\n      <TableStyles\n        isDragging={dragging}\n        isHover={isHover}\n        isSelected={!!~~selected.count}\n        {...attributes}\n        onMouseOver={handleMouseOver}\n        onMouseLeave={handleMouseLeave}\n        ref={composedRefs}\n      >\n        {!readOnly && <TableColHeader editor={editor} table={element} />}\n        {!readOnly && (\n          <TableRowHeader editor={editor} table={element} rowContentHeights={rowContentHeights} />\n        )}\n        {!readOnly && renderAllHeader()}\n        <table style={{ width: !tableWidth ? '' : tableWidth }}>\n          {renderColgroup()}\n          <tbody>{children}</tbody>\n        </table>\n        <TableSelectionElement editor={editor} table={element} />\n      </TableStyles>\n      <Dragging />\n    </TableContext.Provider>\n  )\n}\n\nexport { TableComponent }\n","import _styled2styled_components from 'styled-components';\n            const _styled2 = typeof _styled2styled_components.default === 'undefined' ? _styled2styled_components : _styled2styled_components.default;;\nimport _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport { Editable, useEditableStatic, useLocaleFormat } from '@editablejs/editor';\nimport { TableDrag, useTableDragCount, useTableDragPoint } from '../hooks/use-drag';\nexport const Dragging = () => {\n  const editor = useEditableStatic();\n  const point = useTableDragPoint();\n  const count = useTableDragCount();\n  const {\n    format\n  } = useLocaleFormat('table');\n  if (!point) return null;\n  const [x, y] = Editable.toRelativePosition(editor, point.x, point.y);\n  return <_StyledDiv style={{\n    transform: `translate(${x}px, ${y}px)`\n  }}>\n      <_StyledDiv2>\n        {format(TableDrag.getDragType() === 'col' ? 'moveCols' : 'moveRows', {\n        count\n      })}\n      </_StyledDiv2>\n    </_StyledDiv>;\n};\n\nvar _StyledDiv = _styled(\"div\").withConfig({\n  componentId: \"sc-9ij67v-0\"\n})({\n  \"pointerEvents\": \"none\",\n  \"position\": \"absolute\",\n  \"left\": \"0px\",\n  \"top\": \"0px\",\n  \"zIndex\": \"10\",\n  \"--tw-bg-opacity\": \"1\",\n  \"backgroundColor\": \"rgb(59 130 246 / var(--tw-bg-opacity))\",\n  \"paddingTop\": \"0.5rem\",\n  \"paddingBottom\": \"0.5rem\",\n  \"paddingLeft\": \"1rem\",\n  \"paddingRight\": \"1rem\",\n  \"--tw-text-opacity\": \"1\",\n  \"color\": \"rgb(255 255 255 / var(--tw-text-opacity))\",\n  \"opacity\": \"0.8\"\n});\n\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  componentId: \"sc-9ij67v-1\"\n})({\n  \"textAlign\": \"center\",\n  \"fontSize\": \"12px\"\n});","import * as React from 'react'\nimport create, { useStore } from 'zustand'\n\nexport interface TableDragStore {\n  drag: {\n    /**\n     *   \n     */\n    type: 'row' | 'col'\n    /**\n     * \n     */\n    from: number[]\n    /**\n     * \n     */\n    to: number\n    /**\n     * \n     */\n    point: Record<'x' | 'y', number>\n  } | null\n}\n\n/**\n * \n */\nconst store = create<TableDragStore>(() => ({\n  drag: null,\n}))\n\n/**\n * \n * @returns\n */\nexport const useTableDragging = () => {\n  const drag = useStore(store, state => state.drag !== null)\n\n  return React.useMemo(() => drag, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragTo = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.to ?? -1, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragPoint = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.point ?? null, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragCount = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.from.length ?? 0, [drag])\n}\n\n/**\n * \n */\nexport const TableDrag = {\n  /**\n   * \n   * @returns\n   */\n  isDragging: () => {\n    const { drag } = store.getState()\n    return drag !== null\n  },\n  /**\n   * \n   * @returns\n   */\n  getDrag: () => {\n    const { drag } = store.getState()\n    if (!drag) throw new Error('not drag')\n    return drag\n  },\n  /**\n   * \n   * @returns\n   */\n  getDragType: () => {\n    const { drag } = store.getState()\n    if (!drag) return null\n    return drag.type\n  },\n  /**\n   * \n   * @param type\n   * @param from\n   */\n  setFrom: (type: 'row' | 'col', from: number[], point: Record<'x' | 'y', number>) => {\n    store.setState({ drag: { type, from, point, to: -1 } })\n  },\n  /**\n   * \n   * @param to\n   * @returns\n   */\n  setTo: (to: number) => {\n    const { drag } = store.getState()\n    if (!drag) return\n    store.setState(() => {\n      const max = Math.max(...drag.from)\n      return {\n        drag: { ...drag, to: ~drag.from.concat(max + 1).indexOf(to) ? -1 : to },\n      }\n    })\n  },\n  /**\n   * \n   * @param point\n   * @returns\n   */\n  setPoint: (point: Record<'x' | 'y', number>) => {\n    const { drag } = store.getState()\n    if (!drag) return\n    store.setState({ drag: { ...drag, point } })\n  },\n  /**\n   * \n   */\n  clear: () => {\n    store.setState({ drag: null })\n  },\n}\n","import { Editable } from '@editablejs/editor'\nimport * as React from 'react'\nimport { InsertAction, SplitAction } from './action'\nimport { useTableStore } from '../context'\nimport { Editor, Grid } from '@editablejs/models'\nimport {\n  ColsHeaderItemStyles,\n  ColsHeaderStyles,\n  HeaderDragStyles,\n  RowsHeaderItemStyles,\n  RowsHeaderStyles,\n} from './styles'\nimport { TableDrag } from '../hooks/use-drag'\nimport { useTableRowContentHeights } from '../row/store'\nexport interface TableHeaderProps {\n  editor: Editor\n  table: Grid\n}\n\nconst TableRowHeaderDefault: React.FC<\n  TableHeaderProps & {\n    rowContentHeights: number[]\n  }\n> = ({ editor, table, rowContentHeights }) => {\n  const { width, selected, cols } = useTableStore()\n\n  const selectRow = React.useCallback(\n    (row: number) => {\n      Grid.select(editor, Editable.findPath(editor, table), {\n        start: [row, 0],\n        end: [row, cols - 1],\n      })\n    },\n    [editor, table, cols],\n  )\n\n  const handleWindowMouseUp = React.useCallback(() => {\n    if (TableDrag.isDragging()) {\n      const dragging = TableDrag.getDrag()\n\n      TableDrag.clear()\n      const { type, to, from } = dragging\n      if (to > -1 && type === 'row') {\n        const move = Math.min(...from)\n        const isBackward = to < move\n        Grid.moveRow(editor, {\n          move,\n          count: from.length,\n          to: isBackward ? to : to - 1,\n        })\n      }\n    }\n    window.removeEventListener('mouseup', handleWindowMouseUp)\n  }, [editor])\n\n  const handleMouseDown = React.useCallback(\n    (e: React.MouseEvent, row: number) => {\n      e.preventDefault()\n\n      if (selected.rowFull && !selected.allFull && ~selected.rows.indexOf(row)) {\n        // start drag\n        TableDrag.setFrom('row', [...selected.rows], {\n          x: e.clientX,\n          y: e.clientY,\n        })\n        window.addEventListener('mouseup', handleWindowMouseUp)\n      }\n    },\n    [selected.rowFull, selected.allFull, selected.rows, handleWindowMouseUp],\n  )\n\n  const handleMouseUp = React.useCallback(\n    (e: React.MouseEvent, row: number) => {\n      e.preventDefault()\n      selectRow(row)\n    },\n    [selectRow],\n  )\n\n  const headers = React.useMemo(() => {\n    const headers = []\n    headers.push(\n      <InsertAction\n        editor={editor}\n        table={table}\n        index={0}\n        width={width}\n        top={0}\n        key=\"insert--1\"\n      />,\n    )\n    let height = 0\n    const { children } = table\n    for (let i = 0; i < children.length; i++) {\n      const row = children[i]\n      const rowHeight = rowContentHeights[i] || row.height\n      const currentHeight = height\n      const h = rowHeight ?? 0\n      height += h\n      const hover = ~selected.rows.indexOf(i)\n      headers.push(\n        <RowsHeaderItemStyles\n          onMouseDown={e => handleMouseDown(e, i)}\n          onMouseUp={e => handleMouseUp(e, i)}\n          allFull={selected.allFull}\n          isHover={!!hover}\n          isFull={!!hover && selected.rowFull}\n          style={{ height: h + 1, top: currentHeight }}\n          key={i}\n          data-table-row={i}\n        >\n          <HeaderDragStyles name=\"drag\" />\n        </RowsHeaderItemStyles>,\n        <InsertAction\n          editor={editor}\n          table={table}\n          width={width}\n          index={i + 1}\n          top={height}\n          key={`insert-${i}`}\n        />,\n        <SplitAction\n          editor={editor}\n          table={table}\n          index={i}\n          width={width}\n          top={height}\n          key={`split-${i}`}\n        />,\n      )\n    }\n    return headers\n  }, [\n    editor,\n    handleMouseDown,\n    handleMouseUp,\n    selected.allFull,\n    selected.rowFull,\n    selected.rows,\n    table,\n    width,\n    rowContentHeights,\n  ])\n\n  return <RowsHeaderStyles>{headers}</RowsHeaderStyles>\n}\n\nconst TableRowHeader = TableRowHeaderDefault\n\nconst TableColHeaderDefault: React.FC<TableHeaderProps> = ({ editor, table }) => {\n  const { height, selected, rows } = useTableStore()\n\n  const selectColumn = React.useCallback(\n    (col: number) => {\n      Grid.select(editor, Editable.findPath(editor, table), {\n        start: [0, col],\n        end: [rows - 1, col],\n      })\n    },\n    [editor, table, rows],\n  )\n\n  const handleWindowMouseUp = React.useCallback(() => {\n    if (TableDrag.isDragging()) {\n      const dragging = TableDrag.getDrag()\n\n      TableDrag.clear()\n      const { type, to, from } = dragging\n      if (to > -1 && type === 'col') {\n        const move = Math.min(...from)\n        const isBackward = to < move\n        Grid.moveCol(editor, {\n          move,\n          count: from.length,\n          to: isBackward ? to : to - 1,\n        })\n      }\n    }\n    window.removeEventListener('mouseup', handleWindowMouseUp)\n  }, [editor])\n\n  const handleMouseDown = React.useCallback(\n    (e: React.MouseEvent, col: number) => {\n      e.preventDefault()\n      if (selected.colFull && !selected.allFull && ~selected.cols.indexOf(col)) {\n        // start drag\n        TableDrag.setFrom('col', [...selected.cols], {\n          x: e.clientX,\n          y: e.clientY,\n        })\n        window.addEventListener('mouseup', handleWindowMouseUp)\n      }\n    },\n    [handleWindowMouseUp, selected.allFull, selected.colFull, selected.cols],\n  )\n\n  const handleMouseUp = React.useCallback(\n    (e: React.MouseEvent, col: number) => {\n      e.preventDefault()\n      selectColumn(col)\n    },\n    [selectColumn],\n  )\n\n  const { colsWidth = [] } = table\n\n  const headers = React.useMemo(() => {\n    const headers = []\n    let width = 0\n    headers.push(\n      <InsertAction\n        editor={editor}\n        table={table}\n        index={0}\n        height={height}\n        left={0}\n        key=\"insert--1\"\n      />,\n    )\n    for (let i = 0; i < colsWidth.length; i++) {\n      const cw = colsWidth[i]\n      const currentWidth = width\n      width += cw\n      const hover = ~selected.cols.indexOf(i)\n      headers.push(\n        <ColsHeaderItemStyles\n          onMouseDown={e => handleMouseDown(e, i)}\n          onMouseUp={e => handleMouseUp(e, i)}\n          isHover={!!hover}\n          allFull={selected.allFull}\n          isFull={!!hover && selected.colFull}\n          style={{ width: cw + 1, left: currentWidth }}\n          key={i}\n          data-table-col={i}\n        >\n          <HeaderDragStyles name=\"drag\" />\n        </ColsHeaderItemStyles>,\n        <InsertAction\n          editor={editor}\n          table={table}\n          index={i + 1}\n          left={width}\n          height={height}\n          key={`insert-${i}`}\n        />,\n        <SplitAction\n          editor={editor}\n          table={table}\n          index={i}\n          height={height}\n          left={width}\n          key={`split-${i}`}\n        />,\n      )\n    }\n    return headers\n  }, [\n    colsWidth,\n    editor,\n    handleMouseDown,\n    handleMouseUp,\n    height,\n    selected.allFull,\n    selected.colFull,\n    selected.cols,\n    table,\n  ])\n\n  return <ColsHeaderStyles>{headers}</ColsHeaderStyles>\n}\n\nconst TableColHeader = React.memo(TableColHeaderDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  const { colsWidth, children } = table\n  const { colsWidth: nextColsWidth, children: nextChildren } = nextTable\n  return (\n    editor === nextEditor &&\n    children.length === nextChildren.length &&\n    colsWidth?.length === nextColsWidth?.length &&\n    !!colsWidth?.every((item, index) => item === nextColsWidth?.[index])\n  )\n})\n\nexport { TableColHeader, TableRowHeader }\n","import { cancellablePromise, Editable, useCancellablePromises, Slot } from '@editablejs/editor'\nimport { Transforms, Grid, Editor } from '@editablejs/models'\nimport * as React from 'react'\nimport { Icon } from '@editablejs/ui'\nimport {\n  ColsInsertIconStyles,\n  ColsInsertLineStyles,\n  ColsInsertPlusStyles,\n  ColsInsertStyles,\n  ColsSplitLineStyles,\n  ColsSplitStyles,\n  RowsInsertIconStyles,\n  RowsInsertLineStyles,\n  RowsInsertPlusStyles,\n  RowsInsertStyles,\n  RowsSplitLineStyles,\n  RowsSplitStyles,\n} from './styles'\nimport { TableDrag, useTableDragging, useTableDragTo } from '../hooks/use-drag'\nimport { TABLE_CELL_KEY } from '../cell/constants'\nimport { TableRow } from '../row'\nimport { TABLE_ROW_KEY } from '../row/constants'\nimport { useTableOptions } from '../table/options'\nimport { defaultTableMinColWidth } from '../cell/options'\nimport { defaultTableMinRowHeight } from '../row/options'\nimport { adaptiveExpandColumnWidthInContainer } from '../table/utils'\nimport { RowStore } from '../row/store'\n\nconst TYPE_COL = 'col'\nconst TYPE_ROW = 'row'\n\nexport interface TableActionProps {\n  editor: Editor\n  table: Grid\n  index: number\n  left?: number\n  top?: number\n  height?: number\n  width?: number\n}\n\n// insert action\nconst InsertActionDefault: React.FC<TableActionProps> = ({\n  editor,\n  table,\n  left,\n  top,\n  height,\n  width,\n  index,\n}) => {\n  if (left !== undefined) {\n    left -= 1\n  }\n  if (top !== undefined) {\n    top -= 1\n  }\n\n  if (height !== undefined) {\n    height += 11\n  }\n  if (width !== undefined) {\n    width += 11\n  }\n\n  const type = left !== undefined ? TYPE_COL : TYPE_ROW\n\n  const { minColWidth = defaultTableMinColWidth, minRowHeight = defaultTableMinRowHeight } =\n    useTableOptions(editor)\n\n  const draggingTo = useTableDragTo()\n\n  const handleMouseDown = (event: React.MouseEvent) => {\n    event.preventDefault()\n    if (type === TYPE_COL) {\n      let colWidth = minColWidth\n      const { colsWidth } = table\n      if (colsWidth) {\n        if (index >= colsWidth.length) colWidth = colsWidth[colsWidth.length - 1]\n        else {\n          colWidth = colsWidth[index]\n        }\n      }\n      const path = Editable.findPath(editor, table)\n      Grid.insertCol(editor, path, index, { type: TABLE_CELL_KEY }, colWidth, minColWidth)\n      const newGrid = Grid.above(editor, path)\n      if (newGrid && newGrid[0].colsWidth) {\n        const newColsWidth = adaptiveExpandColumnWidthInContainer(editor, newGrid[0].colsWidth)\n        Transforms.setNodes<Grid>(editor, { colsWidth: newColsWidth }, { at: path })\n      }\n    } else if (type === TYPE_ROW) {\n      Grid.insertRow(\n        editor,\n        Editable.findPath(editor, table),\n        index,\n        { type: TABLE_ROW_KEY },\n        { type: TABLE_CELL_KEY },\n        minRowHeight,\n      )\n    }\n  }\n\n  const draggingActive = React.useMemo(() => {\n    return draggingTo > -1 && draggingTo === index && TableDrag.getDrag().type === type\n  }, [draggingTo, index, type])\n\n  const InsertStyles = type === TYPE_COL ? ColsInsertStyles : RowsInsertStyles\n  const InsertIconStyles = type === TYPE_COL ? ColsInsertIconStyles : RowsInsertIconStyles\n  const InsertLineStyles = type === TYPE_COL ? ColsInsertLineStyles : RowsInsertLineStyles\n  const InsertPlusStyles = type === TYPE_COL ? ColsInsertPlusStyles : RowsInsertPlusStyles\n  return (\n    <InsertStyles isActive={draggingActive} style={{ left, top }} onMouseDown={handleMouseDown}>\n      <InsertIconStyles>\n        <svg width=\"3\" height=\"3\" viewBox=\"0 0 3 3\" fill=\"none\">\n          <circle cx=\"1.5\" cy=\"1.5\" r=\"1.5\" fill=\"#BBBFC4\"></circle>\n        </svg>\n      </InsertIconStyles>\n      {!draggingActive && (\n        <InsertPlusStyles>\n          <Icon name=\"plusCircle\" />\n        </InsertPlusStyles>\n      )}\n      <InsertLineStyles isActive={draggingActive} style={{ height, width }}></InsertLineStyles>\n    </InsertStyles>\n  )\n}\n\nexport const InsertAction = React.memo(InsertActionDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  return (\n    editor === nextEditor &&\n    table === nextTable &&\n    prev.index === next.index &&\n    prev.left === next.left &&\n    prev.top === next.top &&\n    prev.height === next.height &&\n    prev.width === next.width\n  )\n})\n\ninterface TableDragSplitOptions {\n  type: typeof TYPE_COL | typeof TYPE_ROW\n  x: number\n  y: number\n  start: number\n  end: number\n}\n// split action\nconst SplitActionDefault: React.FC<TableActionProps> = ({\n  editor,\n  table,\n  left,\n  top,\n  height,\n  width,\n  index,\n}) => {\n  if (height !== undefined) {\n    height += 8\n  }\n  if (width !== undefined) {\n    width += 8\n  }\n  // /31\n  if (left !== undefined) {\n    left -= 1\n  }\n  if (top !== undefined) {\n    top -= 1\n  }\n  const type = left !== undefined ? TYPE_COL : TYPE_ROW\n\n  const dragRef = React.useRef<TableDragSplitOptions | null>(null)\n  const { minColWidth = defaultTableMinColWidth, minRowHeight = defaultTableMinRowHeight } =\n    useTableOptions(editor)\n  const [isHover, setHover] = React.useState(false)\n  const isDrag = React.useRef(false)\n\n  const handleDragSplitMove = React.useCallback(\n    (e: MouseEvent) => {\n      if (!dragRef.current) return\n      const { type, x, y, start } = dragRef.current\n      const path = Editable.findPath(editor, table)\n      if (type === TYPE_COL) {\n        const { colsWidth } = table\n        if (!colsWidth) return\n        const cX = e.clientX\n        const val = cX - x\n        const newColsWidth = colsWidth.concat()\n        let width = newColsWidth[start] + val\n        width = Math.max(width, minColWidth)\n        if (start < newColsWidth.length - 1) {\n          width = Math.min(newColsWidth[start] + newColsWidth[start + 1] - minColWidth, width)\n          let nextW = newColsWidth[start + 1] - val\n          nextW = Math.max(nextW, minColWidth)\n          nextW = Math.min(newColsWidth[start] + newColsWidth[start + 1] - minColWidth, nextW)\n          newColsWidth[start + 1] = nextW\n        }\n        newColsWidth[start] = width\n        Transforms.setNodes<Grid>(editor, { colsWidth: newColsWidth }, { at: path })\n      } else if (type === TYPE_ROW) {\n        const row = table.children[start]\n        const { height, children: cells } = row\n        if (height) {\n          const ch = RowStore.getContentHeight(row)\n          const cY = e.clientY\n          const val = cY - y\n          let h = Math.max(height, ch!) + val\n          h = Math.max(h, minRowHeight)\n          let contentHeight = 0\n          for (let i = 0; i < cells.length; i++) {\n            const child = Editable.toDOMNode(editor, cells[i]).firstElementChild\n            if (!child) continue\n            const rect = child.getBoundingClientRect()\n            contentHeight = Math.max(contentHeight, rect.height + 2, minRowHeight)\n          }\n          if (h < contentHeight) {\n            h = contentHeight\n          }\n          RowStore.setContentHeight(row, contentHeight)\n          Transforms.setNodes<TableRow>(editor, { height: h }, { at: path.concat(start) })\n        }\n      }\n    },\n    [editor, minColWidth, minRowHeight, table],\n  )\n\n  const cancellablePromisesApi = useCancellablePromises()\n\n  const handleDragSplitUp = React.useCallback(() => {\n    dragRef.current = null\n    isDrag.current = false\n    setHover(false)\n    cancellablePromisesApi.clearPendingPromises()\n    window.removeEventListener('mousemove', handleDragSplitMove)\n    window.removeEventListener('mouseup', handleDragSplitUp)\n  }, [cancellablePromisesApi, dragRef, handleDragSplitMove])\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault()\n    dragRef.current = {\n      type,\n      x: e.clientX,\n      y: e.clientY,\n      start: index,\n      end: index,\n    }\n    isDrag.current = true\n    setHover(true)\n    window.addEventListener('mousemove', handleDragSplitMove)\n    window.addEventListener('mouseup', handleDragSplitUp)\n  }\n\n  const draging = useTableDragging()\n\n  React.useEffect(() => {\n    if (draging) Slot.update(editor, { active: false })\n  }, [draging, editor])\n  const handleMouseOver = React.useCallback(() => {\n    if (draging) return\n    cancellablePromisesApi.clearPendingPromises()\n    const wait = cancellablePromise(cancellablePromisesApi.delay(200))\n    cancellablePromisesApi.appendPendingPromise(wait)\n    wait.promise\n      .then(() => {\n        setHover(true)\n      })\n      .catch(err => {})\n  }, [cancellablePromisesApi, draging])\n\n  const handleMouseLeave = React.useCallback(() => {\n    if (isDrag.current) return\n    cancellablePromisesApi.clearPendingPromises()\n    setHover(false)\n  }, [cancellablePromisesApi])\n\n  const SplitStyles = type === TYPE_COL ? ColsSplitStyles : RowsSplitStyles\n  const SplitLineStyles = type === TYPE_COL ? ColsSplitLineStyles : RowsSplitLineStyles\n  if (draging) return null\n  return (\n    <SplitStyles\n      isHover={isHover && !draging}\n      style={{ left, top, height, width }}\n      onMouseDown={handleMouseDown}\n      onMouseOver={handleMouseOver}\n      onMouseLeave={handleMouseLeave}\n    >\n      <SplitLineStyles isHover={isHover && !draging} />\n    </SplitStyles>\n  )\n}\n\nexport const SplitAction = React.memo(SplitActionDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  return (\n    editor === nextEditor &&\n    table === nextTable &&\n    prev.index === next.index &&\n    prev.left === next.left &&\n    prev.top === next.top &&\n    prev.height === next.height &&\n    prev.width === next.width\n  )\n})\n","import {\n  Editable,\n  useGridSelectionRect,\n  useEditableStatic,\n  useIsomorphicLayoutEffect,\n  SelectionDrawing,\n} from '@editablejs/editor'\nimport { Editor, Grid } from '@editablejs/models'\nimport * as React from 'react'\nimport { SelectionStyles } from './styles'\n\nexport interface TableSelectionProps {\n  editor: Editor\n  table: Grid\n}\n\nconst TableSelection: React.FC<TableSelectionProps> = () => {\n  const editor = useEditableStatic()\n  const rect = useGridSelectionRect()\n\n  useIsomorphicLayoutEffect(() => {\n    if (rect) {\n      SelectionDrawing.setEnabled(editor, false)\n    } else {\n      SelectionDrawing.setEnabled(editor, true)\n    }\n\n    return () => {\n      SelectionDrawing.setEnabled(editor, true)\n    }\n  }, [editor, rect])\n\n  if (!rect) return null\n  const { top, left, width, height } = rect\n  return <SelectionStyles style={{ left, top, width, height }} />\n}\n\nexport { TableSelection }\n","import { Editable, Hotkey } from '@editablejs/editor'\nimport { Editor, Element, Range, Point, Transforms } from '@editablejs/models'\nimport { TableCellEditor } from '../../cell'\nimport { TableEditor } from './table-editor'\n\nconst findMatchedRange = (editor: Editor, at: Point) => {\n  const block = Editor.above(editor, {\n    at,\n    match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n  })\n  const path = block ? block[1] : []\n\n  const start = Editor.start(editor, path)\n  const range = { anchor: at, focus: start }\n  const beforeText = Editor.string(editor, range)\n  const reg = /^\\|([^\\|]+\\|)+$/\n  const match = beforeText.match(reg)\n  if (match) {\n    const columns = beforeText.slice(1, -1).split('|')\n\n    for (let i = 0; i < columns.length; i++) {\n      if (columns[i] === '') {\n        return\n      }\n    }\n    const start = Editor.start(editor, path)\n    const end = Editor.end(editor, path)\n    return {\n      columns,\n      range: {\n        anchor: {\n          path: start.path,\n          offset: start.offset + beforeText.length,\n        },\n        focus: end,\n      },\n      start,\n      end,\n    }\n  }\n}\nexport const withShortcuts = (editor: Editable) => {\n  const { onKeydown } = editor\n\n  editor.onKeydown = event => {\n    const { selection } = editor\n    if (\n      selection &&\n      Range.isCollapsed(selection) &&\n      !Editable.isComposing(editor) &&\n      Hotkey.match('enter', event) &&\n      !TableEditor.isActive(editor)\n    ) {\n      const anchor = Range.start(selection)\n      const match = findMatchedRange(editor, anchor)\n      if (match) {\n        event.preventDefault()\n        const { range, start, columns } = match\n        Transforms.delete(editor, {\n          at: {\n            anchor: start,\n            focus: range.anchor,\n          },\n        })\n        const cols = columns.map(column =>\n          TableCellEditor.create(editor, {\n            children: [{ text: column }],\n          }),\n        )\n        const table = TableEditor.create(editor, {\n          cols: cols.length,\n          rows: 2,\n        })\n        table.children[0].children = cols\n        TableEditor.insert(editor, table)\n        return\n      }\n    }\n    onKeydown(event)\n  }\n}\n"],"mappings":"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","names":["import_editor","import_models","import_models","import_styled_components","_styledstyled_components","_css","import_models","locale","getOptions","setOptions","getOptions","setOptions","import_models","import_editor","React","import_models","import_editor","import_zustand","store","create","store","import_jsx_runtime","getOptions","setOptions","import_models","import_editor","getOptions","import_editor","import_models","import_ui","React","import_zustand","import_styled_components","import_editor","React","import_zustand","create","import_jsx_runtime","_styled2styled_components","_styled","_styledstyled_components","_styled","import_editor","React","import_editor","import_models","React","import_ui","import_jsx_runtime","type","width","height","import_models","import_jsx_runtime","headers","import_editor","import_jsx_runtime","import_jsx_runtime","selection","children","store","import_editor","import_models","start","import_jsx_runtime","setOptions","options"]}
\ No newline at end of file
diff --git a/node_modules/@editablejs/plugin-table/dist/index.mjs b/node_modules/@editablejs/plugin-table/dist/index.mjs
index 8c370e2..1f5f693 100644
--- a/node_modules/@editablejs/plugin-table/dist/index.mjs
+++ b/node_modules/@editablejs/plugin-table/dist/index.mjs
@@ -15,7 +15,7 @@ import {
   setOptions2,
   setOptions3,
   useTableOptions
-} from "./chunk-DZEM4J5M.mjs";
+} from "./chunk-JBL3S7LE.mjs";
 import {
   TableCell
 } from "./chunk-PSFZODKE.mjs";
@@ -45,12 +45,6 @@ var TableStyles = _styled.div.withConfig({
 }) => [{
   "position": "relative"
 }, _css`
-      --table-padding-top: 14px;
-      --table-border-color: #d6d6d6;
-      --table-split-bg: ${"#4096ff"};
-      --table-item-bg: #f2f3f5;
-      --table-item-hover-bg: #e2e4e6;
-      --table-item-wh: 8px;
       padding: var(--table-padding-top) 0 10px;
       > table {
         ${{
@@ -571,13 +565,18 @@ var TableEditor = {
   getOptions: getOptions2,
   create: (editor, options = {}) => {
     const { rows = 3, cols = 3 } = options;
-    const { minRowHeight = defaultTableMinRowHeight, minColWidth = defaultTableMinRowHeight } = getOptions2(editor);
+    const { minRowHeight = defaultTableMinRowHeight, minColWidth = defaultTableMinRowHeight, getWidth } = getOptions2(editor);
     const rowHeight = minRowHeight;
     const tableRows = [];
     const tableColsWdith = calculateAverageColumnWidthInContainer(editor, {
       cols,
       minWidth: minColWidth,
-      getWidth: (width) => width - 1
+      getWidth: (width) => {
+        if (getWidth) {
+          return getWidth(width);
+        }
+        return width - 1;
+      }
     });
     for (let r = 0; r < rows; r++) {
       tableRows.push(
diff --git a/node_modules/@editablejs/plugin-table/dist/index.mjs.map b/node_modules/@editablejs/plugin-table/dist/index.mjs.map
index b035078..c190289 100644
--- a/node_modules/@editablejs/plugin-table/dist/index.mjs.map
+++ b/node_modules/@editablejs/plugin-table/dist/index.mjs.map
@@ -1 +1 @@
-{"version":3,"sources":["../src/table/plugin/with-table.tsx","../src/components/styles.tsx","../src/cell/plugin/table-cell-editor.ts","../src/cell/plugin/with-table-cell.tsx","../src/locale/zh_CN.ts","../src/locale/en_US.ts","../src/locale/index.ts","../src/row/plugin/with-table-row.tsx","../src/context.ts","../src/row/plugin/table-row-editor.ts","../src/row/store.ts","../src/table/plugin/table-editor.ts","../src/components/table.tsx","../src/components/dragging.tsx","../src/hooks/use-drag.ts","../src/components/header.tsx","../src/components/action.tsx","../src/components/selection.tsx","../src/table/plugin/with-shortcuts.ts"],"sourcesContent":["import { Editable, RenderElementProps, Locale } from '@editablejs/editor'\nimport { Transforms, Node, Grid } from '@editablejs/models'\nimport { withTableCell } from '../../cell'\nimport locale from '../../locale'\nimport { setOptions, TableOptions } from '../options'\nimport { withTableRow } from '../../row'\nimport { TableEditor } from './table-editor'\nimport { Table } from '../interfaces/table'\nimport { TableComponent } from '../../components/table'\nimport { withShortcuts } from './with-shortcuts'\n\nexport const withTable = <T extends Editable>(editor: T, options: TableOptions = {}) => {\n  let newEditor = editor as T & TableEditor\n\n  setOptions(newEditor, options)\n\n  const { locale: localeOptions = {} } = options\n  Locale.setLocale(newEditor, locale, localeOptions)\n\n  newEditor = withTableCell(newEditor)\n  newEditor = withTableRow(newEditor)\n\n  const { isGrid } = editor\n\n  newEditor.isGrid = (node: Node): node is Table => {\n    return TableEditor.isTable(newEditor, node) || isGrid(node)\n  }\n\n  newEditor.insertTable = options => {\n    const table = Table.isTable(options) ? options : TableEditor.create(newEditor, options)\n    Transforms.insertNodes(newEditor, table)\n    Grid.focus(newEditor, {\n      point: [0, 0],\n    })\n  }\n\n  const { renderElement } = newEditor\n\n  newEditor.renderElement = props => {\n    if (TableEditor.isTable(newEditor, props.element)) {\n      return <TableComponent editor={newEditor} {...(props as RenderElementProps<Table>)} />\n    }\n    return renderElement(props)\n  }\n\n  const { shortcuts } = options\n  if (shortcuts !== false) {\n    withShortcuts(newEditor)\n  }\n  return newEditor\n}\n","import { css as _css } from \"styled-components\";\nimport _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport { Icon } from '@editablejs/ui';\nexport const TableStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-0\"\n})(({\n  isHover,\n  isSelected,\n  isDragging\n}) => [{\n  \"position\": \"relative\"\n}, _css`\n      --table-padding-top: 14px;\n      --table-border-color: #d6d6d6;\n      --table-split-bg: ${\"#4096ff\"};\n      --table-item-bg: #f2f3f5;\n      --table-item-hover-bg: #e2e4e6;\n      --table-item-wh: 8px;\n      padding: var(--table-padding-top) 0 10px;\n      > table {\n        ${{\n  \"width\": \"100%\",\n  \"tableLayout\": \"fixed\",\n  \"borderCollapse\": \"collapse\",\n  \"whiteSpace\": \"pre-wrap\"\n}}\n\n        tr,\n        td {\n          ${{\n  \"margin\": \"0px\",\n  \"padding\": \"0px\"\n}};\n        }\n      }\n    `, isDragging && {\n  \"cursor\": \"default\"\n}, (isHover || isSelected) && _css`\n        ${ColsHeaderStyles} {\n          display: flex;\n        }\n      `, (isHover || isSelected) && _css`\n        ${AllHeaderStyles},${RowsHeaderStyles} {\n          display: flex;\n        }\n      `]);\nexport const CellStyles = _styled.td.withConfig({\n  componentId: \"sc-1yra71v-1\"\n})(() => [_css`\n    border: 1px solid var(--table-border-color);\n    vertical-align: top;\n  `]);\nexport const CellInnerStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-2\"\n})(() => [_css`\n    padding: 6px;\n  `]);\nexport const RowStyles = _styled.tr.withConfig({\n  componentId: \"sc-1yra71v-3\"\n})(() => []);\nexport const SelectionStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-4\"\n})([\"background-color:rgba(0,106,254,0.12);position:absolute;background-color:rgba(0,106,254,0.12);pointer-events:none;cursor:default;\"]);\nexport const ColsHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-5\"\n})(() => [_css`\n    position: absolute;\n    left: 0;\n    top: calc(var(--table-item-wh) - 2px);\n    display: none;\n    border-left: none;\n  `]);\nexport const HeaderDragStyles = _styled(Icon).withConfig({\n  componentId: \"sc-1yra71v-6\"\n})([\"position:absolute;font-size:8px;color:#fff;display:none;\"]);\nexport const ColsHeaderItemStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-7\"\n})(({\n  isHover,\n  isFull,\n  allFull\n}) => [_css`\n      height: var(--table-item-wh);\n      background: var(--table-item-bg);\n      cursor: pointer;\n      border-bottom: 1px solid var(--table-border-color);\n      position: absolute;\n\n      &:hover {\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      }\n    `, isHover && _css`\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      `, isFull && _css`\n        background: var(--table-split-bg);\n        z-index: 3;\n\n        &:hover {\n          background: var(--table-split-bg);\n        }\n      `, isFull && !allFull && _css`\n        cursor: move;\n      `, isFull && !allFull && `${HeaderDragStyles} {\n      display: flex;\n      left: calc(50% - 8px);\n      transform: rotate(90deg);\n    }`]);\nexport const RowsHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-8\"\n})(() => [_css`\n    display: none;\n    position: absolute;\n    top: var(--table-padding-top);\n    left: calc(0px - var(--table-item-wh));\n  `]);\nexport const RowsHeaderItemStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-9\"\n})(({\n  isHover,\n  isFull,\n  allFull\n}) => [_css`\n      width: var(--table-item-wh);\n      background: var(--table-item-bg);\n      cursor: pointer;\n      border-right: 1px solid var(--table-border-color);\n      position: absolute;\n\n      &:hover {\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      }\n    `, isHover && _css`\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      `, isFull && _css`\n        background: var(--table-split-bg);\n        z-index: 3;\n\n        &:hover {\n          background: var(--table-split-bg);\n        }\n      `, isFull && !allFull && _css`\n        cursor: move;\n      `, isFull && !allFull && `${HeaderDragStyles} {\n      display: flex;\n      top: calc(50% - 4px);\n    }`]);\nexport const AllHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-10\"\n})(({\n  allFull\n}) => [_css`\n    position: absolute;\n    top: calc(var(--table-item-wh) - 2px);\n    left: calc(0px - var(--table-item-wh));\n    width: var(--table-item-wh);\n    height: var(--table-item-wh);\n    cursor: pointer;\n    border-right: 1px solid var(--table-border-color);\n    border-bottom: 1px solid var(--table-border-color);\n    background: var(--table-item-bg);\n    border-top-left-radius: 2px;\n    display: none;\n    &:hover {\n      background: var(--table-item-hover-bg);\n    }\n  `, allFull && _css`\n      background-color: var(--table-split-bg);\n      border-color: var(--table-split-bg);\n      border: none;\n\n      &:hover {\n        background-color: var(--table-split-bg);\n      }\n    `]);\nexport const ColsInsertStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-11\"\n})(({\n  isActive\n}) => [_css`\n    position: absolute;\n    top: calc(0px - var(--table-item-wh) + 2px);\n    line-height: 0;\n    cursor: pointer;\n    z-index: ${isActive ? 3 : 'unset'};\n    &:hover {\n      z-index: 3;\n\n      ${ColsInsertPlusStyles},${ColsInsertLineStyles} {\n        display: flex;\n      }\n    }\n  `, isActive && {\n  \"pointerEvents\": \"none\"\n}]);\nexport const ColsInsertPlusStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-12\"\n})(() => [_css`\n    color: var(--table-split-bg);\n    display: none;\n    font-size: 18px;\n    position: absolute;\n    top: -13px;\n    left: -7.5px;\n    align-items: flex-end;\n    justify-content: center;\n  `]);\nexport const ColsInsertLineStyles = _styled(ColsInsertPlusStyles).withConfig({\n  componentId: \"sc-1yra71v-13\"\n})([\"top:3px;left:0.5px;width:2px;background-color:var(--table-split-bg);\", \"\"], ({\n  isActive\n}) => isActive ? 'display: flex; z-index: 3; pointer-events: none;' : '');\nexport const ColsInsertIconStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-14\"\n})(() => [_css`\n    display: flex;\n    width: 6px;\n    height: 6px;\n    position: absolute;\n    top: 0;\n    left: -1.5px;\n    justify-content: center;\n  `]);\nexport const RowsInsertStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-15\"\n})(({\n  isActive\n}) => [_css`\n    position: absolute;\n    left: calc(0px - var(--table-item-wh) + 2px);\n    line-height: 0;\n    cursor: pointer;\n    z-index: ${isActive ? 3 : 'unset'};\n\n    &:hover {\n      z-index: 3;\n\n      ${RowsInsertPlusStyles},${RowsInsertLineStyles} {\n        display: flex;\n      }\n    }\n  `]);\nexport const RowsInsertIconStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-16\"\n})(() => [_css`\n    display: flex;\n    width: 6px;\n    height: 6px;\n    position: absolute;\n    top: 0;\n    left: 0;\n    justify-content: flex-start;\n  `]);\nexport const RowsInsertPlusStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-17\"\n})(() => [_css`\n    color: var(--table-split-bg);\n    display: none;\n    font-size: 18px;\n    position: absolute;\n    top: -7.5px;\n    left: -13px;\n    align-items: flex-end;\n    justify-content: flex-start;\n  `]);\nexport const RowsInsertLineStyles = _styled(ColsInsertPlusStyles).withConfig({\n  componentId: \"sc-1yra71v-18\"\n})([\"top:0.5px;left:3px;height:2px;background-color:var(--table-split-bg);\", \"\"], ({\n  isActive\n}) => isActive ? 'display: flex; z-index: 3; pointer-events: none;' : '');\nexport const ColsSplitStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-19\"\n})(({\n  isHover\n}) => [_css`\n    position: absolute;\n    top: 0;\n    height: var(--table-item-wh) + 2px;\n    padding: 0 1px;\n    z-index: 1;\n  `, isHover && {\n  \"zIndex\": \"3\",\n  \"cursor\": \"col-resize\"\n}]);\nexport const ColsSplitLineStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-20\"\n})(({\n  isHover\n}) => [_css`\n    background-color: transparent;\n    width: 1px;\n    height: 100%;\n  `, isHover && _css`\n      background-color: var(--table-split-bg);\n    `]);\nexport const RowsSplitStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-21\"\n})(({\n  isHover\n}) => [_css`\n    position: absolute;\n    left: 0;\n    width: calc(var(--table-item-bg) + 2px);\n    padding: 1px 0;\n    z-index: 1;\n  `, isHover && {\n  \"zIndex\": \"3\",\n  \"cursor\": \"row-resize\"\n}]);\nexport const RowsSplitLineStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-22\"\n})(({\n  isHover\n}) => [_css`\n    background-color: transparent;\n    width: 100%;\n    height: 1px;\n  `, isHover && _css`\n      background-color: var(--table-split-bg);\n    `]);","import { Editable } from '@editablejs/editor'\nimport { Editor, DOMNode, isDOMElement } from '@editablejs/models'\nimport { TABLE_CELL_KEY } from '../constants'\nimport { TableCell } from '../interfaces/table-cell'\n\nexport interface TableCellEditor extends Editor {}\n\nexport const TableCellEditor = {\n  isTableCell: (editor: Editor, value: any): value is TableCell => {\n    return TableCell.isTableCell(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_CELL_KEY] ?? []\n    return elements.some(e => TableCellEditor.isTableCell(editor, e[0]))\n  },\n\n  create: (editor: Editor, cell: Partial<Omit<TableCell, 'type'>> = {}): TableCell => {\n    return TableCell.create(cell)\n  },\n\n  closest: (editor: Editor, node: DOMNode): TableCell | null => {\n    const el = isDOMElement(node) ? node : node.parentElement\n    if (!el) return null\n    const tdEl = el.closest('td')\n    if (!tdEl) return null\n    const slateNode = Editable.toEditorNode(editor, tdEl)\n    if (TableCellEditor.isTableCell(editor, slateNode)) return slateNode\n    return null\n  },\n}\n","import { Editable } from '@editablejs/editor'\nimport { GridCell, Node } from '@editablejs/models'\nimport { setOptions, TableCellOptions } from '../options'\nimport { CellInnerStyles, CellStyles } from '../../components/styles'\nimport { TableCellEditor } from './table-cell-editor'\n\nexport const withTableCell = <T extends Editable>(editor: T, options: TableCellOptions = {}) => {\n  const newEditor = editor as T & TableCellEditor\n  const { renderElement, isGridCell } = editor\n\n  setOptions(editor, options)\n\n  newEditor.isGridCell = (node: Node): node is GridCell => {\n    return TableCellEditor.isTableCell(newEditor, node) || isGridCell(node)\n  }\n\n  newEditor.renderElement = props => {\n    const { element, attributes, children } = props\n    if (TableCellEditor.isTableCell(newEditor, element)) {\n      const { style, ...rest } = attributes\n      return (\n        <CellStyles\n          rowSpan={element.rowspan ?? 1}\n          colSpan={element.colspan ?? 1}\n          style={{ ...style, display: element.span ? 'none' : '' }}\n          {...rest}\n        >\n          <CellInnerStyles>{children}</CellInnerStyles>\n        </CellStyles>\n      )\n    }\n    return renderElement(props)\n  }\n\n  return newEditor\n}\n","import { TableLocale } from './types'\n\nconst locale: TableLocale = {\n  locale: 'zh-CN',\n  table: {\n    mergeCells: '',\n    splitCells: '',\n    moveRows: '{count}',\n    moveCols: '{count}',\n  },\n}\n\nexport default locale\n","import { TableLocale } from './types'\n\nconst locale: TableLocale = {\n  locale: 'en-US',\n  table: {\n    mergeCells: 'Merge cells',\n    splitCells: 'Split cells',\n    moveRows: 'Moving {count} rows',\n    moveCols: 'Moving {count} columns',\n  },\n}\n\nexport default locale\n","import zhCN from './zh_CN'\nimport enUS from './en_US'\nimport { TableLocale } from './types'\n\nconst locales: Record<string, TableLocale> = {\n  'en-US': enUS,\n  'zh-CN': zhCN,\n}\n\nexport type { TableLocale }\n\nexport default locales\n","import { Editable, RenderElementProps, useIsomorphicLayoutEffect } from '@editablejs/editor'\nimport { Transforms, GridRow, Editor, Node } from '@editablejs/models'\nimport { useTableSize } from '../../context'\nimport { RowStyles } from '../../components/styles'\nimport { TableRow } from '../interfaces/table-row'\nimport { getOptions, setOptions, TableRowOptions } from '../options'\nimport { TableRowEditor } from './table-row-editor'\nimport { RowStore } from '../store'\n\ninterface TableRowProps extends React.AnchorHTMLAttributes<HTMLTableRowElement> {\n  editor: Editor\n  element: TableRow\n}\n\nconst Row: React.FC<TableRowProps & RenderElementProps<TableRow, HTMLTableRowElement>> = ({\n  editor,\n  element,\n  attributes,\n  children,\n}) => {\n  const { style, ref, ...rest } = attributes\n  // \n  const { width } = useTableSize()\n  // \n  useIsomorphicLayoutEffect(() => {\n    let maxHeight = getOptions(editor).minRowHeight\n    const rect = ref.current.getBoundingClientRect()\n    maxHeight = Math.max(maxHeight, rect.height)\n    if (maxHeight !== RowStore.getContentHeight(element)) {\n      RowStore.setContentHeight(element, maxHeight)\n    }\n  }, [editor, ref, width, element])\n\n  return (\n    <RowStyles ref={ref} style={{ height: element.height, ...style }} {...rest}>\n      {children}\n    </RowStyles>\n  )\n}\n\nexport const withTableRow = <T extends Editable>(editor: T, options: TableRowOptions = {}) => {\n  const newEditor = editor as T & TableRowEditor\n  const { renderElement, isGridRow } = editor\n\n  setOptions(editor, options)\n\n  newEditor.isGridRow = (node: Node): node is GridRow => {\n    return TableRowEditor.isTableRow(newEditor, node) || isGridRow(node)\n  }\n\n  newEditor.renderElement = props => {\n    const { element, attributes, children } = props\n    if (TableRowEditor.isTableRow(newEditor, element)) {\n      return (\n        <Row editor={editor} element={element} attributes={attributes}>\n          {children}\n        </Row>\n      )\n    }\n    return renderElement(props)\n  }\n\n  return newEditor\n}\n","import { GridSelected, GridSelection } from '@editablejs/models'\nimport * as React from 'react'\nimport { StoreApi, useStore } from 'zustand'\n\nexport interface TableContextInterface {\n  height: number\n  width: number\n  rows: number\n  cols: number\n  selection: GridSelection | null\n  selected: GridSelected\n}\n\nconst TableContext = React.createContext<StoreApi<TableContextInterface>>({} as any)\n\nexport { TableContext }\n\nexport const useTableStore = () => {\n  const context = React.useContext(TableContext)\n  if (!context) throw new Error('TableContext not found')\n  return useStore(context)\n}\n\nexport const useTableSize = () => {\n  const context = React.useContext(TableContext)\n  return useStore(context, state => ({ height: state.height, width: state.width }))\n}\n","import { Editor } from '@editablejs/models'\nimport { TableCell, TableCellEditor } from '../../cell'\nimport { TABLE_ROW_KEY } from '../constants'\nimport { TableRow } from '../interfaces/table-row'\n\nexport interface TableRowEditor extends Editor {}\n\nexport const TableRowEditor = {\n  isTableRow: (editor: Editor, value: any): value is TableRow => {\n    return TableRow.isTableRow(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_ROW_KEY] ?? []\n    return elements.some(e => TableRowEditor.isTableRow(editor, e[0]))\n  },\n\n  create: (\n    editor: Editor,\n    row: Partial<Omit<TableRow, 'type' | 'children'>> = {},\n    cells: Partial<Omit<TableCell, 'type' | 'children'>>[],\n  ): TableRow => {\n    return TableRow.create(row, cells)\n  },\n}\n","import { useIsomorphicLayoutEffect } from '@editablejs/editor'\nimport { GridRow } from '@editablejs/models'\nimport { useCallback, useEffect, useState } from 'react'\nimport create, { StoreApi, UseBoundStore } from 'zustand'\n\nconst ROW_STORE_WEAK_MAP = new WeakMap<GridRow, UseBoundStore<StoreApi<TableRowStore>>>()\n\nexport interface TableRowStore {\n  contentHeight: number\n}\n\nexport const getRowStore = (element: GridRow) => {\n  let store = ROW_STORE_WEAK_MAP.get(element)\n  if (!store) {\n    store = create<TableRowStore>(() => ({\n      contentHeight: element.height ?? 0,\n    }))\n    ROW_STORE_WEAK_MAP.set(element, store)\n  }\n  return store\n}\n\nexport const useRowStore = (element: GridRow) => {\n  const store = getRowStore(element)\n  useEffect(() => {\n    return () => {\n      ROW_STORE_WEAK_MAP.get(element)?.destroy()\n      ROW_STORE_WEAK_MAP.delete(element)\n    }\n  }, [element])\n  return store\n}\n\nexport const useRowContentHeight = (element: GridRow) => {\n  const store = useRowStore(element)\n  const state = store.getState()\n  return [\n    state.contentHeight,\n    (height: number) => {\n      store.setState({ contentHeight: height })\n    },\n  ] as const\n}\n\nexport const useTableRowContentHeights = (rows: GridRow[]) => {\n  const refresh = useCallback(() => {\n    return rows.map(row => {\n      const store = getRowStore(row)\n      return store.getState().contentHeight || row.height || 0\n    })\n  }, [rows])\n\n  const [heights, setHeights] = useState<number[]>(refresh)\n  useIsomorphicLayoutEffect(() => {\n    setHeights(refresh())\n  }, [refresh])\n\n  return heights\n}\n\nexport const RowStore = {\n  getStore: getRowStore,\n  getContentHeight: (element: GridRow) => {\n    const store = getRowStore(element)\n    return store.getState().contentHeight\n  },\n  setContentHeight: (element: GridRow, height: number) => {\n    const store = getRowStore(element)\n    store.setState({ contentHeight: height })\n  },\n}\n","import { Grid, Editor, Node } from '@editablejs/models'\nimport { TableOptions } from '../options'\nimport { TableCellEditor, TableCell } from '../../cell'\nimport { TableRow, TableRowEditor } from '../../row'\nimport { TABLE_KEY } from '../constants'\nimport { Table } from '../interfaces/table'\nimport { getOptions } from '../options'\nimport { defaultTableMinRowHeight } from '../../row/options'\nimport { calculateAverageColumnWidthInContainer } from '../utils'\n\nexport interface CreateTableOptions {\n  rows?: number\n  cols?: number\n}\nexport interface TableEditor extends Editor {\n  insertTable: (options?: CreateTableOptions | Table) => void\n}\n\nexport const TableEditor = {\n  isTableEditor: (editor: Editor): editor is TableEditor => {\n    return !!(editor as TableEditor).insertTable\n  },\n\n  isTable: (editor: Editor, value: Node): value is Table => {\n    return Table.isTable(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_KEY] ?? []\n    return elements.some(e => TableEditor.isTable(editor, e[0]))\n  },\n\n  getOptions,\n\n  create: (editor: Editor, options: CreateTableOptions = {}): Table => {\n    const { rows = 3, cols = 3 } = options\n    const { minRowHeight = defaultTableMinRowHeight, minColWidth = defaultTableMinRowHeight } =\n      getOptions(editor)\n    const rowHeight = minRowHeight\n    const tableRows: TableRow[] = []\n    const tableColsWdith = calculateAverageColumnWidthInContainer(editor, {\n      cols,\n      minWidth: minColWidth,\n      getWidth: width => width - 1,\n    })\n    for (let r = 0; r < rows; r++) {\n      tableRows.push(\n        TableRowEditor.create(\n          editor,\n          { height: rowHeight },\n          tableColsWdith.map(() => TableCellEditor.create(editor)),\n        ),\n      )\n    }\n    return Grid.create<Table, TableRow, TableCell>(\n      {\n        type: TABLE_KEY,\n        colsWidth: tableColsWdith,\n      },\n      ...tableRows,\n    )\n  },\n\n  insert: (editor: Editor, options?: CreateTableOptions | Table) => {\n    if (TableEditor.isTableEditor(editor)) editor.insertTable(options)\n  },\n}\n","import {\n  RenderElementProps,\n  useCancellablePromises,\n  cancellablePromise,\n  Editable,\n  useIsomorphicLayoutEffect,\n  useNodeFocused,\n  useNodeSelected,\n  useGridSelection,\n  useGridSelected,\n  useReadOnly,\n} from '@editablejs/editor'\nimport {\n  Grid,\n  Editor,\n  Range,\n  Transforms,\n  isDOMNode,\n  GridCell,\n  isDOMHTMLElement,\n} from '@editablejs/models'\nimport { useComposedRefs } from '@editablejs/ui'\nimport * as React from 'react'\nimport { createStore } from 'zustand'\nimport { TableCellEditor } from '../cell'\nimport { TableContext } from '../context'\nimport { Dragging } from './dragging'\nimport { TableColHeader, TableRowHeader } from './header'\nimport { TableDrag, useTableDragging } from '../hooks/use-drag'\nimport { TableRow, TableRowEditor } from '../row'\nimport { TableSelection as TableSelectionElement } from './selection'\nimport { AllHeaderStyles, TableStyles } from './styles'\nimport { Table } from '../table/interfaces/table'\nimport { TableEditor } from '../table/plugin/table-editor'\nimport { useTableRowContentHeights } from '../row/store'\n\ninterface TableProps extends RenderElementProps<Table> {\n  editor: TableEditor\n}\n\nconst TableComponent: React.FC<TableProps> = ({ editor, element, attributes, children }) => {\n  const nodeSelected = useNodeSelected()\n\n  const nodeFocused = useNodeFocused()\n\n  const selection = useGridSelection()\n\n  const selected = useGridSelected()\n\n  const tableRef = React.useRef<HTMLTableElement>(null)\n\n  const dragging = useTableDragging()\n\n  /**\n   * \n   */\n  useIsomorphicLayoutEffect(() => {\n    const { selection } = editor\n    if (selection && nodeSelected && !nodeFocused) {\n      let { anchor, focus } = selection\n      const isBackward = Range.isBackward(selection)\n      const [startRow] = Editor.nodes<TableRow>(editor, {\n        at: anchor.path,\n        match: n => TableRowEditor.isTableRow(editor, n),\n      })\n      if (startRow) {\n        const [row, path] = startRow\n        const { children: cells } = row\n        const table = Grid.above(editor, path)\n        if (table) {\n          if (isBackward) {\n            const sel = Grid.edges(editor, table, {\n              start: [0, 0],\n              end: [path[path.length - 1], cells.length - 1],\n            })\n            anchor = Editor.start(editor, path.slice(0, -1).concat(sel.end))\n          } else {\n            const sel = Grid.edges(editor, table, {\n              start: [path[path.length - 1], 0],\n              end: [table[0].children.length - 1, cells.length - 1],\n            })\n            anchor = Editor.start(editor, path.slice(0, -1).concat(sel.start))\n          }\n        }\n      }\n      const [endRow] = Editor.nodes<TableRow>(editor, {\n        at: focus.path,\n        match: n => TableRowEditor.isTableRow(editor, n),\n      })\n      if (endRow) {\n        const [row, path] = endRow\n        const { children: cells } = row\n        const table = Grid.above(editor, path)\n        if (table) {\n          if (isBackward) {\n            const sel = Grid.edges(editor, table, {\n              start: [table[0].children.length - 1, cells.length - 1],\n              end: [path[path.length - 1], 0],\n            })\n            focus = Editor.start(editor, path.slice(0, -1).concat(sel.start))\n          } else {\n            const sel = Grid.edges(editor, table, {\n              start: [0, 0],\n              end: [path[path.length - 1], cells.length - 1],\n            })\n            focus = Editor.start(editor, path.slice(0, -1).concat(sel.end))\n          }\n        }\n      }\n      const range = { anchor, focus }\n      if (!Range.equals(selection, range)) Transforms.select(editor, range)\n    }\n  }, [nodeSelected, nodeFocused, editor, editor.selection])\n\n  const { colsWidth = [] } = element\n\n  const renderColgroup = () => {\n    const colgroup = []\n    for (let i = 0; i < colsWidth.length; i++) {\n      colgroup.push(<col width={colsWidth[i]} key={i} />)\n    }\n    return colgroup.length > 0 ? <colgroup>{colgroup}</colgroup> : null\n  }\n  // table width\n  const tableWidth = React.useMemo(() => {\n    let width = 0\n    for (let i = 0; i < colsWidth.length; i++) {\n      width += colsWidth[i]\n    }\n    return width\n  }, [colsWidth])\n  const rowContentHeights = useTableRowContentHeights(element.children)\n\n  // table height\n  const tableHeight = React.useMemo(() => {\n    const { children } = element\n    let height = 0\n    for (let i = 0; i < children.length; i++) {\n      const row = children[i]\n      height += (rowContentHeights[i] || row.height) ?? 0\n    }\n    return height\n  }, [element, rowContentHeights])\n\n  const [isHover, setHover] = React.useState(false)\n\n  const store = React.useMemo(\n    () =>\n      createStore(() => ({\n        selection,\n        selected,\n        width: tableWidth,\n        height: tableHeight,\n        rows: element.children.length,\n        cols: element.colsWidth?.length ?? 0,\n      })),\n    [\n      element.children.length,\n      element.colsWidth?.length,\n      selected,\n      selection,\n      tableHeight,\n      tableWidth,\n    ],\n  )\n\n  const renderAllHeader = () => {\n    const handleMouseDown = (e: React.MouseEvent) => {\n      e.preventDefault()\n      Grid.select(editor, Editable.findPath(editor, element))\n    }\n    return <AllHeaderStyles onMouseDown={handleMouseDown} allFull={selected.allFull} />\n  }\n\n  const cancellablePromisesApi = useCancellablePromises()\n\n  const handleMouseOver = React.useCallback(() => {\n    cancellablePromisesApi.clearPendingPromises()\n    if (~~selected.count) return\n    const wait = cancellablePromise(cancellablePromisesApi.delay(200))\n    cancellablePromisesApi.appendPendingPromise(wait)\n    wait.promise\n      .then(() => {\n        setHover(true)\n      })\n      .catch(err => {})\n  }, [selected, cancellablePromisesApi])\n\n  const handleMouseLeave = React.useCallback(() => {\n    cancellablePromisesApi.clearPendingPromises()\n    setHover(false)\n  }, [cancellablePromisesApi])\n\n  const getMoveColToIndex = React.useCallback(\n    (col: number, offsetX: number) => {\n      const cells = Grid.cells(editor, Editable.findPath(editor, element), {\n        startCol: col,\n        endCol: col,\n      })\n      let minCol = col\n      let maxCol = col\n      for (const [cell] of cells) {\n        const isSpan = GridCell.isSpan(cell)\n        if (isSpan) {\n          minCol = Math.min(minCol, cell.span[1])\n        } else {\n          maxCol = Math.max(maxCol, col + cell.colspan - 1)\n        }\n      }\n      const leftWidth = colsWidth[minCol] / 2\n      const rightWidth = colsWidth[maxCol] / 2\n      if (col === minCol && offsetX < leftWidth) {\n        return minCol\n      }\n      if (col === maxCol && offsetX > rightWidth) {\n        return maxCol + 1\n      }\n      return -1\n    },\n    [colsWidth, element, editor],\n  )\n\n  const getMoveRowToIndex = React.useCallback(\n    (row: number, offsetY: number) => {\n      const cells = Grid.cells(editor, Editable.findPath(editor, element), {\n        startRow: row,\n        endRow: row,\n      })\n      let minRow = row\n      let maxRow = row\n      for (const [cell] of cells) {\n        const isSpan = GridCell.isSpan(cell)\n        if (isSpan) {\n          minRow = Math.min(minRow, cell.span[0])\n        } else {\n          maxRow = Math.max(maxRow, row + cell.rowspan - 1)\n        }\n      }\n      const rows = element.children\n      const topHeight = (rows[minRow].height ?? 0) / 2\n      const bottomHeight = (rows[maxRow].height ?? 0) / 2\n\n      if (row === minRow && offsetY < topHeight) {\n        return minRow\n      }\n      if (row === maxRow && offsetY > bottomHeight) {\n        return maxRow + 1\n      }\n      return -1\n    },\n    [element, editor],\n  )\n\n  const handleMouseMove = React.useCallback(\n    (event: MouseEvent) => {\n      const tableEl = tableRef.current\n      const { target, offsetX, offsetY } = event\n      const { type, point } = TableDrag.getDrag()\n      if (\n        (type === 'col' && Math.abs(point.x - offsetX) < 3) ||\n        (type === 'row' && Math.abs(point.y - offsetY) < 3)\n      )\n        return\n\n      TableDrag.setPoint({ x: event.clientX, y: event.clientY })\n      if (!tableEl || !isDOMNode(target) || !tableEl.contains(target)) {\n        TableDrag.setTo(-1)\n        return\n      }\n\n      const cell = TableCellEditor.closest(editor, target)\n      let col = -1\n      let row = -1\n      if (!cell) {\n        if (isDOMHTMLElement(target)) {\n          const attrName = `data-table-${type}`\n          const header = target.closest(`[${attrName}]`)\n          if (header) {\n            const index = parseInt(header.getAttribute(attrName) || '-1')\n            col = type === 'col' ? index : -1\n            row = type === 'row' ? index : -1\n          }\n        }\n      } else {\n        const path = Editable.findPath(editor, cell)\n\n        col = path[path.length - 1]\n        row = path[path.length - 2]\n      }\n      if (col === -1 && row === -1) {\n        TableDrag.setTo(-1)\n        return\n      }\n      const to = type === 'row' ? getMoveRowToIndex(row, offsetY) : getMoveColToIndex(col, offsetX)\n      TableDrag.setTo(to)\n    },\n    [editor, getMoveRowToIndex, getMoveColToIndex],\n  )\n\n  React.useEffect(() => {\n    if (dragging) {\n      window.addEventListener('mousemove', handleMouseMove)\n    }\n\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove)\n    }\n  }, [dragging, handleMouseMove])\n\n  const composedRefs = useComposedRefs(attributes.ref, tableRef)\n\n  const [readOnly] = useReadOnly()\n\n  return (\n    <TableContext.Provider value={store}>\n      <TableStyles\n        isDragging={dragging}\n        isHover={isHover}\n        isSelected={!!~~selected.count}\n        {...attributes}\n        onMouseOver={handleMouseOver}\n        onMouseLeave={handleMouseLeave}\n        ref={composedRefs}\n      >\n        {!readOnly && <TableColHeader editor={editor} table={element} />}\n        {!readOnly && (\n          <TableRowHeader editor={editor} table={element} rowContentHeights={rowContentHeights} />\n        )}\n        {!readOnly && renderAllHeader()}\n        <table style={{ width: !tableWidth ? '' : tableWidth }}>\n          {renderColgroup()}\n          <tbody>{children}</tbody>\n        </table>\n        <TableSelectionElement editor={editor} table={element} />\n      </TableStyles>\n      <Dragging />\n    </TableContext.Provider>\n  )\n}\n\nexport { TableComponent }\n","import _styled2styled_components from 'styled-components';\n            const _styled2 = typeof _styled2styled_components.default === 'undefined' ? _styled2styled_components : _styled2styled_components.default;;\nimport _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport { Editable, useEditableStatic, useLocaleFormat } from '@editablejs/editor';\nimport { TableDrag, useTableDragCount, useTableDragPoint } from '../hooks/use-drag';\nexport const Dragging = () => {\n  const editor = useEditableStatic();\n  const point = useTableDragPoint();\n  const count = useTableDragCount();\n  const {\n    format\n  } = useLocaleFormat('table');\n  if (!point) return null;\n  const [x, y] = Editable.toRelativePosition(editor, point.x, point.y);\n  return <_StyledDiv style={{\n    transform: `translate(${x}px, ${y}px)`\n  }}>\n      <_StyledDiv2>\n        {format(TableDrag.getDragType() === 'col' ? 'moveCols' : 'moveRows', {\n        count\n      })}\n      </_StyledDiv2>\n    </_StyledDiv>;\n};\n\nvar _StyledDiv = _styled(\"div\").withConfig({\n  componentId: \"sc-9ij67v-0\"\n})({\n  \"pointerEvents\": \"none\",\n  \"position\": \"absolute\",\n  \"left\": \"0px\",\n  \"top\": \"0px\",\n  \"zIndex\": \"10\",\n  \"--tw-bg-opacity\": \"1\",\n  \"backgroundColor\": \"rgb(59 130 246 / var(--tw-bg-opacity))\",\n  \"paddingTop\": \"0.5rem\",\n  \"paddingBottom\": \"0.5rem\",\n  \"paddingLeft\": \"1rem\",\n  \"paddingRight\": \"1rem\",\n  \"--tw-text-opacity\": \"1\",\n  \"color\": \"rgb(255 255 255 / var(--tw-text-opacity))\",\n  \"opacity\": \"0.8\"\n});\n\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  componentId: \"sc-9ij67v-1\"\n})({\n  \"textAlign\": \"center\",\n  \"fontSize\": \"12px\"\n});","import * as React from 'react'\nimport create, { useStore } from 'zustand'\n\nexport interface TableDragStore {\n  drag: {\n    /**\n     *   \n     */\n    type: 'row' | 'col'\n    /**\n     * \n     */\n    from: number[]\n    /**\n     * \n     */\n    to: number\n    /**\n     * \n     */\n    point: Record<'x' | 'y', number>\n  } | null\n}\n\n/**\n * \n */\nconst store = create<TableDragStore>(() => ({\n  drag: null,\n}))\n\n/**\n * \n * @returns\n */\nexport const useTableDragging = () => {\n  const drag = useStore(store, state => state.drag !== null)\n\n  return React.useMemo(() => drag, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragTo = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.to ?? -1, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragPoint = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.point ?? null, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragCount = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.from.length ?? 0, [drag])\n}\n\n/**\n * \n */\nexport const TableDrag = {\n  /**\n   * \n   * @returns\n   */\n  isDragging: () => {\n    const { drag } = store.getState()\n    return drag !== null\n  },\n  /**\n   * \n   * @returns\n   */\n  getDrag: () => {\n    const { drag } = store.getState()\n    if (!drag) throw new Error('not drag')\n    return drag\n  },\n  /**\n   * \n   * @returns\n   */\n  getDragType: () => {\n    const { drag } = store.getState()\n    if (!drag) return null\n    return drag.type\n  },\n  /**\n   * \n   * @param type\n   * @param from\n   */\n  setFrom: (type: 'row' | 'col', from: number[], point: Record<'x' | 'y', number>) => {\n    store.setState({ drag: { type, from, point, to: -1 } })\n  },\n  /**\n   * \n   * @param to\n   * @returns\n   */\n  setTo: (to: number) => {\n    const { drag } = store.getState()\n    if (!drag) return\n    store.setState(() => {\n      const max = Math.max(...drag.from)\n      return {\n        drag: { ...drag, to: ~drag.from.concat(max + 1).indexOf(to) ? -1 : to },\n      }\n    })\n  },\n  /**\n   * \n   * @param point\n   * @returns\n   */\n  setPoint: (point: Record<'x' | 'y', number>) => {\n    const { drag } = store.getState()\n    if (!drag) return\n    store.setState({ drag: { ...drag, point } })\n  },\n  /**\n   * \n   */\n  clear: () => {\n    store.setState({ drag: null })\n  },\n}\n","import { Editable } from '@editablejs/editor'\nimport * as React from 'react'\nimport { InsertAction, SplitAction } from './action'\nimport { useTableStore } from '../context'\nimport { Editor, Grid } from '@editablejs/models'\nimport {\n  ColsHeaderItemStyles,\n  ColsHeaderStyles,\n  HeaderDragStyles,\n  RowsHeaderItemStyles,\n  RowsHeaderStyles,\n} from './styles'\nimport { TableDrag } from '../hooks/use-drag'\nimport { useTableRowContentHeights } from '../row/store'\nexport interface TableHeaderProps {\n  editor: Editor\n  table: Grid\n}\n\nconst TableRowHeaderDefault: React.FC<\n  TableHeaderProps & {\n    rowContentHeights: number[]\n  }\n> = ({ editor, table, rowContentHeights }) => {\n  const { width, selected, cols } = useTableStore()\n\n  const selectRow = React.useCallback(\n    (row: number) => {\n      Grid.select(editor, Editable.findPath(editor, table), {\n        start: [row, 0],\n        end: [row, cols - 1],\n      })\n    },\n    [editor, table, cols],\n  )\n\n  const handleWindowMouseUp = React.useCallback(() => {\n    if (TableDrag.isDragging()) {\n      const dragging = TableDrag.getDrag()\n\n      TableDrag.clear()\n      const { type, to, from } = dragging\n      if (to > -1 && type === 'row') {\n        const move = Math.min(...from)\n        const isBackward = to < move\n        Grid.moveRow(editor, {\n          move,\n          count: from.length,\n          to: isBackward ? to : to - 1,\n        })\n      }\n    }\n    window.removeEventListener('mouseup', handleWindowMouseUp)\n  }, [editor])\n\n  const handleMouseDown = React.useCallback(\n    (e: React.MouseEvent, row: number) => {\n      e.preventDefault()\n\n      if (selected.rowFull && !selected.allFull && ~selected.rows.indexOf(row)) {\n        // start drag\n        TableDrag.setFrom('row', [...selected.rows], {\n          x: e.clientX,\n          y: e.clientY,\n        })\n        window.addEventListener('mouseup', handleWindowMouseUp)\n      }\n    },\n    [selected.rowFull, selected.allFull, selected.rows, handleWindowMouseUp],\n  )\n\n  const handleMouseUp = React.useCallback(\n    (e: React.MouseEvent, row: number) => {\n      e.preventDefault()\n      selectRow(row)\n    },\n    [selectRow],\n  )\n\n  const headers = React.useMemo(() => {\n    const headers = []\n    headers.push(\n      <InsertAction\n        editor={editor}\n        table={table}\n        index={0}\n        width={width}\n        top={0}\n        key=\"insert--1\"\n      />,\n    )\n    let height = 0\n    const { children } = table\n    for (let i = 0; i < children.length; i++) {\n      const row = children[i]\n      const rowHeight = rowContentHeights[i] || row.height\n      const currentHeight = height\n      const h = rowHeight ?? 0\n      height += h\n      const hover = ~selected.rows.indexOf(i)\n      headers.push(\n        <RowsHeaderItemStyles\n          onMouseDown={e => handleMouseDown(e, i)}\n          onMouseUp={e => handleMouseUp(e, i)}\n          allFull={selected.allFull}\n          isHover={!!hover}\n          isFull={!!hover && selected.rowFull}\n          style={{ height: h + 1, top: currentHeight }}\n          key={i}\n          data-table-row={i}\n        >\n          <HeaderDragStyles name=\"drag\" />\n        </RowsHeaderItemStyles>,\n        <InsertAction\n          editor={editor}\n          table={table}\n          width={width}\n          index={i + 1}\n          top={height}\n          key={`insert-${i}`}\n        />,\n        <SplitAction\n          editor={editor}\n          table={table}\n          index={i}\n          width={width}\n          top={height}\n          key={`split-${i}`}\n        />,\n      )\n    }\n    return headers\n  }, [\n    editor,\n    handleMouseDown,\n    handleMouseUp,\n    selected.allFull,\n    selected.rowFull,\n    selected.rows,\n    table,\n    width,\n    rowContentHeights,\n  ])\n\n  return <RowsHeaderStyles>{headers}</RowsHeaderStyles>\n}\n\nconst TableRowHeader = TableRowHeaderDefault\n\nconst TableColHeaderDefault: React.FC<TableHeaderProps> = ({ editor, table }) => {\n  const { height, selected, rows } = useTableStore()\n\n  const selectColumn = React.useCallback(\n    (col: number) => {\n      Grid.select(editor, Editable.findPath(editor, table), {\n        start: [0, col],\n        end: [rows - 1, col],\n      })\n    },\n    [editor, table, rows],\n  )\n\n  const handleWindowMouseUp = React.useCallback(() => {\n    if (TableDrag.isDragging()) {\n      const dragging = TableDrag.getDrag()\n\n      TableDrag.clear()\n      const { type, to, from } = dragging\n      if (to > -1 && type === 'col') {\n        const move = Math.min(...from)\n        const isBackward = to < move\n        Grid.moveCol(editor, {\n          move,\n          count: from.length,\n          to: isBackward ? to : to - 1,\n        })\n      }\n    }\n    window.removeEventListener('mouseup', handleWindowMouseUp)\n  }, [editor])\n\n  const handleMouseDown = React.useCallback(\n    (e: React.MouseEvent, col: number) => {\n      e.preventDefault()\n      if (selected.colFull && !selected.allFull && ~selected.cols.indexOf(col)) {\n        // start drag\n        TableDrag.setFrom('col', [...selected.cols], {\n          x: e.clientX,\n          y: e.clientY,\n        })\n        window.addEventListener('mouseup', handleWindowMouseUp)\n      }\n    },\n    [handleWindowMouseUp, selected.allFull, selected.colFull, selected.cols],\n  )\n\n  const handleMouseUp = React.useCallback(\n    (e: React.MouseEvent, col: number) => {\n      e.preventDefault()\n      selectColumn(col)\n    },\n    [selectColumn],\n  )\n\n  const { colsWidth = [] } = table\n\n  const headers = React.useMemo(() => {\n    const headers = []\n    let width = 0\n    headers.push(\n      <InsertAction\n        editor={editor}\n        table={table}\n        index={0}\n        height={height}\n        left={0}\n        key=\"insert--1\"\n      />,\n    )\n    for (let i = 0; i < colsWidth.length; i++) {\n      const cw = colsWidth[i]\n      const currentWidth = width\n      width += cw\n      const hover = ~selected.cols.indexOf(i)\n      headers.push(\n        <ColsHeaderItemStyles\n          onMouseDown={e => handleMouseDown(e, i)}\n          onMouseUp={e => handleMouseUp(e, i)}\n          isHover={!!hover}\n          allFull={selected.allFull}\n          isFull={!!hover && selected.colFull}\n          style={{ width: cw + 1, left: currentWidth }}\n          key={i}\n          data-table-col={i}\n        >\n          <HeaderDragStyles name=\"drag\" />\n        </ColsHeaderItemStyles>,\n        <InsertAction\n          editor={editor}\n          table={table}\n          index={i + 1}\n          left={width}\n          height={height}\n          key={`insert-${i}`}\n        />,\n        <SplitAction\n          editor={editor}\n          table={table}\n          index={i}\n          height={height}\n          left={width}\n          key={`split-${i}`}\n        />,\n      )\n    }\n    return headers\n  }, [\n    colsWidth,\n    editor,\n    handleMouseDown,\n    handleMouseUp,\n    height,\n    selected.allFull,\n    selected.colFull,\n    selected.cols,\n    table,\n  ])\n\n  return <ColsHeaderStyles>{headers}</ColsHeaderStyles>\n}\n\nconst TableColHeader = React.memo(TableColHeaderDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  const { colsWidth, children } = table\n  const { colsWidth: nextColsWidth, children: nextChildren } = nextTable\n  return (\n    editor === nextEditor &&\n    children.length === nextChildren.length &&\n    colsWidth?.length === nextColsWidth?.length &&\n    !!colsWidth?.every((item, index) => item === nextColsWidth?.[index])\n  )\n})\n\nexport { TableColHeader, TableRowHeader }\n","import { cancellablePromise, Editable, useCancellablePromises, Slot } from '@editablejs/editor'\nimport { Transforms, Grid, Editor } from '@editablejs/models'\nimport * as React from 'react'\nimport { Icon } from '@editablejs/ui'\nimport {\n  ColsInsertIconStyles,\n  ColsInsertLineStyles,\n  ColsInsertPlusStyles,\n  ColsInsertStyles,\n  ColsSplitLineStyles,\n  ColsSplitStyles,\n  RowsInsertIconStyles,\n  RowsInsertLineStyles,\n  RowsInsertPlusStyles,\n  RowsInsertStyles,\n  RowsSplitLineStyles,\n  RowsSplitStyles,\n} from './styles'\nimport { TableDrag, useTableDragging, useTableDragTo } from '../hooks/use-drag'\nimport { TABLE_CELL_KEY } from '../cell/constants'\nimport { TableRow } from '../row'\nimport { TABLE_ROW_KEY } from '../row/constants'\nimport { useTableOptions } from '../table/options'\nimport { defaultTableMinColWidth } from '../cell/options'\nimport { defaultTableMinRowHeight } from '../row/options'\nimport { adaptiveExpandColumnWidthInContainer } from '../table/utils'\nimport { RowStore } from '../row/store'\n\nconst TYPE_COL = 'col'\nconst TYPE_ROW = 'row'\n\nexport interface TableActionProps {\n  editor: Editor\n  table: Grid\n  index: number\n  left?: number\n  top?: number\n  height?: number\n  width?: number\n}\n\n// insert action\nconst InsertActionDefault: React.FC<TableActionProps> = ({\n  editor,\n  table,\n  left,\n  top,\n  height,\n  width,\n  index,\n}) => {\n  if (left !== undefined) {\n    left -= 1\n  }\n  if (top !== undefined) {\n    top -= 1\n  }\n\n  if (height !== undefined) {\n    height += 11\n  }\n  if (width !== undefined) {\n    width += 11\n  }\n\n  const type = left !== undefined ? TYPE_COL : TYPE_ROW\n\n  const { minColWidth = defaultTableMinColWidth, minRowHeight = defaultTableMinRowHeight } =\n    useTableOptions(editor)\n\n  const draggingTo = useTableDragTo()\n\n  const handleMouseDown = (event: React.MouseEvent) => {\n    event.preventDefault()\n    if (type === TYPE_COL) {\n      let colWidth = minColWidth\n      const { colsWidth } = table\n      if (colsWidth) {\n        if (index >= colsWidth.length) colWidth = colsWidth[colsWidth.length - 1]\n        else {\n          colWidth = colsWidth[index]\n        }\n      }\n      const path = Editable.findPath(editor, table)\n      Grid.insertCol(editor, path, index, { type: TABLE_CELL_KEY }, colWidth, minColWidth)\n      const newGrid = Grid.above(editor, path)\n      if (newGrid && newGrid[0].colsWidth) {\n        const newColsWidth = adaptiveExpandColumnWidthInContainer(editor, newGrid[0].colsWidth)\n        Transforms.setNodes<Grid>(editor, { colsWidth: newColsWidth }, { at: path })\n      }\n    } else if (type === TYPE_ROW) {\n      Grid.insertRow(\n        editor,\n        Editable.findPath(editor, table),\n        index,\n        { type: TABLE_ROW_KEY },\n        { type: TABLE_CELL_KEY },\n        minRowHeight,\n      )\n    }\n  }\n\n  const draggingActive = React.useMemo(() => {\n    return draggingTo > -1 && draggingTo === index && TableDrag.getDrag().type === type\n  }, [draggingTo, index, type])\n\n  const InsertStyles = type === TYPE_COL ? ColsInsertStyles : RowsInsertStyles\n  const InsertIconStyles = type === TYPE_COL ? ColsInsertIconStyles : RowsInsertIconStyles\n  const InsertLineStyles = type === TYPE_COL ? ColsInsertLineStyles : RowsInsertLineStyles\n  const InsertPlusStyles = type === TYPE_COL ? ColsInsertPlusStyles : RowsInsertPlusStyles\n  return (\n    <InsertStyles isActive={draggingActive} style={{ left, top }} onMouseDown={handleMouseDown}>\n      <InsertIconStyles>\n        <svg width=\"3\" height=\"3\" viewBox=\"0 0 3 3\" fill=\"none\">\n          <circle cx=\"1.5\" cy=\"1.5\" r=\"1.5\" fill=\"#BBBFC4\"></circle>\n        </svg>\n      </InsertIconStyles>\n      {!draggingActive && (\n        <InsertPlusStyles>\n          <Icon name=\"plusCircle\" />\n        </InsertPlusStyles>\n      )}\n      <InsertLineStyles isActive={draggingActive} style={{ height, width }}></InsertLineStyles>\n    </InsertStyles>\n  )\n}\n\nexport const InsertAction = React.memo(InsertActionDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  return (\n    editor === nextEditor &&\n    table === nextTable &&\n    prev.index === next.index &&\n    prev.left === next.left &&\n    prev.top === next.top &&\n    prev.height === next.height &&\n    prev.width === next.width\n  )\n})\n\ninterface TableDragSplitOptions {\n  type: typeof TYPE_COL | typeof TYPE_ROW\n  x: number\n  y: number\n  start: number\n  end: number\n}\n// split action\nconst SplitActionDefault: React.FC<TableActionProps> = ({\n  editor,\n  table,\n  left,\n  top,\n  height,\n  width,\n  index,\n}) => {\n  if (height !== undefined) {\n    height += 8\n  }\n  if (width !== undefined) {\n    width += 8\n  }\n  // /31\n  if (left !== undefined) {\n    left -= 1\n  }\n  if (top !== undefined) {\n    top -= 1\n  }\n  const type = left !== undefined ? TYPE_COL : TYPE_ROW\n\n  const dragRef = React.useRef<TableDragSplitOptions | null>(null)\n  const { minColWidth = defaultTableMinColWidth, minRowHeight = defaultTableMinRowHeight } =\n    useTableOptions(editor)\n  const [isHover, setHover] = React.useState(false)\n  const isDrag = React.useRef(false)\n\n  const handleDragSplitMove = React.useCallback(\n    (e: MouseEvent) => {\n      if (!dragRef.current) return\n      const { type, x, y, start } = dragRef.current\n      const path = Editable.findPath(editor, table)\n      if (type === TYPE_COL) {\n        const { colsWidth } = table\n        if (!colsWidth) return\n        const cX = e.clientX\n        const val = cX - x\n        const newColsWidth = colsWidth.concat()\n        let width = newColsWidth[start] + val\n        width = Math.max(width, minColWidth)\n        if (start < newColsWidth.length - 1) {\n          width = Math.min(newColsWidth[start] + newColsWidth[start + 1] - minColWidth, width)\n          let nextW = newColsWidth[start + 1] - val\n          nextW = Math.max(nextW, minColWidth)\n          nextW = Math.min(newColsWidth[start] + newColsWidth[start + 1] - minColWidth, nextW)\n          newColsWidth[start + 1] = nextW\n        }\n        newColsWidth[start] = width\n        Transforms.setNodes<Grid>(editor, { colsWidth: newColsWidth }, { at: path })\n      } else if (type === TYPE_ROW) {\n        const row = table.children[start]\n        const { height, children: cells } = row\n        if (height) {\n          const ch = RowStore.getContentHeight(row)\n          const cY = e.clientY\n          const val = cY - y\n          let h = Math.max(height, ch!) + val\n          h = Math.max(h, minRowHeight)\n          let contentHeight = 0\n          for (let i = 0; i < cells.length; i++) {\n            const child = Editable.toDOMNode(editor, cells[i]).firstElementChild\n            if (!child) continue\n            const rect = child.getBoundingClientRect()\n            contentHeight = Math.max(contentHeight, rect.height + 2, minRowHeight)\n          }\n          if (h < contentHeight) {\n            h = contentHeight\n          }\n          RowStore.setContentHeight(row, contentHeight)\n          Transforms.setNodes<TableRow>(editor, { height: h }, { at: path.concat(start) })\n        }\n      }\n    },\n    [editor, minColWidth, minRowHeight, table],\n  )\n\n  const cancellablePromisesApi = useCancellablePromises()\n\n  const handleDragSplitUp = React.useCallback(() => {\n    dragRef.current = null\n    isDrag.current = false\n    setHover(false)\n    cancellablePromisesApi.clearPendingPromises()\n    window.removeEventListener('mousemove', handleDragSplitMove)\n    window.removeEventListener('mouseup', handleDragSplitUp)\n  }, [cancellablePromisesApi, dragRef, handleDragSplitMove])\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault()\n    dragRef.current = {\n      type,\n      x: e.clientX,\n      y: e.clientY,\n      start: index,\n      end: index,\n    }\n    isDrag.current = true\n    setHover(true)\n    window.addEventListener('mousemove', handleDragSplitMove)\n    window.addEventListener('mouseup', handleDragSplitUp)\n  }\n\n  const draging = useTableDragging()\n\n  React.useEffect(() => {\n    if (draging) Slot.update(editor, { active: false })\n  }, [draging, editor])\n  const handleMouseOver = React.useCallback(() => {\n    if (draging) return\n    cancellablePromisesApi.clearPendingPromises()\n    const wait = cancellablePromise(cancellablePromisesApi.delay(200))\n    cancellablePromisesApi.appendPendingPromise(wait)\n    wait.promise\n      .then(() => {\n        setHover(true)\n      })\n      .catch(err => {})\n  }, [cancellablePromisesApi, draging])\n\n  const handleMouseLeave = React.useCallback(() => {\n    if (isDrag.current) return\n    cancellablePromisesApi.clearPendingPromises()\n    setHover(false)\n  }, [cancellablePromisesApi])\n\n  const SplitStyles = type === TYPE_COL ? ColsSplitStyles : RowsSplitStyles\n  const SplitLineStyles = type === TYPE_COL ? ColsSplitLineStyles : RowsSplitLineStyles\n  if (draging) return null\n  return (\n    <SplitStyles\n      isHover={isHover && !draging}\n      style={{ left, top, height, width }}\n      onMouseDown={handleMouseDown}\n      onMouseOver={handleMouseOver}\n      onMouseLeave={handleMouseLeave}\n    >\n      <SplitLineStyles isHover={isHover && !draging} />\n    </SplitStyles>\n  )\n}\n\nexport const SplitAction = React.memo(SplitActionDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  return (\n    editor === nextEditor &&\n    table === nextTable &&\n    prev.index === next.index &&\n    prev.left === next.left &&\n    prev.top === next.top &&\n    prev.height === next.height &&\n    prev.width === next.width\n  )\n})\n","import {\n  Editable,\n  useGridSelectionRect,\n  useEditableStatic,\n  useIsomorphicLayoutEffect,\n  SelectionDrawing,\n} from '@editablejs/editor'\nimport { Editor, Grid } from '@editablejs/models'\nimport * as React from 'react'\nimport { SelectionStyles } from './styles'\n\nexport interface TableSelectionProps {\n  editor: Editor\n  table: Grid\n}\n\nconst TableSelection: React.FC<TableSelectionProps> = () => {\n  const editor = useEditableStatic()\n  const rect = useGridSelectionRect()\n\n  useIsomorphicLayoutEffect(() => {\n    if (rect) {\n      SelectionDrawing.setEnabled(editor, false)\n    } else {\n      SelectionDrawing.setEnabled(editor, true)\n    }\n\n    return () => {\n      SelectionDrawing.setEnabled(editor, true)\n    }\n  }, [editor, rect])\n\n  if (!rect) return null\n  const { top, left, width, height } = rect\n  return <SelectionStyles style={{ left, top, width, height }} />\n}\n\nexport { TableSelection }\n","import { Editable, Hotkey } from '@editablejs/editor'\nimport { Editor, Element, Range, Point, Transforms } from '@editablejs/models'\nimport { TableCellEditor } from '../../cell'\nimport { TableEditor } from './table-editor'\n\nconst findMatchedRange = (editor: Editor, at: Point) => {\n  const block = Editor.above(editor, {\n    at,\n    match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n  })\n  const path = block ? block[1] : []\n\n  const start = Editor.start(editor, path)\n  const range = { anchor: at, focus: start }\n  const beforeText = Editor.string(editor, range)\n  const reg = /^\\|([^\\|]+\\|)+$/\n  const match = beforeText.match(reg)\n  if (match) {\n    const columns = beforeText.slice(1, -1).split('|')\n\n    for (let i = 0; i < columns.length; i++) {\n      if (columns[i] === '') {\n        return\n      }\n    }\n    const start = Editor.start(editor, path)\n    const end = Editor.end(editor, path)\n    return {\n      columns,\n      range: {\n        anchor: {\n          path: start.path,\n          offset: start.offset + beforeText.length,\n        },\n        focus: end,\n      },\n      start,\n      end,\n    }\n  }\n}\nexport const withShortcuts = (editor: Editable) => {\n  const { onKeydown } = editor\n\n  editor.onKeydown = event => {\n    const { selection } = editor\n    if (\n      selection &&\n      Range.isCollapsed(selection) &&\n      !Editable.isComposing(editor) &&\n      Hotkey.match('enter', event) &&\n      !TableEditor.isActive(editor)\n    ) {\n      const anchor = Range.start(selection)\n      const match = findMatchedRange(editor, anchor)\n      if (match) {\n        event.preventDefault()\n        const { range, start, columns } = match\n        Transforms.delete(editor, {\n          at: {\n            anchor: start,\n            focus: range.anchor,\n          },\n        })\n        const cols = columns.map(column =>\n          TableCellEditor.create(editor, {\n            children: [{ text: column }],\n          }),\n        )\n        const table = TableEditor.create(editor, {\n          cols: cols.length,\n          rows: 2,\n        })\n        table.children[0].children = cols\n        TableEditor.insert(editor, table)\n        return\n      }\n    }\n    onKeydown(event)\n  }\n}\n"],"mappings":"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","names":["Transforms","Grid","locale","useIsomorphicLayoutEffect","Editor","Editor","store","store","jsx","useIsomorphicLayoutEffect","setOptions","Editor","Editor","getOptions","useCancellablePromises","cancellablePromise","Editable","useIsomorphicLayoutEffect","Grid","Editor","Transforms","React","_styledstyled_components","Editable","React","create","useStore","jsx","_styled","_styledstyled_components","Editable","jsx","_styled","Editable","React","Editable","Grid","React","Icon","jsx","Editable","Grid","Icon","type","width","height","Grid","jsx","Grid","Editable","headers","useEditableStatic","useIsomorphicLayoutEffect","jsx","useEditableStatic","useIsomorphicLayoutEffect","jsx","jsxs","useIsomorphicLayoutEffect","selection","Editor","Grid","Transforms","children","store","Editable","useCancellablePromises","cancellablePromise","Editable","Editor","Range","Transforms","Editor","start","Range","Editable","Transforms","jsx","setOptions","options","Transforms","Grid"]}
\ No newline at end of file
+{"version":3,"sources":["../src/table/plugin/with-table.tsx","../src/components/styles.tsx","../src/cell/plugin/table-cell-editor.ts","../src/cell/plugin/with-table-cell.tsx","../src/locale/zh_CN.ts","../src/locale/en_US.ts","../src/locale/index.ts","../src/row/plugin/with-table-row.tsx","../src/context.ts","../src/row/plugin/table-row-editor.ts","../src/row/store.ts","../src/table/plugin/table-editor.ts","../src/components/table.tsx","../src/components/dragging.tsx","../src/hooks/use-drag.ts","../src/components/header.tsx","../src/components/action.tsx","../src/components/selection.tsx","../src/table/plugin/with-shortcuts.ts"],"sourcesContent":["import { Editable, RenderElementProps, Locale } from '@editablejs/editor'\nimport { Transforms, Node, Grid } from '@editablejs/models'\nimport { withTableCell } from '../../cell'\nimport locale from '../../locale'\nimport { setOptions, TableOptions } from '../options'\nimport { withTableRow } from '../../row'\nimport { TableEditor } from './table-editor'\nimport { Table } from '../interfaces/table'\nimport { TableComponent } from '../../components/table'\nimport { withShortcuts } from './with-shortcuts'\n\nexport const withTable = <T extends Editable>(editor: T, options: TableOptions = {}) => {\n  let newEditor = editor as T & TableEditor\n\n  setOptions(newEditor, options)\n\n  const { locale: localeOptions = {} } = options\n  Locale.setLocale(newEditor, locale, localeOptions)\n\n  newEditor = withTableCell(newEditor)\n  newEditor = withTableRow(newEditor)\n\n  const { isGrid } = editor\n\n  newEditor.isGrid = (node: Node): node is Table => {\n    return TableEditor.isTable(newEditor, node) || isGrid(node)\n  }\n\n  newEditor.insertTable = options => {\n    const table = Table.isTable(options) ? options : TableEditor.create(newEditor, options)\n    Transforms.insertNodes(newEditor, table)\n    Grid.focus(newEditor, {\n      point: [0, 0],\n    })\n  }\n\n  const { renderElement } = newEditor\n\n  newEditor.renderElement = props => {\n    if (TableEditor.isTable(newEditor, props.element)) {\n      return <TableComponent editor={newEditor} {...(props as RenderElementProps<Table>)} />\n    }\n    return renderElement(props)\n  }\n\n  const { shortcuts } = options\n  if (shortcuts !== false) {\n    withShortcuts(newEditor)\n  }\n  return newEditor\n}\n","import { css as _css } from \"styled-components\";\nimport _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport { Icon } from '@editablejs/ui';\nexport const TableStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-0\"\n})(({\n  isHover,\n  isSelected,\n  isDragging\n}) => [{\n  \"position\": \"relative\"\n}, _css`\n      padding: var(--table-padding-top) 0 10px;\n      > table {\n        ${{\n  \"width\": \"100%\",\n  \"tableLayout\": \"fixed\",\n  \"borderCollapse\": \"collapse\",\n  \"whiteSpace\": \"pre-wrap\"\n}}\n\n        tr,\n        td {\n          ${{\n  \"margin\": \"0px\",\n  \"padding\": \"0px\"\n}};\n        }\n      }\n    `, isDragging && {\n  \"cursor\": \"default\"\n}, (isHover || isSelected) && _css`\n        ${ColsHeaderStyles} {\n          display: flex;\n        }\n      `, (isHover || isSelected) && _css`\n        ${AllHeaderStyles},${RowsHeaderStyles} {\n          display: flex;\n        }\n      `]);\nexport const CellStyles = _styled.td.withConfig({\n  componentId: \"sc-1yra71v-1\"\n})(() => [_css`\n    border: 1px solid var(--table-border-color);\n    vertical-align: top;\n  `]);\nexport const CellInnerStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-2\"\n})(() => [_css`\n    padding: 6px;\n  `]);\nexport const RowStyles = _styled.tr.withConfig({\n  componentId: \"sc-1yra71v-3\"\n})(() => []);\nexport const SelectionStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-4\"\n})([\"background-color:rgba(0,106,254,0.12);position:absolute;background-color:rgba(0,106,254,0.12);pointer-events:none;cursor:default;\"]);\nexport const ColsHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-5\"\n})(() => [_css`\n    position: absolute;\n    left: 0;\n    top: calc(var(--table-item-wh) - 2px);\n    display: none;\n    border-left: none;\n  `]);\nexport const HeaderDragStyles = _styled(Icon).withConfig({\n  componentId: \"sc-1yra71v-6\"\n})([\"position:absolute;font-size:8px;color:#fff;display:none;\"]);\nexport const ColsHeaderItemStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-7\"\n})(({\n  isHover,\n  isFull,\n  allFull\n}) => [_css`\n      height: var(--table-item-wh);\n      background: var(--table-item-bg);\n      cursor: pointer;\n      border-bottom: 1px solid var(--table-border-color);\n      position: absolute;\n\n      &:hover {\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      }\n    `, isHover && _css`\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      `, isFull && _css`\n        background: var(--table-split-bg);\n        z-index: 3;\n\n        &:hover {\n          background: var(--table-split-bg);\n        }\n      `, isFull && !allFull && _css`\n        cursor: move;\n      `, isFull && !allFull && `${HeaderDragStyles} {\n      display: flex;\n      left: calc(50% - 8px);\n      transform: rotate(90deg);\n    }`]);\nexport const RowsHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-8\"\n})(() => [_css`\n    display: none;\n    position: absolute;\n    top: var(--table-padding-top);\n    left: calc(0px - var(--table-item-wh));\n  `]);\nexport const RowsHeaderItemStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-9\"\n})(({\n  isHover,\n  isFull,\n  allFull\n}) => [_css`\n      width: var(--table-item-wh);\n      background: var(--table-item-bg);\n      cursor: pointer;\n      border-right: 1px solid var(--table-border-color);\n      position: absolute;\n\n      &:hover {\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      }\n    `, isHover && _css`\n        background: var(--table-item-hover-bg);\n        z-index: 2;\n      `, isFull && _css`\n        background: var(--table-split-bg);\n        z-index: 3;\n\n        &:hover {\n          background: var(--table-split-bg);\n        }\n      `, isFull && !allFull && _css`\n        cursor: move;\n      `, isFull && !allFull && `${HeaderDragStyles} {\n      display: flex;\n      top: calc(50% - 4px);\n    }`]);\nexport const AllHeaderStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-10\"\n})(({\n  allFull\n}) => [_css`\n    position: absolute;\n    top: calc(var(--table-item-wh) - 2px);\n    left: calc(0px - var(--table-item-wh));\n    width: var(--table-item-wh);\n    height: var(--table-item-wh);\n    cursor: pointer;\n    border-right: 1px solid var(--table-border-color);\n    border-bottom: 1px solid var(--table-border-color);\n    background: var(--table-item-bg);\n    border-top-left-radius: 2px;\n    display: none;\n    &:hover {\n      background: var(--table-item-hover-bg);\n    }\n  `, allFull && _css`\n      background-color: var(--table-split-bg);\n      border-color: var(--table-split-bg);\n      border: none;\n\n      &:hover {\n        background-color: var(--table-split-bg);\n      }\n    `]);\nexport const ColsInsertStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-11\"\n})(({\n  isActive\n}) => [_css`\n    position: absolute;\n    top: calc(0px - var(--table-item-wh) + 2px);\n    line-height: 0;\n    cursor: pointer;\n    z-index: ${isActive ? 3 : 'unset'};\n    &:hover {\n      z-index: 3;\n\n      ${ColsInsertPlusStyles},${ColsInsertLineStyles} {\n        display: flex;\n      }\n    }\n  `, isActive && {\n  \"pointerEvents\": \"none\"\n}]);\nexport const ColsInsertPlusStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-12\"\n})(() => [_css`\n    color: var(--table-split-bg);\n    display: none;\n    font-size: 18px;\n    position: absolute;\n    top: -13px;\n    left: -7.5px;\n    align-items: flex-end;\n    justify-content: center;\n  `]);\nexport const ColsInsertLineStyles = _styled(ColsInsertPlusStyles).withConfig({\n  componentId: \"sc-1yra71v-13\"\n})([\"top:3px;left:0.5px;width:2px;background-color:var(--table-split-bg);\", \"\"], ({\n  isActive\n}) => isActive ? 'display: flex; z-index: 3; pointer-events: none;' : '');\nexport const ColsInsertIconStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-14\"\n})(() => [_css`\n    display: flex;\n    width: 6px;\n    height: 6px;\n    position: absolute;\n    top: 0;\n    left: -1.5px;\n    justify-content: center;\n  `]);\nexport const RowsInsertStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-15\"\n})(({\n  isActive\n}) => [_css`\n    position: absolute;\n    left: calc(0px - var(--table-item-wh) + 2px);\n    line-height: 0;\n    cursor: pointer;\n    z-index: ${isActive ? 3 : 'unset'};\n\n    &:hover {\n      z-index: 3;\n\n      ${RowsInsertPlusStyles},${RowsInsertLineStyles} {\n        display: flex;\n      }\n    }\n  `]);\nexport const RowsInsertIconStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-16\"\n})(() => [_css`\n    display: flex;\n    width: 6px;\n    height: 6px;\n    position: absolute;\n    top: 0;\n    left: 0;\n    justify-content: flex-start;\n  `]);\nexport const RowsInsertPlusStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-17\"\n})(() => [_css`\n    color: var(--table-split-bg);\n    display: none;\n    font-size: 18px;\n    position: absolute;\n    top: -7.5px;\n    left: -13px;\n    align-items: flex-end;\n    justify-content: flex-start;\n  `]);\nexport const RowsInsertLineStyles = _styled(ColsInsertPlusStyles).withConfig({\n  componentId: \"sc-1yra71v-18\"\n})([\"top:0.5px;left:3px;height:2px;background-color:var(--table-split-bg);\", \"\"], ({\n  isActive\n}) => isActive ? 'display: flex; z-index: 3; pointer-events: none;' : '');\nexport const ColsSplitStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-19\"\n})(({\n  isHover\n}) => [_css`\n    position: absolute;\n    top: 0;\n    height: var(--table-item-wh) + 2px;\n    padding: 0 1px;\n    z-index: 1;\n  `, isHover && {\n  \"zIndex\": \"3\",\n  \"cursor\": \"col-resize\"\n}]);\nexport const ColsSplitLineStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-20\"\n})(({\n  isHover\n}) => [_css`\n    background-color: transparent;\n    width: 1px;\n    height: 100%;\n  `, isHover && _css`\n      background-color: var(--table-split-bg);\n    `]);\nexport const RowsSplitStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-21\"\n})(({\n  isHover\n}) => [_css`\n    position: absolute;\n    left: 0;\n    width: calc(var(--table-item-bg) + 2px);\n    padding: 1px 0;\n    z-index: 1;\n  `, isHover && {\n  \"zIndex\": \"3\",\n  \"cursor\": \"row-resize\"\n}]);\nexport const RowsSplitLineStyles = _styled.div.withConfig({\n  componentId: \"sc-1yra71v-22\"\n})(({\n  isHover\n}) => [_css`\n    background-color: transparent;\n    width: 100%;\n    height: 1px;\n  `, isHover && _css`\n      background-color: var(--table-split-bg);\n    `]);","import { Editable } from '@editablejs/editor'\nimport { Editor, DOMNode, isDOMElement } from '@editablejs/models'\nimport { TABLE_CELL_KEY } from '../constants'\nimport { TableCell } from '../interfaces/table-cell'\n\nexport interface TableCellEditor extends Editor {}\n\nexport const TableCellEditor = {\n  isTableCell: (editor: Editor, value: any): value is TableCell => {\n    return TableCell.isTableCell(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_CELL_KEY] ?? []\n    return elements.some(e => TableCellEditor.isTableCell(editor, e[0]))\n  },\n\n  create: (editor: Editor, cell: Partial<Omit<TableCell, 'type'>> = {}): TableCell => {\n    return TableCell.create(cell)\n  },\n\n  closest: (editor: Editor, node: DOMNode): TableCell | null => {\n    const el = isDOMElement(node) ? node : node.parentElement\n    if (!el) return null\n    const tdEl = el.closest('td')\n    if (!tdEl) return null\n    const slateNode = Editable.toEditorNode(editor, tdEl)\n    if (TableCellEditor.isTableCell(editor, slateNode)) return slateNode\n    return null\n  },\n}\n","import { Editable } from '@editablejs/editor'\nimport { GridCell, Node } from '@editablejs/models'\nimport { setOptions, TableCellOptions } from '../options'\nimport { CellInnerStyles, CellStyles } from '../../components/styles'\nimport { TableCellEditor } from './table-cell-editor'\n\nexport const withTableCell = <T extends Editable>(editor: T, options: TableCellOptions = {}) => {\n  const newEditor = editor as T & TableCellEditor\n  const { renderElement, isGridCell } = editor\n\n  setOptions(editor, options)\n\n  newEditor.isGridCell = (node: Node): node is GridCell => {\n    return TableCellEditor.isTableCell(newEditor, node) || isGridCell(node)\n  }\n\n  newEditor.renderElement = props => {\n    const { element, attributes, children } = props\n    if (TableCellEditor.isTableCell(newEditor, element)) {\n      const { style, ...rest } = attributes\n      return (\n        <CellStyles\n          rowSpan={element.rowspan ?? 1}\n          colSpan={element.colspan ?? 1}\n          style={{ ...style, display: element.span ? 'none' : '' }}\n          {...rest}\n        >\n          <CellInnerStyles>{children}</CellInnerStyles>\n        </CellStyles>\n      )\n    }\n    return renderElement(props)\n  }\n\n  return newEditor\n}\n","import { TableLocale } from './types'\n\nconst locale: TableLocale = {\n  locale: 'zh-CN',\n  table: {\n    mergeCells: '',\n    splitCells: '',\n    moveRows: '{count}',\n    moveCols: '{count}',\n  },\n}\n\nexport default locale\n","import { TableLocale } from './types'\n\nconst locale: TableLocale = {\n  locale: 'en-US',\n  table: {\n    mergeCells: 'Merge cells',\n    splitCells: 'Split cells',\n    moveRows: 'Moving {count} rows',\n    moveCols: 'Moving {count} columns',\n  },\n}\n\nexport default locale\n","import zhCN from './zh_CN'\nimport enUS from './en_US'\nimport { TableLocale } from './types'\n\nconst locales: Record<string, TableLocale> = {\n  'en-US': enUS,\n  'zh-CN': zhCN,\n}\n\nexport type { TableLocale }\n\nexport default locales\n","import { Editable, RenderElementProps, useIsomorphicLayoutEffect } from '@editablejs/editor'\nimport { Transforms, GridRow, Editor, Node } from '@editablejs/models'\nimport { useTableSize } from '../../context'\nimport { RowStyles } from '../../components/styles'\nimport { TableRow } from '../interfaces/table-row'\nimport { getOptions, setOptions, TableRowOptions } from '../options'\nimport { TableRowEditor } from './table-row-editor'\nimport { RowStore } from '../store'\n\ninterface TableRowProps extends React.AnchorHTMLAttributes<HTMLTableRowElement> {\n  editor: Editor\n  element: TableRow\n}\n\nconst Row: React.FC<TableRowProps & RenderElementProps<TableRow, HTMLTableRowElement>> = ({\n  editor,\n  element,\n  attributes,\n  children,\n}) => {\n  const { style, ref, ...rest } = attributes\n  // \n  const { width } = useTableSize()\n  // \n  useIsomorphicLayoutEffect(() => {\n    let maxHeight = getOptions(editor).minRowHeight\n    const rect = ref.current.getBoundingClientRect()\n    maxHeight = Math.max(maxHeight, rect.height)\n    if (maxHeight !== RowStore.getContentHeight(element)) {\n      RowStore.setContentHeight(element, maxHeight)\n    }\n  }, [editor, ref, width, element])\n\n  return (\n    <RowStyles ref={ref} style={{ height: element.height, ...style }} {...rest}>\n      {children}\n    </RowStyles>\n  )\n}\n\nexport const withTableRow = <T extends Editable>(editor: T, options: TableRowOptions = {}) => {\n  const newEditor = editor as T & TableRowEditor\n  const { renderElement, isGridRow } = editor\n\n  setOptions(editor, options)\n\n  newEditor.isGridRow = (node: Node): node is GridRow => {\n    return TableRowEditor.isTableRow(newEditor, node) || isGridRow(node)\n  }\n\n  newEditor.renderElement = props => {\n    const { element, attributes, children } = props\n    if (TableRowEditor.isTableRow(newEditor, element)) {\n      return (\n        <Row editor={editor} element={element} attributes={attributes}>\n          {children}\n        </Row>\n      )\n    }\n    return renderElement(props)\n  }\n\n  return newEditor\n}\n","import { GridSelected, GridSelection } from '@editablejs/models'\nimport * as React from 'react'\nimport { StoreApi, useStore } from 'zustand'\n\nexport interface TableContextInterface {\n  height: number\n  width: number\n  rows: number\n  cols: number\n  selection: GridSelection | null\n  selected: GridSelected\n}\n\nconst TableContext = React.createContext<StoreApi<TableContextInterface>>({} as any)\n\nexport { TableContext }\n\nexport const useTableStore = () => {\n  const context = React.useContext(TableContext)\n  if (!context) throw new Error('TableContext not found')\n  return useStore(context)\n}\n\nexport const useTableSize = () => {\n  const context = React.useContext(TableContext)\n  return useStore(context, state => ({ height: state.height, width: state.width }))\n}\n","import { Editor } from '@editablejs/models'\nimport { TableCell, TableCellEditor } from '../../cell'\nimport { TABLE_ROW_KEY } from '../constants'\nimport { TableRow } from '../interfaces/table-row'\n\nexport interface TableRowEditor extends Editor {}\n\nexport const TableRowEditor = {\n  isTableRow: (editor: Editor, value: any): value is TableRow => {\n    return TableRow.isTableRow(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_ROW_KEY] ?? []\n    return elements.some(e => TableRowEditor.isTableRow(editor, e[0]))\n  },\n\n  create: (\n    editor: Editor,\n    row: Partial<Omit<TableRow, 'type' | 'children'>> = {},\n    cells: Partial<Omit<TableCell, 'type' | 'children'>>[],\n  ): TableRow => {\n    return TableRow.create(row, cells)\n  },\n}\n","import { useIsomorphicLayoutEffect } from '@editablejs/editor'\nimport { GridRow } from '@editablejs/models'\nimport { useCallback, useEffect, useState } from 'react'\nimport create, { StoreApi, UseBoundStore } from 'zustand'\n\nconst ROW_STORE_WEAK_MAP = new WeakMap<GridRow, UseBoundStore<StoreApi<TableRowStore>>>()\n\nexport interface TableRowStore {\n  contentHeight: number\n}\n\nexport const getRowStore = (element: GridRow) => {\n  let store = ROW_STORE_WEAK_MAP.get(element)\n  if (!store) {\n    store = create<TableRowStore>(() => ({\n      contentHeight: element.height ?? 0,\n    }))\n    ROW_STORE_WEAK_MAP.set(element, store)\n  }\n  return store\n}\n\nexport const useRowStore = (element: GridRow) => {\n  const store = getRowStore(element)\n  useEffect(() => {\n    return () => {\n      ROW_STORE_WEAK_MAP.get(element)?.destroy()\n      ROW_STORE_WEAK_MAP.delete(element)\n    }\n  }, [element])\n  return store\n}\n\nexport const useRowContentHeight = (element: GridRow) => {\n  const store = useRowStore(element)\n  const state = store.getState()\n  return [\n    state.contentHeight,\n    (height: number) => {\n      store.setState({ contentHeight: height })\n    },\n  ] as const\n}\n\nexport const useTableRowContentHeights = (rows: GridRow[]) => {\n  const refresh = useCallback(() => {\n    return rows.map(row => {\n      const store = getRowStore(row)\n      return store.getState().contentHeight || row.height || 0\n    })\n  }, [rows])\n\n  const [heights, setHeights] = useState<number[]>(refresh)\n  useIsomorphicLayoutEffect(() => {\n    setHeights(refresh())\n  }, [refresh])\n\n  return heights\n}\n\nexport const RowStore = {\n  getStore: getRowStore,\n  getContentHeight: (element: GridRow) => {\n    const store = getRowStore(element)\n    return store.getState().contentHeight\n  },\n  setContentHeight: (element: GridRow, height: number) => {\n    const store = getRowStore(element)\n    store.setState({ contentHeight: height })\n  },\n}\n","import { Grid, Editor, Node } from '@editablejs/models'\nimport { TableOptions } from '../options'\nimport { TableCellEditor, TableCell } from '../../cell'\nimport { TableRow, TableRowEditor } from '../../row'\nimport { TABLE_KEY } from '../constants'\nimport { Table } from '../interfaces/table'\nimport { getOptions } from '../options'\nimport { defaultTableMinRowHeight } from '../../row/options'\nimport { calculateAverageColumnWidthInContainer } from '../utils'\n\nexport interface CreateTableOptions {\n  rows?: number\n  cols?: number\n}\nexport interface TableEditor extends Editor {\n  insertTable: (options?: CreateTableOptions | Table) => void\n}\n\nexport const TableEditor = {\n  isTableEditor: (editor: Editor): editor is TableEditor => {\n    return !!(editor as TableEditor).insertTable\n  },\n\n  isTable: (editor: Editor, value: Node): value is Table => {\n    return Table.isTable(value)\n  },\n\n  isActive: (editor: Editor): boolean => {\n    const elements = Editor.elements(editor)[TABLE_KEY] ?? []\n    return elements.some(e => TableEditor.isTable(editor, e[0]))\n  },\n\n  getOptions,\n\n  create: (editor: Editor, options: CreateTableOptions = {}): Table => {\n    const { rows = 3, cols = 3 } = options\n    const { minRowHeight = defaultTableMinRowHeight, minColWidth = defaultTableMinRowHeight, getWidth } =\n      getOptions(editor)\n    const rowHeight = minRowHeight\n    const tableRows: TableRow[] = []\n    const tableColsWdith = calculateAverageColumnWidthInContainer(editor, {\n      cols,\n      minWidth: minColWidth,\n      getWidth: width => {\n        if (getWidth) {\n          return getWidth(width)\n        }\n        return width - 1\n      },\n    })\n    for (let r = 0; r < rows; r++) {\n      tableRows.push(\n        TableRowEditor.create(\n          editor,\n          { height: rowHeight },\n          tableColsWdith.map(() => TableCellEditor.create(editor)),\n        ),\n      )\n    }\n    return Grid.create<Table, TableRow, TableCell>(\n      {\n        type: TABLE_KEY,\n        colsWidth: tableColsWdith,\n      },\n      ...tableRows,\n    )\n  },\n\n  insert: (editor: Editor, options?: CreateTableOptions | Table) => {\n    if (TableEditor.isTableEditor(editor)) editor.insertTable(options)\n  },\n}\n","import {\n  RenderElementProps,\n  useCancellablePromises,\n  cancellablePromise,\n  Editable,\n  useIsomorphicLayoutEffect,\n  useNodeFocused,\n  useNodeSelected,\n  useGridSelection,\n  useGridSelected,\n  useReadOnly,\n} from '@editablejs/editor'\nimport {\n  Grid,\n  Editor,\n  Range,\n  Transforms,\n  isDOMNode,\n  GridCell,\n  isDOMHTMLElement,\n} from '@editablejs/models'\nimport { useComposedRefs } from '@editablejs/ui'\nimport * as React from 'react'\nimport { createStore } from 'zustand'\nimport { TableCellEditor } from '../cell'\nimport { TableContext } from '../context'\nimport { Dragging } from './dragging'\nimport { TableColHeader, TableRowHeader } from './header'\nimport { TableDrag, useTableDragging } from '../hooks/use-drag'\nimport { TableRow, TableRowEditor } from '../row'\nimport { TableSelection as TableSelectionElement } from './selection'\nimport { AllHeaderStyles, TableStyles } from './styles'\nimport { Table } from '../table/interfaces/table'\nimport { TableEditor } from '../table/plugin/table-editor'\nimport { useTableRowContentHeights } from '../row/store'\n\ninterface TableProps extends RenderElementProps<Table> {\n  editor: TableEditor\n}\n\nconst TableComponent: React.FC<TableProps> = ({ editor, element, attributes, children }) => {\n  const nodeSelected = useNodeSelected()\n\n  const nodeFocused = useNodeFocused()\n\n  const selection = useGridSelection()\n\n  const selected = useGridSelected()\n\n  const tableRef = React.useRef<HTMLTableElement>(null)\n\n  const dragging = useTableDragging()\n\n  /**\n   * \n   */\n  useIsomorphicLayoutEffect(() => {\n    const { selection } = editor\n    if (selection && nodeSelected && !nodeFocused) {\n      let { anchor, focus } = selection\n      const isBackward = Range.isBackward(selection)\n      const [startRow] = Editor.nodes<TableRow>(editor, {\n        at: anchor.path,\n        match: n => TableRowEditor.isTableRow(editor, n),\n      })\n      if (startRow) {\n        const [row, path] = startRow\n        const { children: cells } = row\n        const table = Grid.above(editor, path)\n        if (table) {\n          if (isBackward) {\n            const sel = Grid.edges(editor, table, {\n              start: [0, 0],\n              end: [path[path.length - 1], cells.length - 1],\n            })\n            anchor = Editor.start(editor, path.slice(0, -1).concat(sel.end))\n          } else {\n            const sel = Grid.edges(editor, table, {\n              start: [path[path.length - 1], 0],\n              end: [table[0].children.length - 1, cells.length - 1],\n            })\n            anchor = Editor.start(editor, path.slice(0, -1).concat(sel.start))\n          }\n        }\n      }\n      const [endRow] = Editor.nodes<TableRow>(editor, {\n        at: focus.path,\n        match: n => TableRowEditor.isTableRow(editor, n),\n      })\n      if (endRow) {\n        const [row, path] = endRow\n        const { children: cells } = row\n        const table = Grid.above(editor, path)\n        if (table) {\n          if (isBackward) {\n            const sel = Grid.edges(editor, table, {\n              start: [table[0].children.length - 1, cells.length - 1],\n              end: [path[path.length - 1], 0],\n            })\n            focus = Editor.start(editor, path.slice(0, -1).concat(sel.start))\n          } else {\n            const sel = Grid.edges(editor, table, {\n              start: [0, 0],\n              end: [path[path.length - 1], cells.length - 1],\n            })\n            focus = Editor.start(editor, path.slice(0, -1).concat(sel.end))\n          }\n        }\n      }\n      const range = { anchor, focus }\n      if (!Range.equals(selection, range)) Transforms.select(editor, range)\n    }\n  }, [nodeSelected, nodeFocused, editor, editor.selection])\n\n  const { colsWidth = [] } = element\n\n  const renderColgroup = () => {\n    const colgroup = []\n    for (let i = 0; i < colsWidth.length; i++) {\n      colgroup.push(<col width={colsWidth[i]} key={i} />)\n    }\n    return colgroup.length > 0 ? <colgroup>{colgroup}</colgroup> : null\n  }\n  // table width\n  const tableWidth = React.useMemo(() => {\n    let width = 0\n    for (let i = 0; i < colsWidth.length; i++) {\n      width += colsWidth[i]\n    }\n    return width\n  }, [colsWidth])\n  const rowContentHeights = useTableRowContentHeights(element.children)\n\n  // table height\n  const tableHeight = React.useMemo(() => {\n    const { children } = element\n    let height = 0\n    for (let i = 0; i < children.length; i++) {\n      const row = children[i]\n      height += (rowContentHeights[i] || row.height) ?? 0\n    }\n    return height\n  }, [element, rowContentHeights])\n\n  const [isHover, setHover] = React.useState(false)\n\n  const store = React.useMemo(\n    () =>\n      createStore(() => ({\n        selection,\n        selected,\n        width: tableWidth,\n        height: tableHeight,\n        rows: element.children.length,\n        cols: element.colsWidth?.length ?? 0,\n      })),\n    [\n      element.children.length,\n      element.colsWidth?.length,\n      selected,\n      selection,\n      tableHeight,\n      tableWidth,\n    ],\n  )\n\n  const renderAllHeader = () => {\n    const handleMouseDown = (e: React.MouseEvent) => {\n      e.preventDefault()\n      Grid.select(editor, Editable.findPath(editor, element))\n    }\n    return <AllHeaderStyles onMouseDown={handleMouseDown} allFull={selected.allFull} />\n  }\n\n  const cancellablePromisesApi = useCancellablePromises()\n\n  const handleMouseOver = React.useCallback(() => {\n    cancellablePromisesApi.clearPendingPromises()\n    if (~~selected.count) return\n    const wait = cancellablePromise(cancellablePromisesApi.delay(200))\n    cancellablePromisesApi.appendPendingPromise(wait)\n    wait.promise\n      .then(() => {\n        setHover(true)\n      })\n      .catch(err => {})\n  }, [selected, cancellablePromisesApi])\n\n  const handleMouseLeave = React.useCallback(() => {\n    cancellablePromisesApi.clearPendingPromises()\n    setHover(false)\n  }, [cancellablePromisesApi])\n\n  const getMoveColToIndex = React.useCallback(\n    (col: number, offsetX: number) => {\n      const cells = Grid.cells(editor, Editable.findPath(editor, element), {\n        startCol: col,\n        endCol: col,\n      })\n      let minCol = col\n      let maxCol = col\n      for (const [cell] of cells) {\n        const isSpan = GridCell.isSpan(cell)\n        if (isSpan) {\n          minCol = Math.min(minCol, cell.span[1])\n        } else {\n          maxCol = Math.max(maxCol, col + cell.colspan - 1)\n        }\n      }\n      const leftWidth = colsWidth[minCol] / 2\n      const rightWidth = colsWidth[maxCol] / 2\n      if (col === minCol && offsetX < leftWidth) {\n        return minCol\n      }\n      if (col === maxCol && offsetX > rightWidth) {\n        return maxCol + 1\n      }\n      return -1\n    },\n    [colsWidth, element, editor],\n  )\n\n  const getMoveRowToIndex = React.useCallback(\n    (row: number, offsetY: number) => {\n      const cells = Grid.cells(editor, Editable.findPath(editor, element), {\n        startRow: row,\n        endRow: row,\n      })\n      let minRow = row\n      let maxRow = row\n      for (const [cell] of cells) {\n        const isSpan = GridCell.isSpan(cell)\n        if (isSpan) {\n          minRow = Math.min(minRow, cell.span[0])\n        } else {\n          maxRow = Math.max(maxRow, row + cell.rowspan - 1)\n        }\n      }\n      const rows = element.children\n      const topHeight = (rows[minRow].height ?? 0) / 2\n      const bottomHeight = (rows[maxRow].height ?? 0) / 2\n\n      if (row === minRow && offsetY < topHeight) {\n        return minRow\n      }\n      if (row === maxRow && offsetY > bottomHeight) {\n        return maxRow + 1\n      }\n      return -1\n    },\n    [element, editor],\n  )\n\n  const handleMouseMove = React.useCallback(\n    (event: MouseEvent) => {\n      const tableEl = tableRef.current\n      const { target, offsetX, offsetY } = event\n      const { type, point } = TableDrag.getDrag()\n      if (\n        (type === 'col' && Math.abs(point.x - offsetX) < 3) ||\n        (type === 'row' && Math.abs(point.y - offsetY) < 3)\n      )\n        return\n\n      TableDrag.setPoint({ x: event.clientX, y: event.clientY })\n      if (!tableEl || !isDOMNode(target) || !tableEl.contains(target)) {\n        TableDrag.setTo(-1)\n        return\n      }\n\n      const cell = TableCellEditor.closest(editor, target)\n      let col = -1\n      let row = -1\n      if (!cell) {\n        if (isDOMHTMLElement(target)) {\n          const attrName = `data-table-${type}`\n          const header = target.closest(`[${attrName}]`)\n          if (header) {\n            const index = parseInt(header.getAttribute(attrName) || '-1')\n            col = type === 'col' ? index : -1\n            row = type === 'row' ? index : -1\n          }\n        }\n      } else {\n        const path = Editable.findPath(editor, cell)\n\n        col = path[path.length - 1]\n        row = path[path.length - 2]\n      }\n      if (col === -1 && row === -1) {\n        TableDrag.setTo(-1)\n        return\n      }\n      const to = type === 'row' ? getMoveRowToIndex(row, offsetY) : getMoveColToIndex(col, offsetX)\n      TableDrag.setTo(to)\n    },\n    [editor, getMoveRowToIndex, getMoveColToIndex],\n  )\n\n  React.useEffect(() => {\n    if (dragging) {\n      window.addEventListener('mousemove', handleMouseMove)\n    }\n\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove)\n    }\n  }, [dragging, handleMouseMove])\n\n  const composedRefs = useComposedRefs(attributes.ref, tableRef)\n\n  const [readOnly] = useReadOnly()\n\n  return (\n    <TableContext.Provider value={store}>\n      <TableStyles\n        isDragging={dragging}\n        isHover={isHover}\n        isSelected={!!~~selected.count}\n        {...attributes}\n        onMouseOver={handleMouseOver}\n        onMouseLeave={handleMouseLeave}\n        ref={composedRefs}\n      >\n        {!readOnly && <TableColHeader editor={editor} table={element} />}\n        {!readOnly && (\n          <TableRowHeader editor={editor} table={element} rowContentHeights={rowContentHeights} />\n        )}\n        {!readOnly && renderAllHeader()}\n        <table style={{ width: !tableWidth ? '' : tableWidth }}>\n          {renderColgroup()}\n          <tbody>{children}</tbody>\n        </table>\n        <TableSelectionElement editor={editor} table={element} />\n      </TableStyles>\n      <Dragging />\n    </TableContext.Provider>\n  )\n}\n\nexport { TableComponent }\n","import _styled2styled_components from 'styled-components';\n            const _styled2 = typeof _styled2styled_components.default === 'undefined' ? _styled2styled_components : _styled2styled_components.default;;\nimport _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport { Editable, useEditableStatic, useLocaleFormat } from '@editablejs/editor';\nimport { TableDrag, useTableDragCount, useTableDragPoint } from '../hooks/use-drag';\nexport const Dragging = () => {\n  const editor = useEditableStatic();\n  const point = useTableDragPoint();\n  const count = useTableDragCount();\n  const {\n    format\n  } = useLocaleFormat('table');\n  if (!point) return null;\n  const [x, y] = Editable.toRelativePosition(editor, point.x, point.y);\n  return <_StyledDiv style={{\n    transform: `translate(${x}px, ${y}px)`\n  }}>\n      <_StyledDiv2>\n        {format(TableDrag.getDragType() === 'col' ? 'moveCols' : 'moveRows', {\n        count\n      })}\n      </_StyledDiv2>\n    </_StyledDiv>;\n};\n\nvar _StyledDiv = _styled(\"div\").withConfig({\n  componentId: \"sc-9ij67v-0\"\n})({\n  \"pointerEvents\": \"none\",\n  \"position\": \"absolute\",\n  \"left\": \"0px\",\n  \"top\": \"0px\",\n  \"zIndex\": \"10\",\n  \"--tw-bg-opacity\": \"1\",\n  \"backgroundColor\": \"rgb(59 130 246 / var(--tw-bg-opacity))\",\n  \"paddingTop\": \"0.5rem\",\n  \"paddingBottom\": \"0.5rem\",\n  \"paddingLeft\": \"1rem\",\n  \"paddingRight\": \"1rem\",\n  \"--tw-text-opacity\": \"1\",\n  \"color\": \"rgb(255 255 255 / var(--tw-text-opacity))\",\n  \"opacity\": \"0.8\"\n});\n\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  componentId: \"sc-9ij67v-1\"\n})({\n  \"textAlign\": \"center\",\n  \"fontSize\": \"12px\"\n});","import * as React from 'react'\nimport create, { useStore } from 'zustand'\n\nexport interface TableDragStore {\n  drag: {\n    /**\n     *   \n     */\n    type: 'row' | 'col'\n    /**\n     * \n     */\n    from: number[]\n    /**\n     * \n     */\n    to: number\n    /**\n     * \n     */\n    point: Record<'x' | 'y', number>\n  } | null\n}\n\n/**\n * \n */\nconst store = create<TableDragStore>(() => ({\n  drag: null,\n}))\n\n/**\n * \n * @returns\n */\nexport const useTableDragging = () => {\n  const drag = useStore(store, state => state.drag !== null)\n\n  return React.useMemo(() => drag, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragTo = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.to ?? -1, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragPoint = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.point ?? null, [drag])\n}\n\n/**\n * \n * @returns\n */\nexport const useTableDragCount = () => {\n  const drag = useStore(store, state => state.drag)\n\n  return React.useMemo(() => drag?.from.length ?? 0, [drag])\n}\n\n/**\n * \n */\nexport const TableDrag = {\n  /**\n   * \n   * @returns\n   */\n  isDragging: () => {\n    const { drag } = store.getState()\n    return drag !== null\n  },\n  /**\n   * \n   * @returns\n   */\n  getDrag: () => {\n    const { drag } = store.getState()\n    if (!drag) throw new Error('not drag')\n    return drag\n  },\n  /**\n   * \n   * @returns\n   */\n  getDragType: () => {\n    const { drag } = store.getState()\n    if (!drag) return null\n    return drag.type\n  },\n  /**\n   * \n   * @param type\n   * @param from\n   */\n  setFrom: (type: 'row' | 'col', from: number[], point: Record<'x' | 'y', number>) => {\n    store.setState({ drag: { type, from, point, to: -1 } })\n  },\n  /**\n   * \n   * @param to\n   * @returns\n   */\n  setTo: (to: number) => {\n    const { drag } = store.getState()\n    if (!drag) return\n    store.setState(() => {\n      const max = Math.max(...drag.from)\n      return {\n        drag: { ...drag, to: ~drag.from.concat(max + 1).indexOf(to) ? -1 : to },\n      }\n    })\n  },\n  /**\n   * \n   * @param point\n   * @returns\n   */\n  setPoint: (point: Record<'x' | 'y', number>) => {\n    const { drag } = store.getState()\n    if (!drag) return\n    store.setState({ drag: { ...drag, point } })\n  },\n  /**\n   * \n   */\n  clear: () => {\n    store.setState({ drag: null })\n  },\n}\n","import { Editable } from '@editablejs/editor'\nimport * as React from 'react'\nimport { InsertAction, SplitAction } from './action'\nimport { useTableStore } from '../context'\nimport { Editor, Grid } from '@editablejs/models'\nimport {\n  ColsHeaderItemStyles,\n  ColsHeaderStyles,\n  HeaderDragStyles,\n  RowsHeaderItemStyles,\n  RowsHeaderStyles,\n} from './styles'\nimport { TableDrag } from '../hooks/use-drag'\nimport { useTableRowContentHeights } from '../row/store'\nexport interface TableHeaderProps {\n  editor: Editor\n  table: Grid\n}\n\nconst TableRowHeaderDefault: React.FC<\n  TableHeaderProps & {\n    rowContentHeights: number[]\n  }\n> = ({ editor, table, rowContentHeights }) => {\n  const { width, selected, cols } = useTableStore()\n\n  const selectRow = React.useCallback(\n    (row: number) => {\n      Grid.select(editor, Editable.findPath(editor, table), {\n        start: [row, 0],\n        end: [row, cols - 1],\n      })\n    },\n    [editor, table, cols],\n  )\n\n  const handleWindowMouseUp = React.useCallback(() => {\n    if (TableDrag.isDragging()) {\n      const dragging = TableDrag.getDrag()\n\n      TableDrag.clear()\n      const { type, to, from } = dragging\n      if (to > -1 && type === 'row') {\n        const move = Math.min(...from)\n        const isBackward = to < move\n        Grid.moveRow(editor, {\n          move,\n          count: from.length,\n          to: isBackward ? to : to - 1,\n        })\n      }\n    }\n    window.removeEventListener('mouseup', handleWindowMouseUp)\n  }, [editor])\n\n  const handleMouseDown = React.useCallback(\n    (e: React.MouseEvent, row: number) => {\n      e.preventDefault()\n\n      if (selected.rowFull && !selected.allFull && ~selected.rows.indexOf(row)) {\n        // start drag\n        TableDrag.setFrom('row', [...selected.rows], {\n          x: e.clientX,\n          y: e.clientY,\n        })\n        window.addEventListener('mouseup', handleWindowMouseUp)\n      }\n    },\n    [selected.rowFull, selected.allFull, selected.rows, handleWindowMouseUp],\n  )\n\n  const handleMouseUp = React.useCallback(\n    (e: React.MouseEvent, row: number) => {\n      e.preventDefault()\n      selectRow(row)\n    },\n    [selectRow],\n  )\n\n  const headers = React.useMemo(() => {\n    const headers = []\n    headers.push(\n      <InsertAction\n        editor={editor}\n        table={table}\n        index={0}\n        width={width}\n        top={0}\n        key=\"insert--1\"\n      />,\n    )\n    let height = 0\n    const { children } = table\n    for (let i = 0; i < children.length; i++) {\n      const row = children[i]\n      const rowHeight = rowContentHeights[i] || row.height\n      const currentHeight = height\n      const h = rowHeight ?? 0\n      height += h\n      const hover = ~selected.rows.indexOf(i)\n      headers.push(\n        <RowsHeaderItemStyles\n          onMouseDown={e => handleMouseDown(e, i)}\n          onMouseUp={e => handleMouseUp(e, i)}\n          allFull={selected.allFull}\n          isHover={!!hover}\n          isFull={!!hover && selected.rowFull}\n          style={{ height: h + 1, top: currentHeight }}\n          key={i}\n          data-table-row={i}\n        >\n          <HeaderDragStyles name=\"drag\" />\n        </RowsHeaderItemStyles>,\n        <InsertAction\n          editor={editor}\n          table={table}\n          width={width}\n          index={i + 1}\n          top={height}\n          key={`insert-${i}`}\n        />,\n        <SplitAction\n          editor={editor}\n          table={table}\n          index={i}\n          width={width}\n          top={height}\n          key={`split-${i}`}\n        />,\n      )\n    }\n    return headers\n  }, [\n    editor,\n    handleMouseDown,\n    handleMouseUp,\n    selected.allFull,\n    selected.rowFull,\n    selected.rows,\n    table,\n    width,\n    rowContentHeights,\n  ])\n\n  return <RowsHeaderStyles>{headers}</RowsHeaderStyles>\n}\n\nconst TableRowHeader = TableRowHeaderDefault\n\nconst TableColHeaderDefault: React.FC<TableHeaderProps> = ({ editor, table }) => {\n  const { height, selected, rows } = useTableStore()\n\n  const selectColumn = React.useCallback(\n    (col: number) => {\n      Grid.select(editor, Editable.findPath(editor, table), {\n        start: [0, col],\n        end: [rows - 1, col],\n      })\n    },\n    [editor, table, rows],\n  )\n\n  const handleWindowMouseUp = React.useCallback(() => {\n    if (TableDrag.isDragging()) {\n      const dragging = TableDrag.getDrag()\n\n      TableDrag.clear()\n      const { type, to, from } = dragging\n      if (to > -1 && type === 'col') {\n        const move = Math.min(...from)\n        const isBackward = to < move\n        Grid.moveCol(editor, {\n          move,\n          count: from.length,\n          to: isBackward ? to : to - 1,\n        })\n      }\n    }\n    window.removeEventListener('mouseup', handleWindowMouseUp)\n  }, [editor])\n\n  const handleMouseDown = React.useCallback(\n    (e: React.MouseEvent, col: number) => {\n      e.preventDefault()\n      if (selected.colFull && !selected.allFull && ~selected.cols.indexOf(col)) {\n        // start drag\n        TableDrag.setFrom('col', [...selected.cols], {\n          x: e.clientX,\n          y: e.clientY,\n        })\n        window.addEventListener('mouseup', handleWindowMouseUp)\n      }\n    },\n    [handleWindowMouseUp, selected.allFull, selected.colFull, selected.cols],\n  )\n\n  const handleMouseUp = React.useCallback(\n    (e: React.MouseEvent, col: number) => {\n      e.preventDefault()\n      selectColumn(col)\n    },\n    [selectColumn],\n  )\n\n  const { colsWidth = [] } = table\n\n  const headers = React.useMemo(() => {\n    const headers = []\n    let width = 0\n    headers.push(\n      <InsertAction\n        editor={editor}\n        table={table}\n        index={0}\n        height={height}\n        left={0}\n        key=\"insert--1\"\n      />,\n    )\n    for (let i = 0; i < colsWidth.length; i++) {\n      const cw = colsWidth[i]\n      const currentWidth = width\n      width += cw\n      const hover = ~selected.cols.indexOf(i)\n      headers.push(\n        <ColsHeaderItemStyles\n          onMouseDown={e => handleMouseDown(e, i)}\n          onMouseUp={e => handleMouseUp(e, i)}\n          isHover={!!hover}\n          allFull={selected.allFull}\n          isFull={!!hover && selected.colFull}\n          style={{ width: cw + 1, left: currentWidth }}\n          key={i}\n          data-table-col={i}\n        >\n          <HeaderDragStyles name=\"drag\" />\n        </ColsHeaderItemStyles>,\n        <InsertAction\n          editor={editor}\n          table={table}\n          index={i + 1}\n          left={width}\n          height={height}\n          key={`insert-${i}`}\n        />,\n        <SplitAction\n          editor={editor}\n          table={table}\n          index={i}\n          height={height}\n          left={width}\n          key={`split-${i}`}\n        />,\n      )\n    }\n    return headers\n  }, [\n    colsWidth,\n    editor,\n    handleMouseDown,\n    handleMouseUp,\n    height,\n    selected.allFull,\n    selected.colFull,\n    selected.cols,\n    table,\n  ])\n\n  return <ColsHeaderStyles>{headers}</ColsHeaderStyles>\n}\n\nconst TableColHeader = React.memo(TableColHeaderDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  const { colsWidth, children } = table\n  const { colsWidth: nextColsWidth, children: nextChildren } = nextTable\n  return (\n    editor === nextEditor &&\n    children.length === nextChildren.length &&\n    colsWidth?.length === nextColsWidth?.length &&\n    !!colsWidth?.every((item, index) => item === nextColsWidth?.[index])\n  )\n})\n\nexport { TableColHeader, TableRowHeader }\n","import { cancellablePromise, Editable, useCancellablePromises, Slot } from '@editablejs/editor'\nimport { Transforms, Grid, Editor } from '@editablejs/models'\nimport * as React from 'react'\nimport { Icon } from '@editablejs/ui'\nimport {\n  ColsInsertIconStyles,\n  ColsInsertLineStyles,\n  ColsInsertPlusStyles,\n  ColsInsertStyles,\n  ColsSplitLineStyles,\n  ColsSplitStyles,\n  RowsInsertIconStyles,\n  RowsInsertLineStyles,\n  RowsInsertPlusStyles,\n  RowsInsertStyles,\n  RowsSplitLineStyles,\n  RowsSplitStyles,\n} from './styles'\nimport { TableDrag, useTableDragging, useTableDragTo } from '../hooks/use-drag'\nimport { TABLE_CELL_KEY } from '../cell/constants'\nimport { TableRow } from '../row'\nimport { TABLE_ROW_KEY } from '../row/constants'\nimport { useTableOptions } from '../table/options'\nimport { defaultTableMinColWidth } from '../cell/options'\nimport { defaultTableMinRowHeight } from '../row/options'\nimport { adaptiveExpandColumnWidthInContainer } from '../table/utils'\nimport { RowStore } from '../row/store'\n\nconst TYPE_COL = 'col'\nconst TYPE_ROW = 'row'\n\nexport interface TableActionProps {\n  editor: Editor\n  table: Grid\n  index: number\n  left?: number\n  top?: number\n  height?: number\n  width?: number\n}\n\n// insert action\nconst InsertActionDefault: React.FC<TableActionProps> = ({\n  editor,\n  table,\n  left,\n  top,\n  height,\n  width,\n  index,\n}) => {\n  if (left !== undefined) {\n    left -= 1\n  }\n  if (top !== undefined) {\n    top -= 1\n  }\n\n  if (height !== undefined) {\n    height += 11\n  }\n  if (width !== undefined) {\n    width += 11\n  }\n\n  const type = left !== undefined ? TYPE_COL : TYPE_ROW\n\n  const { minColWidth = defaultTableMinColWidth, minRowHeight = defaultTableMinRowHeight } =\n    useTableOptions(editor)\n\n  const draggingTo = useTableDragTo()\n\n  const handleMouseDown = (event: React.MouseEvent) => {\n    event.preventDefault()\n    if (type === TYPE_COL) {\n      let colWidth = minColWidth\n      const { colsWidth } = table\n      if (colsWidth) {\n        if (index >= colsWidth.length) colWidth = colsWidth[colsWidth.length - 1]\n        else {\n          colWidth = colsWidth[index]\n        }\n      }\n      const path = Editable.findPath(editor, table)\n      Grid.insertCol(editor, path, index, { type: TABLE_CELL_KEY }, colWidth, minColWidth)\n      const newGrid = Grid.above(editor, path)\n      if (newGrid && newGrid[0].colsWidth) {\n        const newColsWidth = adaptiveExpandColumnWidthInContainer(editor, newGrid[0].colsWidth)\n        Transforms.setNodes<Grid>(editor, { colsWidth: newColsWidth }, { at: path })\n      }\n    } else if (type === TYPE_ROW) {\n      Grid.insertRow(\n        editor,\n        Editable.findPath(editor, table),\n        index,\n        { type: TABLE_ROW_KEY },\n        { type: TABLE_CELL_KEY },\n        minRowHeight,\n      )\n    }\n  }\n\n  const draggingActive = React.useMemo(() => {\n    return draggingTo > -1 && draggingTo === index && TableDrag.getDrag().type === type\n  }, [draggingTo, index, type])\n\n  const InsertStyles = type === TYPE_COL ? ColsInsertStyles : RowsInsertStyles\n  const InsertIconStyles = type === TYPE_COL ? ColsInsertIconStyles : RowsInsertIconStyles\n  const InsertLineStyles = type === TYPE_COL ? ColsInsertLineStyles : RowsInsertLineStyles\n  const InsertPlusStyles = type === TYPE_COL ? ColsInsertPlusStyles : RowsInsertPlusStyles\n  return (\n    <InsertStyles isActive={draggingActive} style={{ left, top }} onMouseDown={handleMouseDown}>\n      <InsertIconStyles>\n        <svg width=\"3\" height=\"3\" viewBox=\"0 0 3 3\" fill=\"none\">\n          <circle cx=\"1.5\" cy=\"1.5\" r=\"1.5\" fill=\"#BBBFC4\"></circle>\n        </svg>\n      </InsertIconStyles>\n      {!draggingActive && (\n        <InsertPlusStyles>\n          <Icon name=\"plusCircle\" />\n        </InsertPlusStyles>\n      )}\n      <InsertLineStyles isActive={draggingActive} style={{ height, width }}></InsertLineStyles>\n    </InsertStyles>\n  )\n}\n\nexport const InsertAction = React.memo(InsertActionDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  return (\n    editor === nextEditor &&\n    table === nextTable &&\n    prev.index === next.index &&\n    prev.left === next.left &&\n    prev.top === next.top &&\n    prev.height === next.height &&\n    prev.width === next.width\n  )\n})\n\ninterface TableDragSplitOptions {\n  type: typeof TYPE_COL | typeof TYPE_ROW\n  x: number\n  y: number\n  start: number\n  end: number\n}\n// split action\nconst SplitActionDefault: React.FC<TableActionProps> = ({\n  editor,\n  table,\n  left,\n  top,\n  height,\n  width,\n  index,\n}) => {\n  if (height !== undefined) {\n    height += 8\n  }\n  if (width !== undefined) {\n    width += 8\n  }\n  // /31\n  if (left !== undefined) {\n    left -= 1\n  }\n  if (top !== undefined) {\n    top -= 1\n  }\n  const type = left !== undefined ? TYPE_COL : TYPE_ROW\n\n  const dragRef = React.useRef<TableDragSplitOptions | null>(null)\n  const { minColWidth = defaultTableMinColWidth, minRowHeight = defaultTableMinRowHeight } =\n    useTableOptions(editor)\n  const [isHover, setHover] = React.useState(false)\n  const isDrag = React.useRef(false)\n\n  const handleDragSplitMove = React.useCallback(\n    (e: MouseEvent) => {\n      if (!dragRef.current) return\n      const { type, x, y, start } = dragRef.current\n      const path = Editable.findPath(editor, table)\n      if (type === TYPE_COL) {\n        const { colsWidth } = table\n        if (!colsWidth) return\n        const cX = e.clientX\n        const val = cX - x\n        const newColsWidth = colsWidth.concat()\n        let width = newColsWidth[start] + val\n        width = Math.max(width, minColWidth)\n        if (start < newColsWidth.length - 1) {\n          width = Math.min(newColsWidth[start] + newColsWidth[start + 1] - minColWidth, width)\n          let nextW = newColsWidth[start + 1] - val\n          nextW = Math.max(nextW, minColWidth)\n          nextW = Math.min(newColsWidth[start] + newColsWidth[start + 1] - minColWidth, nextW)\n          newColsWidth[start + 1] = nextW\n        }\n        newColsWidth[start] = width\n        Transforms.setNodes<Grid>(editor, { colsWidth: newColsWidth }, { at: path })\n      } else if (type === TYPE_ROW) {\n        const row = table.children[start]\n        const { height, children: cells } = row\n        if (height) {\n          const ch = RowStore.getContentHeight(row)\n          const cY = e.clientY\n          const val = cY - y\n          let h = Math.max(height, ch!) + val\n          h = Math.max(h, minRowHeight)\n          let contentHeight = 0\n          for (let i = 0; i < cells.length; i++) {\n            const child = Editable.toDOMNode(editor, cells[i]).firstElementChild\n            if (!child) continue\n            const rect = child.getBoundingClientRect()\n            contentHeight = Math.max(contentHeight, rect.height + 2, minRowHeight)\n          }\n          if (h < contentHeight) {\n            h = contentHeight\n          }\n          RowStore.setContentHeight(row, contentHeight)\n          Transforms.setNodes<TableRow>(editor, { height: h }, { at: path.concat(start) })\n        }\n      }\n    },\n    [editor, minColWidth, minRowHeight, table],\n  )\n\n  const cancellablePromisesApi = useCancellablePromises()\n\n  const handleDragSplitUp = React.useCallback(() => {\n    dragRef.current = null\n    isDrag.current = false\n    setHover(false)\n    cancellablePromisesApi.clearPendingPromises()\n    window.removeEventListener('mousemove', handleDragSplitMove)\n    window.removeEventListener('mouseup', handleDragSplitUp)\n  }, [cancellablePromisesApi, dragRef, handleDragSplitMove])\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault()\n    dragRef.current = {\n      type,\n      x: e.clientX,\n      y: e.clientY,\n      start: index,\n      end: index,\n    }\n    isDrag.current = true\n    setHover(true)\n    window.addEventListener('mousemove', handleDragSplitMove)\n    window.addEventListener('mouseup', handleDragSplitUp)\n  }\n\n  const draging = useTableDragging()\n\n  React.useEffect(() => {\n    if (draging) Slot.update(editor, { active: false })\n  }, [draging, editor])\n  const handleMouseOver = React.useCallback(() => {\n    if (draging) return\n    cancellablePromisesApi.clearPendingPromises()\n    const wait = cancellablePromise(cancellablePromisesApi.delay(200))\n    cancellablePromisesApi.appendPendingPromise(wait)\n    wait.promise\n      .then(() => {\n        setHover(true)\n      })\n      .catch(err => {})\n  }, [cancellablePromisesApi, draging])\n\n  const handleMouseLeave = React.useCallback(() => {\n    if (isDrag.current) return\n    cancellablePromisesApi.clearPendingPromises()\n    setHover(false)\n  }, [cancellablePromisesApi])\n\n  const SplitStyles = type === TYPE_COL ? ColsSplitStyles : RowsSplitStyles\n  const SplitLineStyles = type === TYPE_COL ? ColsSplitLineStyles : RowsSplitLineStyles\n  if (draging) return null\n  return (\n    <SplitStyles\n      isHover={isHover && !draging}\n      style={{ left, top, height, width }}\n      onMouseDown={handleMouseDown}\n      onMouseOver={handleMouseOver}\n      onMouseLeave={handleMouseLeave}\n    >\n      <SplitLineStyles isHover={isHover && !draging} />\n    </SplitStyles>\n  )\n}\n\nexport const SplitAction = React.memo(SplitActionDefault, (prev, next) => {\n  const { editor, table } = prev\n  const { editor: nextEditor, table: nextTable } = next\n  return (\n    editor === nextEditor &&\n    table === nextTable &&\n    prev.index === next.index &&\n    prev.left === next.left &&\n    prev.top === next.top &&\n    prev.height === next.height &&\n    prev.width === next.width\n  )\n})\n","import {\n  Editable,\n  useGridSelectionRect,\n  useEditableStatic,\n  useIsomorphicLayoutEffect,\n  SelectionDrawing,\n} from '@editablejs/editor'\nimport { Editor, Grid } from '@editablejs/models'\nimport * as React from 'react'\nimport { SelectionStyles } from './styles'\n\nexport interface TableSelectionProps {\n  editor: Editor\n  table: Grid\n}\n\nconst TableSelection: React.FC<TableSelectionProps> = () => {\n  const editor = useEditableStatic()\n  const rect = useGridSelectionRect()\n\n  useIsomorphicLayoutEffect(() => {\n    if (rect) {\n      SelectionDrawing.setEnabled(editor, false)\n    } else {\n      SelectionDrawing.setEnabled(editor, true)\n    }\n\n    return () => {\n      SelectionDrawing.setEnabled(editor, true)\n    }\n  }, [editor, rect])\n\n  if (!rect) return null\n  const { top, left, width, height } = rect\n  return <SelectionStyles style={{ left, top, width, height }} />\n}\n\nexport { TableSelection }\n","import { Editable, Hotkey } from '@editablejs/editor'\nimport { Editor, Element, Range, Point, Transforms } from '@editablejs/models'\nimport { TableCellEditor } from '../../cell'\nimport { TableEditor } from './table-editor'\n\nconst findMatchedRange = (editor: Editor, at: Point) => {\n  const block = Editor.above(editor, {\n    at,\n    match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n  })\n  const path = block ? block[1] : []\n\n  const start = Editor.start(editor, path)\n  const range = { anchor: at, focus: start }\n  const beforeText = Editor.string(editor, range)\n  const reg = /^\\|([^\\|]+\\|)+$/\n  const match = beforeText.match(reg)\n  if (match) {\n    const columns = beforeText.slice(1, -1).split('|')\n\n    for (let i = 0; i < columns.length; i++) {\n      if (columns[i] === '') {\n        return\n      }\n    }\n    const start = Editor.start(editor, path)\n    const end = Editor.end(editor, path)\n    return {\n      columns,\n      range: {\n        anchor: {\n          path: start.path,\n          offset: start.offset + beforeText.length,\n        },\n        focus: end,\n      },\n      start,\n      end,\n    }\n  }\n}\nexport const withShortcuts = (editor: Editable) => {\n  const { onKeydown } = editor\n\n  editor.onKeydown = event => {\n    const { selection } = editor\n    if (\n      selection &&\n      Range.isCollapsed(selection) &&\n      !Editable.isComposing(editor) &&\n      Hotkey.match('enter', event) &&\n      !TableEditor.isActive(editor)\n    ) {\n      const anchor = Range.start(selection)\n      const match = findMatchedRange(editor, anchor)\n      if (match) {\n        event.preventDefault()\n        const { range, start, columns } = match\n        Transforms.delete(editor, {\n          at: {\n            anchor: start,\n            focus: range.anchor,\n          },\n        })\n        const cols = columns.map(column =>\n          TableCellEditor.create(editor, {\n            children: [{ text: column }],\n          }),\n        )\n        const table = TableEditor.create(editor, {\n          cols: cols.length,\n          rows: 2,\n        })\n        table.children[0].children = cols\n        TableEditor.insert(editor, table)\n        return\n      }\n    }\n    onKeydown(event)\n  }\n}\n"],"mappings":"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","names":["Transforms","Grid","locale","useIsomorphicLayoutEffect","Editor","Editor","store","store","jsx","useIsomorphicLayoutEffect","setOptions","Editor","Editor","getOptions","useCancellablePromises","cancellablePromise","Editable","useIsomorphicLayoutEffect","Grid","Editor","Transforms","React","_styledstyled_components","Editable","React","create","useStore","jsx","_styled","_styledstyled_components","Editable","jsx","_styled","Editable","React","Editable","Grid","React","Icon","jsx","Editable","Grid","Icon","type","width","height","Grid","jsx","Grid","Editable","headers","useEditableStatic","useIsomorphicLayoutEffect","jsx","useEditableStatic","useIsomorphicLayoutEffect","jsx","jsxs","useIsomorphicLayoutEffect","selection","Editor","Grid","Transforms","children","store","Editable","useCancellablePromises","cancellablePromise","Editable","Editor","Range","Transforms","Editor","start","Range","Editable","Transforms","jsx","setOptions","options","Transforms","Grid"]}
\ No newline at end of file
